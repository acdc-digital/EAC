"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./store/agents/directorAgent.ts":
/*!***************************************!*\
  !*** ./store/agents/directorAgent.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DirectorAgent: () => (/* binding */ DirectorAgent),\n/* harmony export */   directorAgent: () => (/* binding */ directorAgent)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(app-pages-browser)/./store/agents/base.ts\");\n// Campaign Director Agent\n// Orchestrates large-scale marketing campaigns with 100+ posts across multiple platforms\n\nclass DirectorAgent extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseAgent {\n    async execute(tool, input, convexMutations, sessionId) {\n        if (!sessionId) {\n            return 'Session ID is required for campaign orchestration';\n        }\n        // Initialize or get session\n        if (!this.sessions.has(sessionId)) {\n            this.sessions.set(sessionId, {\n                currentStep: 'instructions',\n                activeCampaigns: new Map()\n            });\n        }\n        const session = this.sessions.get(sessionId);\n        // Handle continuation from file selection\n        if (input.includes('file_selection') && session.currentStep === 'instructions') {\n            // This means the user has completed file selection, proceed to next step\n            if (session.instructionsFile && session.instructionsContent) {\n                session.currentStep = 'campaign-setup';\n                const contentPreview = session.instructionsContent ? \"\".concat(session.instructionsContent.substring(0, 200)).concat(session.instructionsContent.length > 200 ? '...' : '') : 'Content loaded successfully';\n                return \"Instructions Loaded: \".concat(session.instructionsFile, \"\\n\\nInstructions Content Preview:\\n\").concat(contentPreview, '\\n\\nStep 2: Campaign Configuration\\n\\nNow let me set up your campaign parameters based on your instructions. Please provide the following information:\\n\\n1. Campaign Name\\n2. Campaign Duration (in weeks)\\n3. Target Platforms (twitter, linkedin, facebook, instagram)\\n4. Posts per day\\n5. Campaign Goals\\n\\nType your campaign details or say \"generate default campaign\" to use standard settings.');\n            }\n        }\n        // Step 1: Request instructions file\n        if (session.currentStep === 'instructions' && !session.instructionsFile) {\n            if (convexMutations.storeChatMessage) {\n                await convexMutations.storeChatMessage({\n                    role: 'assistant',\n                    content: 'Campaign Director Agent\\n\\nI will help you orchestrate a comprehensive marketing campaign with 100+ posts across multiple platforms.\\n\\nStep 1: Select Instructions File\\n\\nFirst, I need to understand your campaign strategy. Please select an instructions file that contains your campaign guidelines, brand voice, or marketing strategy.\\n\\nWhat you can include in your instructions file:\\n- Brand voice and tone guidelines\\n- Target audience information\\n- Campaign objectives and KPIs\\n- Content themes and messaging\\n- Platform-specific requirements\\n- Hashtag strategies\\n- Visual guidelines\\n\\nSelect your instructions file:',\n                    sessionId,\n                    interactiveComponent: {\n                        type: 'file_selector',\n                        status: 'pending',\n                        data: {\n                            fileType: 'instructions',\n                            filterByExtension: [\n                                '.md',\n                                '.txt'\n                            ],\n                            placeholder: 'Select campaign instructions file...'\n                        }\n                    }\n                });\n            }\n            return 'Please select an instructions file to get started with your campaign.';\n        }\n        // Handle file selection input\n        if (input.includes('Selected file:') && session.currentStep === 'instructions') {\n            const fileName = input.replace('Selected file:', '').trim();\n            session.instructionsFile = fileName;\n            // Fetch the file content\n            try {\n                var _convexMutations_getAllFiles;\n                const files = await ((_convexMutations_getAllFiles = convexMutations.getAllFiles) === null || _convexMutations_getAllFiles === void 0 ? void 0 : _convexMutations_getAllFiles.call(convexMutations)) || [];\n                const instructionFile = files.find((f)=>f.name === fileName);\n                if (instructionFile) {\n                    session.instructionsContent = instructionFile.content;\n                    session.currentStep = 'campaign-setup';\n                    const contentPreview = session.instructionsContent ? \"\".concat(session.instructionsContent.substring(0, 200)).concat(session.instructionsContent.length > 200 ? '...' : '') : 'Content loaded successfully';\n                    return \"Instructions Loaded: \".concat(fileName, \"\\n\\nInstructions Content Preview:\\n\").concat(contentPreview, '\\n\\nStep 2: Campaign Configuration\\n\\nNow let me set up your campaign parameters based on your instructions. Please provide the following information:\\n\\n1. Campaign Name\\n2. Campaign Duration (in weeks)\\n3. Target Platforms (twitter, linkedin, facebook, instagram)\\n4. Posts per day\\n5. Campaign Goals\\n\\nType your campaign details or say \"generate default campaign\" to use standard settings.');\n                } else {\n                    return 'File \"'.concat(fileName, '\" not found. Please select a valid instructions file.');\n                }\n            } catch (error) {\n                console.error('Error loading instructions file:', error);\n                return 'Error loading instructions file. Please try again.';\n            }\n        }\n        // Handle campaign configuration\n        if (session.currentStep === 'campaign-setup') {\n            if (input.toLowerCase().includes('generate default campaign') || input.toLowerCase().includes('default')) {\n                // Use default campaign settings\n                session.campaignName = 'EAC Marketing Campaign';\n                session.duration = 4; // weeks\n                session.platforms = [\n                    'twitter',\n                    'linkedin',\n                    'instagram',\n                    'facebook'\n                ];\n                session.postsPerDay = 3;\n                session.campaignGoals = 'Brand awareness and lead generation';\n                session.currentStep = 'generating';\n                return await this.generateCampaign(session, convexMutations, sessionId);\n            } else {\n                // Parse custom campaign settings from user input\n                return this.parseCampaignSettings(input, session);\n            }\n        }\n        // Handle batch generation status updates\n        if (input.includes('batch completed') || input.includes('posts generated')) {\n            return this.handleBatchCompletion(input, session);\n        }\n        return 'Campaign orchestration in progress. Use /director to start a new campaign.';\n    }\n    parseCampaignSettings(input, session) {\n        var _session_platforms;\n        // Extract campaign settings from user input\n        const lines = input.split('\\n').map((line)=>line.trim()).filter((line)=>line.length > 0);\n        for (const line of lines){\n            const lower = line.toLowerCase();\n            if (lower.includes('name:') || lower.startsWith('1.')) {\n                var _line_split_;\n                session.campaignName = ((_line_split_ = line.split(':')[1]) === null || _line_split_ === void 0 ? void 0 : _line_split_.trim()) || line.replace(/^1\\./, '').trim();\n            } else if (lower.includes('duration:') || lower.includes('weeks') || lower.startsWith('2.')) {\n                const match = line.match(/(\\d+)/);\n                if (match) session.duration = parseInt(match[1]);\n            } else if (lower.includes('platform') || lower.startsWith('3.')) {\n                const platforms = line.toLowerCase().match(/(twitter|linkedin|facebook|instagram)/g);\n                if (platforms) session.platforms = platforms;\n            } else if (lower.includes('posts per day') || lower.startsWith('4.')) {\n                const match = line.match(/(\\d+)/);\n                if (match) session.postsPerDay = parseInt(match[1]);\n            } else if (lower.includes('goals:') || lower.startsWith('5.')) {\n                var _line_split_1;\n                session.campaignGoals = ((_line_split_1 = line.split(':')[1]) === null || _line_split_1 === void 0 ? void 0 : _line_split_1.trim()) || line.replace(/^5\\./, '').trim();\n            }\n        }\n        // Validate required fields\n        if (!session.campaignName || !session.duration || !((_session_platforms = session.platforms) === null || _session_platforms === void 0 ? void 0 : _session_platforms.length)) {\n            return 'Please provide all required campaign details:\\n\\n1. Campaign Name\\n2. Duration (weeks)\\n3. Platforms\\n4. Posts per day\\n5. Goals\\n\\nOr type \"generate default campaign\" to use standard settings.';\n        }\n        session.currentStep = 'generating';\n        return \"Campaign Configuration Set:\\n\\nName: \".concat(session.campaignName, \"\\nDuration: \").concat(session.duration, \" weeks\\nPlatforms: \").concat(session.platforms.join(', '), \"\\nPosts per day: \").concat(session.postsPerDay, \"\\nGoals: \").concat(session.campaignGoals, \"\\n\\nGenerating your comprehensive campaign...\");\n    }\n    async generateCampaign(session, convexMutations, sessionId) {\n        try {\n            // Calculate total posts needed\n            const totalDays = (session.duration || 4) * 7;\n            const postsPerDay = session.postsPerDay || 3;\n            const totalPosts = totalDays * postsPerDay;\n            const platforms = session.platforms || [\n                'twitter',\n                'linkedin',\n                'instagram',\n                'facebook'\n            ];\n            // Create campaign in database\n            let campaignId;\n            try {\n                var _convexMutations_createCampaign;\n                const campaign = await ((_convexMutations_createCampaign = convexMutations.createCampaign) === null || _convexMutations_createCampaign === void 0 ? void 0 : _convexMutations_createCampaign.call(convexMutations, {\n                    name: session.campaignName || 'Generated Campaign',\n                    description: \"Auto-generated campaign: \".concat(session.campaignGoals || 'Marketing campaign'),\n                    platforms,\n                    totalPosts,\n                    duration: session.duration || 4,\n                    instructionsContent: session.instructionsContent || '',\n                    status: 'generating'\n                }));\n                campaignId = (campaign === null || campaign === void 0 ? void 0 : campaign._id) || \"campaign_\".concat(Date.now());\n            } catch (error) {\n                console.log('Campaign creation not available, using fallback ID');\n                campaignId = \"campaign_\".concat(Date.now());\n            }\n            // Generate posts in batches\n            const allPosts = await this.generateBatchesAsync(totalPosts, platforms, session.instructionsContent || '', campaignId, session.duration || 4);\n            // Create batches for processing\n            const batches = this.createBatches(allPosts, campaignId);\n            // Store batches in session\n            batches.forEach((batch)=>{\n                session.activeCampaigns.set(batch.campaignId, batch);\n            });\n            // Process first batch\n            if (batches.length > 0) {\n                await this.processBatch(batches[0], convexMutations, sessionId);\n            }\n            session.currentStep = 'scheduling';\n            return \"Campaign Generation Complete!\\n\\nGenerated \".concat(totalPosts, \" posts across \").concat(platforms.length, \" platforms\\nOrganized into \").concat(batches.length, \" processing batches\\nStarting content creation and scheduling...\\n\\nCampaign ID: \").concat(campaignId, \"\\nTotal Posts: \").concat(totalPosts, \"\\nPlatforms: \").concat(platforms.join(', '), \"\\nDuration: \").concat(session.duration, \" weeks\");\n        } catch (error) {\n            console.error('Campaign generation error:', error);\n            return \"Error generating campaign: \".concat(error instanceof Error ? error.message : 'Unknown error');\n        }\n    }\n    async generateBatchesAsync(totalPosts, platforms, instructions, campaignId, duration) {\n        const posts = [];\n        const days = [\n            'Monday',\n            'Tuesday',\n            'Wednesday',\n            'Thursday',\n            'Friday',\n            'Saturday',\n            'Sunday'\n        ];\n        for(let i = 0; i < totalPosts; i++){\n            const platform = platforms[i % platforms.length];\n            const week = Math.floor(i / (totalPosts / duration)) + 1;\n            const dayIndex = i % 7;\n            const day = days[dayIndex];\n            // Determine optimal posting time based on platform\n            const time = this.getOptimalPostTime(platform, dayIndex);\n            // Calculate post date\n            const startDate = new Date();\n            const postDate = new Date(startDate);\n            postDate.setDate(startDate.getDate() + Math.floor(i / platforms.length));\n            // Determine campaign phase based on week\n            const phases = [\n                'awareness',\n                'consideration',\n                'conversion',\n                'retention'\n            ];\n            const phaseIndex = Math.floor((week - 1) / (duration / phases.length));\n            const phase = phases[Math.min(phaseIndex, phases.length - 1)];\n            // Determine content type cyclically\n            const contentTypes = [\n                'educational',\n                'promotional',\n                'engagement',\n                'announcement'\n            ];\n            const contentType = contentTypes[i % contentTypes.length];\n            // Generate content\n            const content = this.generatePlatformContent(platform, phase, contentType, instructions, week, day);\n            posts.push({\n                platform,\n                content,\n                scheduledDate: postDate.toISOString().split('T')[0],\n                scheduledTime: time,\n                metadata: {\n                    week,\n                    dayOfWeek: day,\n                    campaignPhase: phase,\n                    contentType,\n                    hashtags: this.generateHashtags(platform, phase, contentType),\n                    campaignId,\n                    batchId: \"batch_\".concat(Math.floor(i / this.BATCH_SIZE))\n                }\n            });\n        }\n        return posts;\n    }\n    getOptimalPostTime(platform, dayIndex) {\n        const times = {\n            twitter: [\n                '09:00',\n                '12:00',\n                '15:00',\n                '18:00'\n            ],\n            linkedin: [\n                '08:00',\n                '12:00',\n                '17:00'\n            ],\n            instagram: [\n                '11:00',\n                '14:00',\n                '17:00',\n                '19:00'\n            ],\n            facebook: [\n                '09:00',\n                '13:00',\n                '15:00'\n            ]\n        };\n        const platformTimes = times[platform] || times.twitter;\n        return platformTimes[dayIndex % platformTimes.length];\n    }\n    generatePlatformContent(platform, phase, contentType, instructions, week, day) {\n        const brandVoice = this.extractBrandVoice(instructions);\n        const audience = this.extractAudience(instructions);\n        const content = \"\".concat(brandVoice, \" content for \").concat(audience, \" - Week \").concat(week, \", \").concat(day, \". Phase: \").concat(phase, \", Type: \").concat(contentType, \". Platform: \").concat(platform);\n        // Platform-specific formatting\n        switch(platform){\n            case 'twitter':\n                return content.length > 250 ? content.substring(0, 247) + '...' : content;\n            case 'linkedin':\n                return \"\".concat(content, \"\\n\\n#LinkedInEngagement #ProfessionalGrowth\");\n            case 'instagram':\n                return \"\".concat(content, \" ✨\\n\\n#InstagramBusiness #VisualContent\");\n            case 'facebook':\n                return \"\".concat(content, \"\\n\\nWhat do you think? Share your thoughts below! \\uD83D\\uDC47\");\n            default:\n                return content;\n        }\n    }\n    extractBrandVoice(instructions) {\n        const voiceKeywords = [\n            'professional',\n            'friendly',\n            'innovative',\n            'trusted',\n            'expert',\n            'reliable'\n        ];\n        const lowerInstructions = instructions.toLowerCase();\n        for (const keyword of voiceKeywords){\n            if (lowerInstructions.includes(keyword)) {\n                return keyword.charAt(0).toUpperCase() + keyword.slice(1);\n            }\n        }\n        return 'Professional';\n    }\n    extractAudience(instructions) {\n        const audienceKeywords = [\n            'businesses',\n            'professionals',\n            'teams',\n            'companies',\n            'organizations',\n            'users'\n        ];\n        const lowerInstructions = instructions.toLowerCase();\n        for (const keyword of audienceKeywords){\n            if (lowerInstructions.includes(keyword)) {\n                return keyword;\n            }\n        }\n        return 'professionals';\n    }\n    generateHashtags(platform, phase, contentType) {\n        const baseHashtags = [\n            'marketing',\n            'business',\n            'growth'\n        ];\n        const phaseHashtags = {\n            awareness: [\n                'brandawareness',\n                'introduction'\n            ],\n            consideration: [\n                'solutions',\n                'evaluation'\n            ],\n            conversion: [\n                'getstarted',\n                'action'\n            ],\n            retention: [\n                'community',\n                'success'\n            ]\n        };\n        const contentHashtags = {\n            educational: [\n                'tips',\n                'learning'\n            ],\n            promotional: [\n                'offer',\n                'featured'\n            ],\n            engagement: [\n                'discussion',\n                'question'\n            ],\n            announcement: [\n                'news',\n                'update'\n            ]\n        };\n        return [\n            ...baseHashtags,\n            ...phaseHashtags[phase],\n            ...contentHashtags[contentType]\n        ].slice(0, 5);\n    }\n    createBatches(posts, campaignId) {\n        const batches = [];\n        for(let i = 0; i < posts.length; i += this.BATCH_SIZE){\n            const batchPosts = posts.slice(i, i + this.BATCH_SIZE);\n            batches.push({\n                campaignId: \"\".concat(campaignId, \"_batch_\").concat(batches.length),\n                posts: batchPosts,\n                processingStatus: 'pending',\n                processedCount: 0,\n                totalCount: batchPosts.length\n            });\n        }\n        return batches;\n    }\n    async processBatch(batch, convexMutations, sessionId) {\n        batch.processingStatus = 'processing';\n        try {\n            const postPromises = batch.posts.map(async (post)=>{\n                try {\n                    await convexMutations.upsertPost({\n                        fileName: \"\".concat(post.platform, \"_\").concat(post.metadata.week, \"_\").concat(post.metadata.dayOfWeek, \"_\").concat(Date.now()),\n                        fileType: post.platform,\n                        content: post.content,\n                        title: \"Week \".concat(post.metadata.week, \" - \").concat(post.metadata.campaignPhase),\n                        platformData: JSON.stringify({\n                            scheduledDate: post.scheduledDate,\n                            scheduledTime: post.scheduledTime,\n                            hashtags: post.metadata.hashtags,\n                            campaignId: post.metadata.campaignId,\n                            batchId: post.metadata.batchId\n                        }),\n                        status: 'scheduled',\n                        scheduledFor: new Date(\"\".concat(post.scheduledDate, \"T\").concat(post.scheduledTime)).getTime(),\n                        agentType: 'director',\n                        metadata: JSON.stringify(post.metadata)\n                    });\n                    batch.processedCount++;\n                } catch (error) {\n                    console.error('Error processing post:', error);\n                }\n            });\n            await Promise.all(postPromises);\n            batch.processingStatus = 'completed';\n        } catch (error) {\n            console.error('Batch processing error:', error);\n            batch.processingStatus = 'failed';\n        }\n    }\n    handleBatchCompletion(input, session) {\n        const completedBatches = Array.from(session.activeCampaigns.values()).filter((batch)=>batch.processingStatus === 'completed');\n        const totalBatches = session.activeCampaigns.size;\n        const totalProcessed = completedBatches.reduce((sum, batch)=>sum + batch.processedCount, 0);\n        if (completedBatches.length === totalBatches) {\n            session.currentStep = 'complete';\n            return \"Campaign Complete!\\n\\nAll \".concat(totalBatches, \" batches processed successfully.\\nTotal posts created: \").concat(totalProcessed, \"\\nCampaign: \").concat(session.campaignName, \"\\n\\nYour comprehensive marketing campaign is now scheduled and ready!\");\n        }\n        return \"Progress Update:\\nCompleted: \".concat(completedBatches.length, \"/\").concat(totalBatches, \" batches\\nPosts processed: \").concat(totalProcessed, \"\\nContinuing campaign generation...\");\n    }\n    constructor(...args){\n        super(...args), this.id = 'director', this.name = 'Campaign Director', this.description = 'Orchestrates large-scale marketing campaigns with 100+ posts across multiple platforms. Integrates instruction files for brand guidelines and generates comprehensive content strategies.', this.icon = '🎬', this.sessions = new Map(), this.BATCH_SIZE = 10, this.MAX_CONCURRENT_BATCHES = 3, this.tools = [\n            {\n                id: 'orchestrate-campaign',\n                name: 'Orchestrate Campaign',\n                command: '/director',\n                description: 'Create and schedule a complete marketing campaign with 100+ posts across multiple platforms',\n                parameters: []\n            }\n        ];\n    }\n}\nconst directorAgent = new DirectorAgent();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3N0b3JlL2FnZW50cy9kaXJlY3RvckFnZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDBCQUEwQjtBQUMxQix5RkFBeUY7QUFFM0M7QUF3Q3ZDLE1BQU1DLHNCQUFzQkQsNENBQVNBO0lBb0IxQyxNQUFNRSxRQUFRQyxJQUFlLEVBQUVDLEtBQWEsRUFBRUMsZUFBZ0MsRUFBRUMsU0FBa0IsRUFBbUI7UUFDbkgsSUFBSSxDQUFDQSxXQUFXO1lBQ2QsT0FBTztRQUNUO1FBRUEsNEJBQTRCO1FBQzVCLElBQUksQ0FBQyxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDRixZQUFZO1lBQ2pDLElBQUksQ0FBQ0MsUUFBUSxDQUFDRSxHQUFHLENBQUNILFdBQVc7Z0JBQzNCSSxhQUFhO2dCQUNiQyxpQkFBaUIsSUFBSUM7WUFDdkI7UUFDRjtRQUVBLE1BQU1DLFVBQVUsSUFBSSxDQUFDTixRQUFRLENBQUNPLEdBQUcsQ0FBQ1I7UUFFbEMsMENBQTBDO1FBQzFDLElBQUlGLE1BQU1XLFFBQVEsQ0FBQyxxQkFBcUJGLFFBQVFILFdBQVcsS0FBSyxnQkFBZ0I7WUFDOUUseUVBQXlFO1lBQ3pFLElBQUlHLFFBQVFHLGdCQUFnQixJQUFJSCxRQUFRSSxtQkFBbUIsRUFBRTtnQkFDM0RKLFFBQVFILFdBQVcsR0FBRztnQkFFdEIsTUFBTVEsaUJBQWlCTCxRQUFRSSxtQkFBbUIsR0FDOUMsR0FBbURKLE9BQWhEQSxRQUFRSSxtQkFBbUIsQ0FBQ0UsU0FBUyxDQUFDLEdBQUcsTUFBNkQsT0FBdEROLFFBQVFJLG1CQUFtQixDQUFDRyxNQUFNLEdBQUcsTUFBTSxRQUFRLE1BQ3RHO2dCQUVKLE9BQU8sd0JBQXNGRixPQUE5REwsUUFBUUcsZ0JBQWdCLEVBQUMsdUNBQW9ELE9BQWZFLGdCQUFlO1lBQzlHO1FBQ0Y7UUFFQSxvQ0FBb0M7UUFDcEMsSUFBSUwsUUFBUUgsV0FBVyxLQUFLLGtCQUFrQixDQUFDRyxRQUFRRyxnQkFBZ0Is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QUUxQ0MsUUFBcUI7WUFDbkI7Z0JBQ0VILElBQUk7Z0JBQ0poSSxNQUFNO2dCQUNOb0ksU0FBUztnQkFDVHpHLGFBQWE7Z0JBQ2IwRyxZQUFZLEVBQUU7WUFDaEI7U0FDRDs7QUFrWkg7QUFFTyxNQUFNQyxnQkFBZ0IsSUFBSTVLLGdCQUFnQiIsInNvdXJjZXMiOlsiL1VzZXJzL21hdHRoZXdzaW1vbi9Qcm9qZWN0cy9lYWMvZWFjL3N0b3JlL2FnZW50cy9kaXJlY3RvckFnZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENhbXBhaWduIERpcmVjdG9yIEFnZW50XG4vLyBPcmNoZXN0cmF0ZXMgbGFyZ2Utc2NhbGUgbWFya2V0aW5nIGNhbXBhaWducyB3aXRoIDEwMCsgcG9zdHMgYWNyb3NzIG11bHRpcGxlIHBsYXRmb3Jtc1xuXG5pbXBvcnQgeyBBZ2VudFRvb2wsIEJhc2VBZ2VudCB9IGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgeyBDb252ZXhNdXRhdGlvbnMgfSBmcm9tICcuL3R5cGVzJztcblxuaW50ZXJmYWNlIENhbXBhaWduUG9zdCB7XG4gIHBsYXRmb3JtOiAndHdpdHRlcicgfCAnbGlua2VkaW4nIHwgJ2ZhY2Vib29rJyB8ICdpbnN0YWdyYW0nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHNjaGVkdWxlZERhdGU6IHN0cmluZztcbiAgc2NoZWR1bGVkVGltZTogc3RyaW5nO1xuICBtZXRhZGF0YToge1xuICAgIHdlZWs6IG51bWJlcjtcbiAgICBkYXlPZldlZWs6IHN0cmluZztcbiAgICBjYW1wYWlnblBoYXNlOiAnYXdhcmVuZXNzJyB8ICdjb25zaWRlcmF0aW9uJyB8ICdjb252ZXJzaW9uJyB8ICdyZXRlbnRpb24nO1xuICAgIGNvbnRlbnRUeXBlOiAnZWR1Y2F0aW9uYWwnIHwgJ3Byb21vdGlvbmFsJyB8ICdlbmdhZ2VtZW50JyB8ICdhbm5vdW5jZW1lbnQnO1xuICAgIGhhc2h0YWdzOiBzdHJpbmdbXTtcbiAgICBjYW1wYWlnbklkPzogc3RyaW5nO1xuICAgIGJhdGNoSWQ/OiBzdHJpbmc7XG4gIH07XG59XG5cbmludGVyZmFjZSBDYW1wYWlnbkJhdGNoIHtcbiAgY2FtcGFpZ25JZDogc3RyaW5nO1xuICBwb3N0czogQ2FtcGFpZ25Qb3N0W107XG4gIHByb2Nlc3NpbmdTdGF0dXM6ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG4gIHByb2Nlc3NlZENvdW50OiBudW1iZXI7XG4gIHRvdGFsQ291bnQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIERpcmVjdG9yU2Vzc2lvbiB7XG4gIGluc3RydWN0aW9uc0ZpbGU/OiBzdHJpbmc7XG4gIGluc3RydWN0aW9uc0NvbnRlbnQ/OiBzdHJpbmc7XG4gIGNhbXBhaWduTmFtZT86IHN0cmluZztcbiAgY2FtcGFpZ25Hb2Fscz86IHN0cmluZztcbiAgcGxhdGZvcm1zPzogc3RyaW5nW107XG4gIGR1cmF0aW9uPzogbnVtYmVyOyAvLyB3ZWVrc1xuICBwb3N0c1BlckRheT86IG51bWJlcjtcbiAgY29udGVudFN0cmF0ZWd5Pzogc3RyaW5nO1xuICBjdXJyZW50U3RlcDogJ2luc3RydWN0aW9ucycgfCAnY2FtcGFpZ24tc2V0dXAnIHwgJ2dlbmVyYXRpbmcnIHwgJ3NjaGVkdWxpbmcnIHwgJ2NvbXBsZXRlJztcbiAgYWN0aXZlQ2FtcGFpZ25zOiBNYXA8c3RyaW5nLCBDYW1wYWlnbkJhdGNoPjtcbn1cblxuZXhwb3J0IGNsYXNzIERpcmVjdG9yQWdlbnQgZXh0ZW5kcyBCYXNlQWdlbnQge1xuICBpZCA9ICdkaXJlY3Rvcic7XG4gIG5hbWUgPSAnQ2FtcGFpZ24gRGlyZWN0b3InO1xuICBkZXNjcmlwdGlvbiA9ICdPcmNoZXN0cmF0ZXMgbGFyZ2Utc2NhbGUgbWFya2V0aW5nIGNhbXBhaWducyB3aXRoIDEwMCsgcG9zdHMgYWNyb3NzIG11bHRpcGxlIHBsYXRmb3Jtcy4gSW50ZWdyYXRlcyBpbnN0cnVjdGlvbiBmaWxlcyBmb3IgYnJhbmQgZ3VpZGVsaW5lcyBhbmQgZ2VuZXJhdGVzIGNvbXByZWhlbnNpdmUgY29udGVudCBzdHJhdGVnaWVzLic7XG4gIGljb24gPSAn8J+OrCc7XG4gIFxuICBwcml2YXRlIHNlc3Npb25zOiBNYXA8c3RyaW5nLCBEaXJlY3RvclNlc3Npb24+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHJlYWRvbmx5IEJBVENIX1NJWkUgPSAxMDtcbiAgcHJpdmF0ZSByZWFkb25seSBNQVhfQ09OQ1VSUkVOVF9CQVRDSEVTID0gMztcbiAgXG4gIHRvb2xzOiBBZ2VudFRvb2xbXSA9IFtcbiAgICB7XG4gICAgICBpZDogJ29yY2hlc3RyYXRlLWNhbXBhaWduJyxcbiAgICAgIG5hbWU6ICdPcmNoZXN0cmF0ZSBDYW1wYWlnbicsXG4gICAgICBjb21tYW5kOiAnL2RpcmVjdG9yJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIGFuZCBzY2hlZHVsZSBhIGNvbXBsZXRlIG1hcmtldGluZyBjYW1wYWlnbiB3aXRoIDEwMCsgcG9zdHMgYWNyb3NzIG11bHRpcGxlIHBsYXRmb3JtcycsXG4gICAgICBwYXJhbWV0ZXJzOiBbXVxuICAgIH1cbiAgXTtcblxuICBhc3luYyBleGVjdXRlKHRvb2w6IEFnZW50VG9vbCwgaW5wdXQ6IHN0cmluZywgY29udmV4TXV0YXRpb25zOiBDb252ZXhNdXRhdGlvbnMsIHNlc3Npb25JZD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgIHJldHVybiAnU2Vzc2lvbiBJRCBpcyByZXF1aXJlZCBmb3IgY2FtcGFpZ24gb3JjaGVzdHJhdGlvbic7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBvciBnZXQgc2Vzc2lvblxuICAgIGlmICghdGhpcy5zZXNzaW9ucy5oYXMoc2Vzc2lvbklkKSkge1xuICAgICAgdGhpcy5zZXNzaW9ucy5zZXQoc2Vzc2lvbklkLCB7XG4gICAgICAgIGN1cnJlbnRTdGVwOiAnaW5zdHJ1Y3Rpb25zJyxcbiAgICAgICAgYWN0aXZlQ2FtcGFpZ25zOiBuZXcgTWFwKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKSE7XG4gICAgXG4gICAgLy8gSGFuZGxlIGNvbnRpbnVhdGlvbiBmcm9tIGZpbGUgc2VsZWN0aW9uXG4gICAgaWYgKGlucHV0LmluY2x1ZGVzKCdmaWxlX3NlbGVjdGlvbicpICYmIHNlc3Npb24uY3VycmVudFN0ZXAgPT09ICdpbnN0cnVjdGlvbnMnKSB7XG4gICAgICAvLyBUaGlzIG1lYW5zIHRoZSB1c2VyIGhhcyBjb21wbGV0ZWQgZmlsZSBzZWxlY3Rpb24sIHByb2NlZWQgdG8gbmV4dCBzdGVwXG4gICAgICBpZiAoc2Vzc2lvbi5pbnN0cnVjdGlvbnNGaWxlICYmIHNlc3Npb24uaW5zdHJ1Y3Rpb25zQ29udGVudCkge1xuICAgICAgICBzZXNzaW9uLmN1cnJlbnRTdGVwID0gJ2NhbXBhaWduLXNldHVwJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbnRlbnRQcmV2aWV3ID0gc2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50IFxuICAgICAgICAgID8gYCR7c2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50LnN1YnN0cmluZygwLCAyMDApfSR7c2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50Lmxlbmd0aCA+IDIwMCA/ICcuLi4nIDogJyd9YFxuICAgICAgICAgIDogJ0NvbnRlbnQgbG9hZGVkIHN1Y2Nlc3NmdWxseSc7XG4gICAgICAgICAgICBcbiAgICAgICAgcmV0dXJuIGBJbnN0cnVjdGlvbnMgTG9hZGVkOiAke3Nlc3Npb24uaW5zdHJ1Y3Rpb25zRmlsZX1cXG5cXG5JbnN0cnVjdGlvbnMgQ29udGVudCBQcmV2aWV3OlxcbiR7Y29udGVudFByZXZpZXd9XFxuXFxuU3RlcCAyOiBDYW1wYWlnbiBDb25maWd1cmF0aW9uXFxuXFxuTm93IGxldCBtZSBzZXQgdXAgeW91ciBjYW1wYWlnbiBwYXJhbWV0ZXJzIGJhc2VkIG9uIHlvdXIgaW5zdHJ1Y3Rpb25zLiBQbGVhc2UgcHJvdmlkZSB0aGUgZm9sbG93aW5nIGluZm9ybWF0aW9uOlxcblxcbjEuIENhbXBhaWduIE5hbWVcXG4yLiBDYW1wYWlnbiBEdXJhdGlvbiAoaW4gd2Vla3MpXFxuMy4gVGFyZ2V0IFBsYXRmb3JtcyAodHdpdHRlciwgbGlua2VkaW4sIGZhY2Vib29rLCBpbnN0YWdyYW0pXFxuNC4gUG9zdHMgcGVyIGRheVxcbjUuIENhbXBhaWduIEdvYWxzXFxuXFxuVHlwZSB5b3VyIGNhbXBhaWduIGRldGFpbHMgb3Igc2F5IFwiZ2VuZXJhdGUgZGVmYXVsdCBjYW1wYWlnblwiIHRvIHVzZSBzdGFuZGFyZCBzZXR0aW5ncy5gO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTdGVwIDE6IFJlcXVlc3QgaW5zdHJ1Y3Rpb25zIGZpbGVcbiAgICBpZiAoc2Vzc2lvbi5jdXJyZW50U3RlcCA9PT0gJ2luc3RydWN0aW9ucycgJiYgIXNlc3Npb24uaW5zdHJ1Y3Rpb25zRmlsZSkge1xuICAgICAgaWYgKGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKSB7XG4gICAgICAgIGF3YWl0IGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKHtcbiAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICBjb250ZW50OiAnQ2FtcGFpZ24gRGlyZWN0b3IgQWdlbnRcXG5cXG5JIHdpbGwgaGVscCB5b3Ugb3JjaGVzdHJhdGUgYSBjb21wcmVoZW5zaXZlIG1hcmtldGluZyBjYW1wYWlnbiB3aXRoIDEwMCsgcG9zdHMgYWNyb3NzIG11bHRpcGxlIHBsYXRmb3Jtcy5cXG5cXG5TdGVwIDE6IFNlbGVjdCBJbnN0cnVjdGlvbnMgRmlsZVxcblxcbkZpcnN0LCBJIG5lZWQgdG8gdW5kZXJzdGFuZCB5b3VyIGNhbXBhaWduIHN0cmF0ZWd5LiBQbGVhc2Ugc2VsZWN0IGFuIGluc3RydWN0aW9ucyBmaWxlIHRoYXQgY29udGFpbnMgeW91ciBjYW1wYWlnbiBndWlkZWxpbmVzLCBicmFuZCB2b2ljZSwgb3IgbWFya2V0aW5nIHN0cmF0ZWd5LlxcblxcbldoYXQgeW91IGNhbiBpbmNsdWRlIGluIHlvdXIgaW5zdHJ1Y3Rpb25zIGZpbGU6XFxuLSBCcmFuZCB2b2ljZSBhbmQgdG9uZSBndWlkZWxpbmVzXFxuLSBUYXJnZXQgYXVkaWVuY2UgaW5mb3JtYXRpb25cXG4tIENhbXBhaWduIG9iamVjdGl2ZXMgYW5kIEtQSXNcXG4tIENvbnRlbnQgdGhlbWVzIGFuZCBtZXNzYWdpbmdcXG4tIFBsYXRmb3JtLXNwZWNpZmljIHJlcXVpcmVtZW50c1xcbi0gSGFzaHRhZyBzdHJhdGVnaWVzXFxuLSBWaXN1YWwgZ3VpZGVsaW5lc1xcblxcblNlbGVjdCB5b3VyIGluc3RydWN0aW9ucyBmaWxlOicsXG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgIGludGVyYWN0aXZlQ29tcG9uZW50OiB7XG4gICAgICAgICAgICB0eXBlOiAnZmlsZV9zZWxlY3RvcicsXG4gICAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgZmlsZVR5cGU6ICdpbnN0cnVjdGlvbnMnLFxuICAgICAgICAgICAgICBmaWx0ZXJCeUV4dGVuc2lvbjogWycubWQnLCAnLnR4dCddLFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1NlbGVjdCBjYW1wYWlnbiBpbnN0cnVjdGlvbnMgZmlsZS4uLidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdQbGVhc2Ugc2VsZWN0IGFuIGluc3RydWN0aW9ucyBmaWxlIHRvIGdldCBzdGFydGVkIHdpdGggeW91ciBjYW1wYWlnbi4nO1xuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgZmlsZSBzZWxlY3Rpb24gaW5wdXRcbiAgICBpZiAoaW5wdXQuaW5jbHVkZXMoJ1NlbGVjdGVkIGZpbGU6JykgJiYgc2Vzc2lvbi5jdXJyZW50U3RlcCA9PT0gJ2luc3RydWN0aW9ucycpIHtcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gaW5wdXQucmVwbGFjZSgnU2VsZWN0ZWQgZmlsZTonLCAnJykudHJpbSgpO1xuICAgICAgc2Vzc2lvbi5pbnN0cnVjdGlvbnNGaWxlID0gZmlsZU5hbWU7XG4gICAgICBcbiAgICAgIC8vIEZldGNoIHRoZSBmaWxlIGNvbnRlbnRcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgY29udmV4TXV0YXRpb25zLmdldEFsbEZpbGVzPy4oKSB8fCBbXTtcbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25GaWxlID0gZmlsZXMuZmluZCgoZjogYW55KSA9PiBmLm5hbWUgPT09IGZpbGVOYW1lKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpbnN0cnVjdGlvbkZpbGUpIHtcbiAgICAgICAgICBzZXNzaW9uLmluc3RydWN0aW9uc0NvbnRlbnQgPSBpbnN0cnVjdGlvbkZpbGUuY29udGVudDtcbiAgICAgICAgICBzZXNzaW9uLmN1cnJlbnRTdGVwID0gJ2NhbXBhaWduLXNldHVwJztcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBjb250ZW50UHJldmlldyA9IHNlc3Npb24uaW5zdHJ1Y3Rpb25zQ29udGVudCBcbiAgICAgICAgICAgID8gYCR7c2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50LnN1YnN0cmluZygwLCAyMDApfSR7c2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50Lmxlbmd0aCA+IDIwMCA/ICcuLi4nIDogJyd9YFxuICAgICAgICAgICAgOiAnQ29udGVudCBsb2FkZWQgc3VjY2Vzc2Z1bGx5JztcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIGBJbnN0cnVjdGlvbnMgTG9hZGVkOiAke2ZpbGVOYW1lfVxcblxcbkluc3RydWN0aW9ucyBDb250ZW50IFByZXZpZXc6XFxuJHtjb250ZW50UHJldmlld31cXG5cXG5TdGVwIDI6IENhbXBhaWduIENvbmZpZ3VyYXRpb25cXG5cXG5Ob3cgbGV0IG1lIHNldCB1cCB5b3VyIGNhbXBhaWduIHBhcmFtZXRlcnMgYmFzZWQgb24geW91ciBpbnN0cnVjdGlvbnMuIFBsZWFzZSBwcm92aWRlIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb246XFxuXFxuMS4gQ2FtcGFpZ24gTmFtZVxcbjIuIENhbXBhaWduIER1cmF0aW9uIChpbiB3ZWVrcylcXG4zLiBUYXJnZXQgUGxhdGZvcm1zICh0d2l0dGVyLCBsaW5rZWRpbiwgZmFjZWJvb2ssIGluc3RhZ3JhbSlcXG40LiBQb3N0cyBwZXIgZGF5XFxuNS4gQ2FtcGFpZ24gR29hbHNcXG5cXG5UeXBlIHlvdXIgY2FtcGFpZ24gZGV0YWlscyBvciBzYXkgXCJnZW5lcmF0ZSBkZWZhdWx0IGNhbXBhaWduXCIgdG8gdXNlIHN0YW5kYXJkIHNldHRpbmdzLmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGBGaWxlIFwiJHtmaWxlTmFtZX1cIiBub3QgZm91bmQuIFBsZWFzZSBzZWxlY3QgYSB2YWxpZCBpbnN0cnVjdGlvbnMgZmlsZS5gO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGluc3RydWN0aW9ucyBmaWxlOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuICdFcnJvciBsb2FkaW5nIGluc3RydWN0aW9ucyBmaWxlLiBQbGVhc2UgdHJ5IGFnYWluLic7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBjYW1wYWlnbiBjb25maWd1cmF0aW9uXG4gICAgaWYgKHNlc3Npb24uY3VycmVudFN0ZXAgPT09ICdjYW1wYWlnbi1zZXR1cCcpIHtcbiAgICAgIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdnZW5lcmF0ZSBkZWZhdWx0IGNhbXBhaWduJykgfHwgaW5wdXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZGVmYXVsdCcpKSB7XG4gICAgICAgIC8vIFVzZSBkZWZhdWx0IGNhbXBhaWduIHNldHRpbmdzXG4gICAgICAgIHNlc3Npb24uY2FtcGFpZ25OYW1lID0gJ0VBQyBNYXJrZXRpbmcgQ2FtcGFpZ24nO1xuICAgICAgICBzZXNzaW9uLmR1cmF0aW9uID0gNDsgLy8gd2Vla3NcbiAgICAgICAgc2Vzc2lvbi5wbGF0Zm9ybXMgPSBbJ3R3aXR0ZXInLCAnbGlua2VkaW4nLCAnaW5zdGFncmFtJywgJ2ZhY2Vib29rJ107XG4gICAgICAgIHNlc3Npb24ucG9zdHNQZXJEYXkgPSAzO1xuICAgICAgICBzZXNzaW9uLmNhbXBhaWduR29hbHMgPSAnQnJhbmQgYXdhcmVuZXNzIGFuZCBsZWFkIGdlbmVyYXRpb24nO1xuICAgICAgICBzZXNzaW9uLmN1cnJlbnRTdGVwID0gJ2dlbmVyYXRpbmcnO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2VuZXJhdGVDYW1wYWlnbihzZXNzaW9uLCBjb252ZXhNdXRhdGlvbnMsIHNlc3Npb25JZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQYXJzZSBjdXN0b20gY2FtcGFpZ24gc2V0dGluZ3MgZnJvbSB1c2VyIGlucHV0XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlQ2FtcGFpZ25TZXR0aW5ncyhpbnB1dCwgc2Vzc2lvbik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhhbmRsZSBiYXRjaCBnZW5lcmF0aW9uIHN0YXR1cyB1cGRhdGVzXG4gICAgaWYgKGlucHV0LmluY2x1ZGVzKCdiYXRjaCBjb21wbGV0ZWQnKSB8fCBpbnB1dC5pbmNsdWRlcygncG9zdHMgZ2VuZXJhdGVkJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZUJhdGNoQ29tcGxldGlvbihpbnB1dCwgc2Vzc2lvbik7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiAnQ2FtcGFpZ24gb3JjaGVzdHJhdGlvbiBpbiBwcm9ncmVzcy4gVXNlIC9kaXJlY3RvciB0byBzdGFydCBhIG5ldyBjYW1wYWlnbi4nO1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZUNhbXBhaWduU2V0dGluZ3MoaW5wdXQ6IHN0cmluZywgc2Vzc2lvbjogRGlyZWN0b3JTZXNzaW9uKTogc3RyaW5nIHtcbiAgICAvLyBFeHRyYWN0IGNhbXBhaWduIHNldHRpbmdzIGZyb20gdXNlciBpbnB1dFxuICAgIGNvbnN0IGxpbmVzID0gaW5wdXQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbSgpKS5maWx0ZXIobGluZSA9PiBsaW5lLmxlbmd0aCA+IDApO1xuICAgIFxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgY29uc3QgbG93ZXIgPSBsaW5lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ25hbWU6JykgfHwgbG93ZXIuc3RhcnRzV2l0aCgnMS4nKSkge1xuICAgICAgICBzZXNzaW9uLmNhbXBhaWduTmFtZSA9IGxpbmUuc3BsaXQoJzonKVsxXT8udHJpbSgpIHx8IGxpbmUucmVwbGFjZSgvXjFcXC4vLCAnJykudHJpbSgpO1xuICAgICAgfSBlbHNlIGlmIChsb3dlci5pbmNsdWRlcygnZHVyYXRpb246JykgfHwgbG93ZXIuaW5jbHVkZXMoJ3dlZWtzJykgfHwgbG93ZXIuc3RhcnRzV2l0aCgnMi4nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goLyhcXGQrKS8pO1xuICAgICAgICBpZiAobWF0Y2gpIHNlc3Npb24uZHVyYXRpb24gPSBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICB9IGVsc2UgaWYgKGxvd2VyLmluY2x1ZGVzKCdwbGF0Zm9ybScpIHx8IGxvd2VyLnN0YXJ0c1dpdGgoJzMuJykpIHtcbiAgICAgICAgY29uc3QgcGxhdGZvcm1zID0gbGluZS50b0xvd2VyQ2FzZSgpLm1hdGNoKC8odHdpdHRlcnxsaW5rZWRpbnxmYWNlYm9va3xpbnN0YWdyYW0pL2cpO1xuICAgICAgICBpZiAocGxhdGZvcm1zKSBzZXNzaW9uLnBsYXRmb3JtcyA9IHBsYXRmb3JtcztcbiAgICAgIH0gZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ3Bvc3RzIHBlciBkYXknKSB8fCBsb3dlci5zdGFydHNXaXRoKCc0LicpKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvKFxcZCspLyk7XG4gICAgICAgIGlmIChtYXRjaCkgc2Vzc2lvbi5wb3N0c1BlckRheSA9IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgIH0gZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ2dvYWxzOicpIHx8IGxvd2VyLnN0YXJ0c1dpdGgoJzUuJykpIHtcbiAgICAgICAgc2Vzc2lvbi5jYW1wYWlnbkdvYWxzID0gbGluZS5zcGxpdCgnOicpWzFdPy50cmltKCkgfHwgbGluZS5yZXBsYWNlKC9eNVxcLi8sICcnKS50cmltKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmICghc2Vzc2lvbi5jYW1wYWlnbk5hbWUgfHwgIXNlc3Npb24uZHVyYXRpb24gfHwgIXNlc3Npb24ucGxhdGZvcm1zPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAnUGxlYXNlIHByb3ZpZGUgYWxsIHJlcXVpcmVkIGNhbXBhaWduIGRldGFpbHM6XFxuXFxuMS4gQ2FtcGFpZ24gTmFtZVxcbjIuIER1cmF0aW9uICh3ZWVrcylcXG4zLiBQbGF0Zm9ybXNcXG40LiBQb3N0cyBwZXIgZGF5XFxuNS4gR29hbHNcXG5cXG5PciB0eXBlIFwiZ2VuZXJhdGUgZGVmYXVsdCBjYW1wYWlnblwiIHRvIHVzZSBzdGFuZGFyZCBzZXR0aW5ncy4nO1xuICAgIH1cbiAgICBcbiAgICBzZXNzaW9uLmN1cnJlbnRTdGVwID0gJ2dlbmVyYXRpbmcnO1xuICAgIHJldHVybiBgQ2FtcGFpZ24gQ29uZmlndXJhdGlvbiBTZXQ6XFxuXFxuTmFtZTogJHtzZXNzaW9uLmNhbXBhaWduTmFtZX1cXG5EdXJhdGlvbjogJHtzZXNzaW9uLmR1cmF0aW9ufSB3ZWVrc1xcblBsYXRmb3JtczogJHtzZXNzaW9uLnBsYXRmb3Jtcy5qb2luKCcsICcpfVxcblBvc3RzIHBlciBkYXk6ICR7c2Vzc2lvbi5wb3N0c1BlckRheX1cXG5Hb2FsczogJHtzZXNzaW9uLmNhbXBhaWduR29hbHN9XFxuXFxuR2VuZXJhdGluZyB5b3VyIGNvbXByZWhlbnNpdmUgY2FtcGFpZ24uLi5gO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUNhbXBhaWduKHNlc3Npb246IERpcmVjdG9yU2Vzc2lvbiwgY29udmV4TXV0YXRpb25zOiBDb252ZXhNdXRhdGlvbnMsIHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIHBvc3RzIG5lZWRlZFxuICAgICAgY29uc3QgdG90YWxEYXlzID0gKHNlc3Npb24uZHVyYXRpb24gfHwgNCkgKiA3O1xuICAgICAgY29uc3QgcG9zdHNQZXJEYXkgPSBzZXNzaW9uLnBvc3RzUGVyRGF5IHx8IDM7XG4gICAgICBjb25zdCB0b3RhbFBvc3RzID0gdG90YWxEYXlzICogcG9zdHNQZXJEYXk7XG4gICAgICBjb25zdCBwbGF0Zm9ybXMgPSBzZXNzaW9uLnBsYXRmb3JtcyB8fCBbJ3R3aXR0ZXInLCAnbGlua2VkaW4nLCAnaW5zdGFncmFtJywgJ2ZhY2Vib29rJ107XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBjYW1wYWlnbiBpbiBkYXRhYmFzZVxuICAgICAgbGV0IGNhbXBhaWduSWQ6IHN0cmluZztcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNhbXBhaWduID0gYXdhaXQgY29udmV4TXV0YXRpb25zLmNyZWF0ZUNhbXBhaWduPy4oe1xuICAgICAgICAgIG5hbWU6IHNlc3Npb24uY2FtcGFpZ25OYW1lIHx8ICdHZW5lcmF0ZWQgQ2FtcGFpZ24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgQXV0by1nZW5lcmF0ZWQgY2FtcGFpZ246ICR7c2Vzc2lvbi5jYW1wYWlnbkdvYWxzIHx8ICdNYXJrZXRpbmcgY2FtcGFpZ24nfWAsXG4gICAgICAgICAgcGxhdGZvcm1zLFxuICAgICAgICAgIHRvdGFsUG9zdHMsXG4gICAgICAgICAgZHVyYXRpb246IHNlc3Npb24uZHVyYXRpb24gfHwgNCxcbiAgICAgICAgICBpbnN0cnVjdGlvbnNDb250ZW50OiBzZXNzaW9uLmluc3RydWN0aW9uc0NvbnRlbnQgfHwgJycsXG4gICAgICAgICAgc3RhdHVzOiAnZ2VuZXJhdGluZydcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbXBhaWduSWQgPSBjYW1wYWlnbj8uX2lkIHx8IGBjYW1wYWlnbl8ke0RhdGUubm93KCl9YDtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDYW1wYWlnbiBjcmVhdGlvbiBub3QgYXZhaWxhYmxlLCB1c2luZyBmYWxsYmFjayBJRCcpO1xuICAgICAgICBjYW1wYWlnbklkID0gYGNhbXBhaWduXyR7RGF0ZS5ub3coKX1gO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBwb3N0cyBpbiBiYXRjaGVzXG4gICAgICBjb25zdCBhbGxQb3N0cyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVCYXRjaGVzQXN5bmMoXG4gICAgICAgIHRvdGFsUG9zdHMsXG4gICAgICAgIHBsYXRmb3JtcyxcbiAgICAgICAgc2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50IHx8ICcnLFxuICAgICAgICBjYW1wYWlnbklkLFxuICAgICAgICBzZXNzaW9uLmR1cmF0aW9uIHx8IDRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBiYXRjaGVzIGZvciBwcm9jZXNzaW5nXG4gICAgICBjb25zdCBiYXRjaGVzID0gdGhpcy5jcmVhdGVCYXRjaGVzKGFsbFBvc3RzLCBjYW1wYWlnbklkKTtcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgYmF0Y2hlcyBpbiBzZXNzaW9uXG4gICAgICBiYXRjaGVzLmZvckVhY2goYmF0Y2ggPT4ge1xuICAgICAgICBzZXNzaW9uLmFjdGl2ZUNhbXBhaWducy5zZXQoYmF0Y2guY2FtcGFpZ25JZCwgYmF0Y2gpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3MgZmlyc3QgYmF0Y2hcbiAgICAgIGlmIChiYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzQmF0Y2goYmF0Y2hlc1swXSwgY29udmV4TXV0YXRpb25zLCBzZXNzaW9uSWQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBzZXNzaW9uLmN1cnJlbnRTdGVwID0gJ3NjaGVkdWxpbmcnO1xuICAgICAgXG4gICAgICByZXR1cm4gYENhbXBhaWduIEdlbmVyYXRpb24gQ29tcGxldGUhXFxuXFxuR2VuZXJhdGVkICR7dG90YWxQb3N0c30gcG9zdHMgYWNyb3NzICR7cGxhdGZvcm1zLmxlbmd0aH0gcGxhdGZvcm1zXFxuT3JnYW5pemVkIGludG8gJHtiYXRjaGVzLmxlbmd0aH0gcHJvY2Vzc2luZyBiYXRjaGVzXFxuU3RhcnRpbmcgY29udGVudCBjcmVhdGlvbiBhbmQgc2NoZWR1bGluZy4uLlxcblxcbkNhbXBhaWduIElEOiAke2NhbXBhaWduSWR9XFxuVG90YWwgUG9zdHM6ICR7dG90YWxQb3N0c31cXG5QbGF0Zm9ybXM6ICR7cGxhdGZvcm1zLmpvaW4oJywgJyl9XFxuRHVyYXRpb246ICR7c2Vzc2lvbi5kdXJhdGlvbn0gd2Vla3NgO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhbXBhaWduIGdlbmVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGBFcnJvciBnZW5lcmF0aW5nIGNhbXBhaWduOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUJhdGNoZXNBc3luYyhcbiAgICB0b3RhbFBvc3RzOiBudW1iZXIsXG4gICAgcGxhdGZvcm1zOiBzdHJpbmdbXSxcbiAgICBpbnN0cnVjdGlvbnM6IHN0cmluZyxcbiAgICBjYW1wYWlnbklkOiBzdHJpbmcsXG4gICAgZHVyYXRpb246IG51bWJlclxuICApOiBQcm9taXNlPENhbXBhaWduUG9zdFtdPiB7XG4gICAgY29uc3QgcG9zdHM6IENhbXBhaWduUG9zdFtdID0gW107XG4gICAgXG4gICAgY29uc3QgZGF5cyA9IFsnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheScsICdTdW5kYXknXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsUG9zdHM7IGkrKykge1xuICAgICAgY29uc3QgcGxhdGZvcm0gPSBwbGF0Zm9ybXNbaSAlIHBsYXRmb3Jtcy5sZW5ndGhdIGFzIGFueTtcbiAgICAgIGNvbnN0IHdlZWsgPSBNYXRoLmZsb29yKGkgLyAodG90YWxQb3N0cyAvIGR1cmF0aW9uKSkgKyAxO1xuICAgICAgY29uc3QgZGF5SW5kZXggPSBpICUgNztcbiAgICAgIGNvbnN0IGRheSA9IGRheXNbZGF5SW5kZXhdO1xuICAgICAgXG4gICAgICAvLyBEZXRlcm1pbmUgb3B0aW1hbCBwb3N0aW5nIHRpbWUgYmFzZWQgb24gcGxhdGZvcm1cbiAgICAgIGNvbnN0IHRpbWUgPSB0aGlzLmdldE9wdGltYWxQb3N0VGltZShwbGF0Zm9ybSwgZGF5SW5kZXgpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgcG9zdCBkYXRlXG4gICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgcG9zdERhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xuICAgICAgcG9zdERhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpICsgTWF0aC5mbG9vcihpIC8gcGxhdGZvcm1zLmxlbmd0aCkpO1xuICAgICAgXG4gICAgICAvLyBEZXRlcm1pbmUgY2FtcGFpZ24gcGhhc2UgYmFzZWQgb24gd2Vla1xuICAgICAgY29uc3QgcGhhc2VzID0gWydhd2FyZW5lc3MnLCAnY29uc2lkZXJhdGlvbicsICdjb252ZXJzaW9uJywgJ3JldGVudGlvbiddIGFzIGNvbnN0O1xuICAgICAgY29uc3QgcGhhc2VJbmRleCA9IE1hdGguZmxvb3IoKHdlZWsgLSAxKSAvIChkdXJhdGlvbiAvIHBoYXNlcy5sZW5ndGgpKTtcbiAgICAgIGNvbnN0IHBoYXNlID0gcGhhc2VzW01hdGgubWluKHBoYXNlSW5kZXgsIHBoYXNlcy5sZW5ndGggLSAxKV07XG4gICAgICBcbiAgICAgIC8vIERldGVybWluZSBjb250ZW50IHR5cGUgY3ljbGljYWxseVxuICAgICAgY29uc3QgY29udGVudFR5cGVzID0gWydlZHVjYXRpb25hbCcsICdwcm9tb3Rpb25hbCcsICdlbmdhZ2VtZW50JywgJ2Fubm91bmNlbWVudCddIGFzIGNvbnN0O1xuICAgICAgY29uc3QgY29udGVudFR5cGUgPSBjb250ZW50VHlwZXNbaSAlIGNvbnRlbnRUeXBlcy5sZW5ndGhdO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBjb250ZW50XG4gICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5nZW5lcmF0ZVBsYXRmb3JtQ29udGVudChwbGF0Zm9ybSwgcGhhc2UsIGNvbnRlbnRUeXBlLCBpbnN0cnVjdGlvbnMsIHdlZWssIGRheSk7XG4gICAgICBcbiAgICAgIHBvc3RzLnB1c2goe1xuICAgICAgICBwbGF0Zm9ybSxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgc2NoZWR1bGVkRGF0ZTogcG9zdERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICBzY2hlZHVsZWRUaW1lOiB0aW1lLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHdlZWssXG4gICAgICAgICAgZGF5T2ZXZWVrOiBkYXksXG4gICAgICAgICAgY2FtcGFpZ25QaGFzZTogcGhhc2UsXG4gICAgICAgICAgY29udGVudFR5cGUsXG4gICAgICAgICAgaGFzaHRhZ3M6IHRoaXMuZ2VuZXJhdGVIYXNodGFncyhwbGF0Zm9ybSwgcGhhc2UsIGNvbnRlbnRUeXBlKSxcbiAgICAgICAgICBjYW1wYWlnbklkLFxuICAgICAgICAgIGJhdGNoSWQ6IGBiYXRjaF8ke01hdGguZmxvb3IoaSAvIHRoaXMuQkFUQ0hfU0laRSl9YFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHBvc3RzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRPcHRpbWFsUG9zdFRpbWUocGxhdGZvcm06IHN0cmluZywgZGF5SW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgdGltZXMgPSB7XG4gICAgICB0d2l0dGVyOiBbJzA5OjAwJywgJzEyOjAwJywgJzE1OjAwJywgJzE4OjAwJ10sXG4gICAgICBsaW5rZWRpbjogWycwODowMCcsICcxMjowMCcsICcxNzowMCddLFxuICAgICAgaW5zdGFncmFtOiBbJzExOjAwJywgJzE0OjAwJywgJzE3OjAwJywgJzE5OjAwJ10sXG4gICAgICBmYWNlYm9vazogWycwOTowMCcsICcxMzowMCcsICcxNTowMCddXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBwbGF0Zm9ybVRpbWVzID0gdGltZXNbcGxhdGZvcm0gYXMga2V5b2YgdHlwZW9mIHRpbWVzXSB8fCB0aW1lcy50d2l0dGVyO1xuICAgIHJldHVybiBwbGF0Zm9ybVRpbWVzW2RheUluZGV4ICUgcGxhdGZvcm1UaW1lcy5sZW5ndGhdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBsYXRmb3JtQ29udGVudChwbGF0Zm9ybTogc3RyaW5nLCBwaGFzZTogc3RyaW5nLCBjb250ZW50VHlwZTogc3RyaW5nLCBpbnN0cnVjdGlvbnM6IHN0cmluZywgd2VlazogbnVtYmVyLCBkYXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnJhbmRWb2ljZSA9IHRoaXMuZXh0cmFjdEJyYW5kVm9pY2UoaW5zdHJ1Y3Rpb25zKTtcbiAgICBjb25zdCBhdWRpZW5jZSA9IHRoaXMuZXh0cmFjdEF1ZGllbmNlKGluc3RydWN0aW9ucyk7XG4gICAgXG4gICAgY29uc3QgY29udGVudCA9IGAke2JyYW5kVm9pY2V9IGNvbnRlbnQgZm9yICR7YXVkaWVuY2V9IC0gV2VlayAke3dlZWt9LCAke2RheX0uIFBoYXNlOiAke3BoYXNlfSwgVHlwZTogJHtjb250ZW50VHlwZX0uIFBsYXRmb3JtOiAke3BsYXRmb3JtfWA7XG4gICAgXG4gICAgLy8gUGxhdGZvcm0tc3BlY2lmaWMgZm9ybWF0dGluZ1xuICAgIHN3aXRjaCAocGxhdGZvcm0pIHtcbiAgICAgIGNhc2UgJ3R3aXR0ZXInOlxuICAgICAgICByZXR1cm4gY29udGVudC5sZW5ndGggPiAyNTAgPyBjb250ZW50LnN1YnN0cmluZygwLCAyNDcpICsgJy4uLicgOiBjb250ZW50O1xuICAgICAgY2FzZSAnbGlua2VkaW4nOlxuICAgICAgICByZXR1cm4gYCR7Y29udGVudH1cXG5cXG4jTGlua2VkSW5FbmdhZ2VtZW50ICNQcm9mZXNzaW9uYWxHcm93dGhgO1xuICAgICAgY2FzZSAnaW5zdGFncmFtJzpcbiAgICAgICAgcmV0dXJuIGAke2NvbnRlbnR9IOKcqFxcblxcbiNJbnN0YWdyYW1CdXNpbmVzcyAjVmlzdWFsQ29udGVudGA7XG4gICAgICBjYXNlICdmYWNlYm9vayc6XG4gICAgICAgIHJldHVybiBgJHtjb250ZW50fVxcblxcbldoYXQgZG8geW91IHRoaW5rPyBTaGFyZSB5b3VyIHRob3VnaHRzIGJlbG93ISDwn5GHYDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdEJyYW5kVm9pY2UoaW5zdHJ1Y3Rpb25zOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHZvaWNlS2V5d29yZHMgPSBbJ3Byb2Zlc3Npb25hbCcsICdmcmllbmRseScsICdpbm5vdmF0aXZlJywgJ3RydXN0ZWQnLCAnZXhwZXJ0JywgJ3JlbGlhYmxlJ107XG4gICAgY29uc3QgbG93ZXJJbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbnMudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGtleXdvcmQgb2Ygdm9pY2VLZXl3b3Jkcykge1xuICAgICAgaWYgKGxvd2VySW5zdHJ1Y3Rpb25zLmluY2x1ZGVzKGtleXdvcmQpKSB7XG4gICAgICAgIHJldHVybiBrZXl3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5d29yZC5zbGljZSgxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICdQcm9mZXNzaW9uYWwnO1xuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0QXVkaWVuY2UoaW5zdHJ1Y3Rpb25zOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGF1ZGllbmNlS2V5d29yZHMgPSBbJ2J1c2luZXNzZXMnLCAncHJvZmVzc2lvbmFscycsICd0ZWFtcycsICdjb21wYW5pZXMnLCAnb3JnYW5pemF0aW9ucycsICd1c2VycyddO1xuICAgIGNvbnN0IGxvd2VySW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBrZXl3b3JkIG9mIGF1ZGllbmNlS2V5d29yZHMpIHtcbiAgICAgIGlmIChsb3dlckluc3RydWN0aW9ucy5pbmNsdWRlcyhrZXl3b3JkKSkge1xuICAgICAgICByZXR1cm4ga2V5d29yZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICdwcm9mZXNzaW9uYWxzJztcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVIYXNodGFncyhwbGF0Zm9ybTogc3RyaW5nLCBwaGFzZTogc3RyaW5nLCBjb250ZW50VHlwZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGJhc2VIYXNodGFncyA9IFsnbWFya2V0aW5nJywgJ2J1c2luZXNzJywgJ2dyb3d0aCddO1xuICAgIGNvbnN0IHBoYXNlSGFzaHRhZ3MgPSB7XG4gICAgICBhd2FyZW5lc3M6IFsnYnJhbmRhd2FyZW5lc3MnLCAnaW50cm9kdWN0aW9uJ10sXG4gICAgICBjb25zaWRlcmF0aW9uOiBbJ3NvbHV0aW9ucycsICdldmFsdWF0aW9uJ10sXG4gICAgICBjb252ZXJzaW9uOiBbJ2dldHN0YXJ0ZWQnLCAnYWN0aW9uJ10sXG4gICAgICByZXRlbnRpb246IFsnY29tbXVuaXR5JywgJ3N1Y2Nlc3MnXVxuICAgIH07XG4gICAgY29uc3QgY29udGVudEhhc2h0YWdzID0ge1xuICAgICAgZWR1Y2F0aW9uYWw6IFsndGlwcycsICdsZWFybmluZyddLFxuICAgICAgcHJvbW90aW9uYWw6IFsnb2ZmZXInLCAnZmVhdHVyZWQnXSxcbiAgICAgIGVuZ2FnZW1lbnQ6IFsnZGlzY3Vzc2lvbicsICdxdWVzdGlvbiddLFxuICAgICAgYW5ub3VuY2VtZW50OiBbJ25ld3MnLCAndXBkYXRlJ11cbiAgICB9O1xuICAgIFxuICAgIHJldHVybiBbXG4gICAgICAuLi5iYXNlSGFzaHRhZ3MsXG4gICAgICAuLi5waGFzZUhhc2h0YWdzW3BoYXNlIGFzIGtleW9mIHR5cGVvZiBwaGFzZUhhc2h0YWdzXSxcbiAgICAgIC4uLmNvbnRlbnRIYXNodGFnc1tjb250ZW50VHlwZSBhcyBrZXlvZiB0eXBlb2YgY29udGVudEhhc2h0YWdzXVxuICAgIF0uc2xpY2UoMCwgNSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUJhdGNoZXMocG9zdHM6IENhbXBhaWduUG9zdFtdLCBjYW1wYWlnbklkOiBzdHJpbmcpOiBDYW1wYWlnbkJhdGNoW10ge1xuICAgIGNvbnN0IGJhdGNoZXM6IENhbXBhaWduQmF0Y2hbXSA9IFtdO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zdHMubGVuZ3RoOyBpICs9IHRoaXMuQkFUQ0hfU0laRSkge1xuICAgICAgY29uc3QgYmF0Y2hQb3N0cyA9IHBvc3RzLnNsaWNlKGksIGkgKyB0aGlzLkJBVENIX1NJWkUpO1xuICAgICAgYmF0Y2hlcy5wdXNoKHtcbiAgICAgICAgY2FtcGFpZ25JZDogYCR7Y2FtcGFpZ25JZH1fYmF0Y2hfJHtiYXRjaGVzLmxlbmd0aH1gLFxuICAgICAgICBwb3N0czogYmF0Y2hQb3N0cyxcbiAgICAgICAgcHJvY2Vzc2luZ1N0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICBwcm9jZXNzZWRDb3VudDogMCxcbiAgICAgICAgdG90YWxDb3VudDogYmF0Y2hQb3N0cy5sZW5ndGhcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYmF0Y2hlcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc0JhdGNoKGJhdGNoOiBDYW1wYWlnbkJhdGNoLCBjb252ZXhNdXRhdGlvbnM6IENvbnZleE11dGF0aW9ucywgc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBiYXRjaC5wcm9jZXNzaW5nU3RhdHVzID0gJ3Byb2Nlc3NpbmcnO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwb3N0UHJvbWlzZXMgPSBiYXRjaC5wb3N0cy5tYXAoYXN5bmMgKHBvc3QpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBjb252ZXhNdXRhdGlvbnMudXBzZXJ0UG9zdCh7XG4gICAgICAgICAgICBmaWxlTmFtZTogYCR7cG9zdC5wbGF0Zm9ybX1fJHtwb3N0Lm1ldGFkYXRhLndlZWt9XyR7cG9zdC5tZXRhZGF0YS5kYXlPZldlZWt9XyR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgZmlsZVR5cGU6IHBvc3QucGxhdGZvcm0gYXMgYW55LFxuICAgICAgICAgICAgY29udGVudDogcG9zdC5jb250ZW50LFxuICAgICAgICAgICAgdGl0bGU6IGBXZWVrICR7cG9zdC5tZXRhZGF0YS53ZWVrfSAtICR7cG9zdC5tZXRhZGF0YS5jYW1wYWlnblBoYXNlfWAsXG4gICAgICAgICAgICBwbGF0Zm9ybURhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgc2NoZWR1bGVkRGF0ZTogcG9zdC5zY2hlZHVsZWREYXRlLFxuICAgICAgICAgICAgICBzY2hlZHVsZWRUaW1lOiBwb3N0LnNjaGVkdWxlZFRpbWUsXG4gICAgICAgICAgICAgIGhhc2h0YWdzOiBwb3N0Lm1ldGFkYXRhLmhhc2h0YWdzLFxuICAgICAgICAgICAgICBjYW1wYWlnbklkOiBwb3N0Lm1ldGFkYXRhLmNhbXBhaWduSWQsXG4gICAgICAgICAgICAgIGJhdGNoSWQ6IHBvc3QubWV0YWRhdGEuYmF0Y2hJZFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdGF0dXM6ICdzY2hlZHVsZWQnLFxuICAgICAgICAgICAgc2NoZWR1bGVkRm9yOiBuZXcgRGF0ZShgJHtwb3N0LnNjaGVkdWxlZERhdGV9VCR7cG9zdC5zY2hlZHVsZWRUaW1lfWApLmdldFRpbWUoKSxcbiAgICAgICAgICAgIGFnZW50VHlwZTogJ2RpcmVjdG9yJyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiBKU09OLnN0cmluZ2lmeShwb3N0Lm1ldGFkYXRhKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGJhdGNoLnByb2Nlc3NlZENvdW50Kys7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHBvc3RQcm9taXNlcyk7XG4gICAgICBiYXRjaC5wcm9jZXNzaW5nU3RhdHVzID0gJ2NvbXBsZXRlZCc7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQmF0Y2ggcHJvY2Vzc2luZyBlcnJvcjonLCBlcnJvcik7XG4gICAgICBiYXRjaC5wcm9jZXNzaW5nU3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCYXRjaENvbXBsZXRpb24oaW5wdXQ6IHN0cmluZywgc2Vzc2lvbjogRGlyZWN0b3JTZXNzaW9uKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb21wbGV0ZWRCYXRjaGVzID0gQXJyYXkuZnJvbShzZXNzaW9uLmFjdGl2ZUNhbXBhaWducy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoYmF0Y2ggPT4gYmF0Y2gucHJvY2Vzc2luZ1N0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpO1xuICAgIFxuICAgIGNvbnN0IHRvdGFsQmF0Y2hlcyA9IHNlc3Npb24uYWN0aXZlQ2FtcGFpZ25zLnNpemU7XG4gICAgY29uc3QgdG90YWxQcm9jZXNzZWQgPSBjb21wbGV0ZWRCYXRjaGVzLnJlZHVjZSgoc3VtLCBiYXRjaCkgPT4gc3VtICsgYmF0Y2gucHJvY2Vzc2VkQ291bnQsIDApO1xuICAgIFxuICAgIGlmIChjb21wbGV0ZWRCYXRjaGVzLmxlbmd0aCA9PT0gdG90YWxCYXRjaGVzKSB7XG4gICAgICBzZXNzaW9uLmN1cnJlbnRTdGVwID0gJ2NvbXBsZXRlJztcbiAgICAgIHJldHVybiBgQ2FtcGFpZ24gQ29tcGxldGUhXFxuXFxuQWxsICR7dG90YWxCYXRjaGVzfSBiYXRjaGVzIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHkuXFxuVG90YWwgcG9zdHMgY3JlYXRlZDogJHt0b3RhbFByb2Nlc3NlZH1cXG5DYW1wYWlnbjogJHtzZXNzaW9uLmNhbXBhaWduTmFtZX1cXG5cXG5Zb3VyIGNvbXByZWhlbnNpdmUgbWFya2V0aW5nIGNhbXBhaWduIGlzIG5vdyBzY2hlZHVsZWQgYW5kIHJlYWR5IWA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBgUHJvZ3Jlc3MgVXBkYXRlOlxcbkNvbXBsZXRlZDogJHtjb21wbGV0ZWRCYXRjaGVzLmxlbmd0aH0vJHt0b3RhbEJhdGNoZXN9IGJhdGNoZXNcXG5Qb3N0cyBwcm9jZXNzZWQ6ICR7dG90YWxQcm9jZXNzZWR9XFxuQ29udGludWluZyBjYW1wYWlnbiBnZW5lcmF0aW9uLi4uYDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGlyZWN0b3JBZ2VudCA9IG5ldyBEaXJlY3RvckFnZW50KCk7XG4iXSwibmFtZXMiOlsiQmFzZUFnZW50IiwiRGlyZWN0b3JBZ2VudCIsImV4ZWN1dGUiLCJ0b29sIiwiaW5wdXQiLCJjb252ZXhNdXRhdGlvbnMiLCJzZXNzaW9uSWQiLCJzZXNzaW9ucyIsImhhcyIsInNldCIsImN1cnJlbnRTdGVwIiwiYWN0aXZlQ2FtcGFpZ25zIiwiTWFwIiwic2Vzc2lvbiIsImdldCIsImluY2x1ZGVzIiwiaW5zdHJ1Y3Rpb25zRmlsZSIsImluc3RydWN0aW9uc0NvbnRlbnQiLCJjb250ZW50UHJldmlldyIsInN1YnN0cmluZyIsImxlbmd0aCIsInN0b3JlQ2hhdE1lc3NhZ2UiLCJyb2xlIiwiY29udGVudCIsImludGVyYWN0aXZlQ29tcG9uZW50IiwidHlwZSIsInN0YXR1cyIsImRhdGEiLCJmaWxlVHlwZSIsImZpbHRlckJ5RXh0ZW5zaW9uIiwicGxhY2Vob2xkZXIiLCJmaWxlTmFtZSIsInJlcGxhY2UiLCJ0cmltIiwiZmlsZXMiLCJnZXRBbGxGaWxlcyIsImluc3RydWN0aW9uRmlsZSIsImZpbmQiLCJmIiwibmFtZSIsImVycm9yIiwiY29uc29sZSIsInRvTG93ZXJDYXNlIiwiY2FtcGFpZ25OYW1lIiwiZHVyYXRpb24iLCJwbGF0Zm9ybXMiLCJwb3N0c1BlckRheSIsImNhbXBhaWduR29hbHMiLCJnZW5lcmF0ZUNhbXBhaWduIiwicGFyc2VDYW1wYWlnblNldHRpbmdzIiwiaGFuZGxlQmF0Y2hDb21wbGV0aW9uIiwibGluZXMiLCJzcGxpdCIsIm1hcCIsImxpbmUiLCJmaWx0ZXIiLCJsb3dlciIsInN0YXJ0c1dpdGgiLCJtYXRjaCIsInBhcnNlSW50Iiwiam9pbiIsInRvdGFsRGF5cyIsInRvdGFsUG9zdHMiLCJjYW1wYWlnbklkIiwiY2FtcGFpZ24iLCJjcmVhdGVDYW1wYWlnbiIsImRlc2NyaXB0aW9uIiwiX2lkIiwiRGF0ZSIsIm5vdyIsImxvZyIsImFsbFBvc3RzIiwiZ2VuZXJhdGVCYXRjaGVzQXN5bmMiLCJiYXRjaGVzIiwiY3JlYXRlQmF0Y2hlcyIsImZvckVhY2giLCJiYXRjaCIsInByb2Nlc3NCYXRjaCIsIkVycm9yIiwibWVzc2FnZSIsImluc3RydWN0aW9ucyIsInBvc3RzIiwiZGF5cyIsImkiLCJwbGF0Zm9ybSIsIndlZWsiLCJNYXRoIiwiZmxvb3IiLCJkYXlJbmRleCIsImRheSIsInRpbWUiLCJnZXRPcHRpbWFsUG9zdFRpbWUiLCJzdGFydERhdGUiLCJwb3N0RGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwicGhhc2VzIiwicGhhc2VJbmRleCIsInBoYXNlIiwibWluIiwiY29udGVudFR5cGVzIiwiY29udGVudFR5cGUiLCJnZW5lcmF0ZVBsYXRmb3JtQ29udGVudCIsInB1c2giLCJzY2hlZHVsZWREYXRlIiwidG9JU09TdHJpbmciLCJzY2hlZHVsZWRUaW1lIiwibWV0YWRhdGEiLCJkYXlPZldlZWsiLCJjYW1wYWlnblBoYXNlIiwiaGFzaHRhZ3MiLCJnZW5lcmF0ZUhhc2h0YWdzIiwiYmF0Y2hJZCIsIkJBVENIX1NJWkUiLCJ0aW1lcyIsInR3aXR0ZXIiLCJsaW5rZWRpbiIsImluc3RhZ3JhbSIsImZhY2Vib29rIiwicGxhdGZvcm1UaW1lcyIsImJyYW5kVm9pY2UiLCJleHRyYWN0QnJhbmRWb2ljZSIsImF1ZGllbmNlIiwiZXh0cmFjdEF1ZGllbmNlIiwidm9pY2VLZXl3b3JkcyIsImxvd2VySW5zdHJ1Y3Rpb25zIiwia2V5d29yZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJhdWRpZW5jZUtleXdvcmRzIiwiYmFzZUhhc2h0YWdzIiwicGhhc2VIYXNodGFncyIsImF3YXJlbmVzcyIsImNvbnNpZGVyYXRpb24iLCJjb252ZXJzaW9uIiwicmV0ZW50aW9uIiwiY29udGVudEhhc2h0YWdzIiwiZWR1Y2F0aW9uYWwiLCJwcm9tb3Rpb25hbCIsImVuZ2FnZW1lbnQiLCJhbm5vdW5jZW1lbnQiLCJiYXRjaFBvc3RzIiwicHJvY2Vzc2luZ1N0YXR1cyIsInByb2Nlc3NlZENvdW50IiwidG90YWxDb3VudCIsInBvc3RQcm9taXNlcyIsInBvc3QiLCJ1cHNlcnRQb3N0IiwidGl0bGUiLCJwbGF0Zm9ybURhdGEiLCJKU09OIiwic3RyaW5naWZ5Iiwic2NoZWR1bGVkRm9yIiwiZ2V0VGltZSIsImFnZW50VHlwZSIsIlByb21pc2UiLCJhbGwiLCJjb21wbGV0ZWRCYXRjaGVzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwidG90YWxCYXRjaGVzIiwic2l6ZSIsInRvdGFsUHJvY2Vzc2VkIiwicmVkdWNlIiwic3VtIiwiaWQiLCJpY29uIiwiTUFYX0NPTkNVUlJFTlRfQkFUQ0hFUyIsInRvb2xzIiwiY29tbWFuZCIsInBhcmFtZXRlcnMiLCJkaXJlY3RvckFnZW50Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./store/agents/directorAgent.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./store/agents/registry.ts":
/*!**********************************!*\
  !*** ./store/agents/registry.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AgentRegistry: () => (/* binding */ AgentRegistry),\n/* harmony export */   agentRegistry: () => (/* binding */ agentRegistry),\n/* harmony export */   executeCMOAgent: () => (/* binding */ executeCMOAgent),\n/* harmony export */   executeInstructionsAgent: () => (/* binding */ executeInstructionsAgent),\n/* harmony export */   executeProjectCreatorAgent: () => (/* binding */ executeProjectCreatorAgent),\n/* harmony export */   executeTwitterPostAgent: () => (/* binding */ executeTwitterPostAgent),\n/* harmony export */   getAvailableAgents: () => (/* binding */ getAvailableAgents),\n/* harmony export */   getAvailableCommands: () => (/* binding */ getAvailableCommands)\n/* harmony export */ });\n/* harmony import */ var _directorAgent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./directorAgent */ \"(app-pages-browser)/./store/agents/directorAgent.ts\");\n/* harmony import */ var _editorAgent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editorAgent */ \"(app-pages-browser)/./store/agents/editorAgent.ts\");\n/* harmony import */ var _fileCreatorAgent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fileCreatorAgent */ \"(app-pages-browser)/./store/agents/fileCreatorAgent.ts\");\n/* harmony import */ var _instructionsAgent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./instructionsAgent */ \"(app-pages-browser)/./store/agents/instructionsAgent.ts\");\n/* harmony import */ var _projectCreatorAgent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./projectCreatorAgent */ \"(app-pages-browser)/./store/agents/projectCreatorAgent.ts\");\n/* harmony import */ var _schedulingAgent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schedulingAgent */ \"(app-pages-browser)/./store/agents/schedulingAgent.ts\");\n// Agent Registry\n// /Users/matthewsimon/Projects/eac/eac/store/agents/registry.ts\n\n\n\n\n\n\n/**\n * Central registry for all available agents\n */ class AgentRegistry {\n    /**\n   * Register a new agent\n   */ registerAgent(agent) {\n        this.agents.set(agent.id, agent);\n    }\n    /**\n   * Get an agent by ID\n   */ getAgent(id) {\n        return this.agents.get(id);\n    }\n    /**\n   * Get all available agents\n   */ getAllAgents() {\n        return Array.from(this.agents.values());\n    }\n    /**\n   * Get all agent tools (flattened)\n   */ getAllTools() {\n        const tools = [];\n        for (const agent of this.agents.values()){\n            for (const tool of agent.tools){\n                tools.push({\n                    agent,\n                    tool\n                });\n            }\n        }\n        return tools;\n    }\n    /**\n   * Find agent by tool command\n   */ findAgentByCommand(command) {\n        // Normalize legacy aliases first\n        const normalized = this.legacyCommandAliases[command] || command;\n        for (const agent of this.agents.values()){\n            const tool = agent.tools.find((t)=>t.command === normalized);\n            if (tool) return {\n                agent,\n                tool\n            };\n        }\n        return undefined;\n    }\n    /**\n   * Execute an agent tool\n   */ async executeAgent(agentId, toolId, input, convexMutations, sessionId) {\n        const agent = this.getAgent(agentId);\n        if (!agent) {\n            throw new Error(\"Agent not found: \".concat(agentId));\n        }\n        const tool = agent.tools.find((t)=>t.id === toolId);\n        if (!tool) {\n            throw new Error(\"Tool not found: \".concat(toolId, \" for agent \").concat(agentId));\n        }\n        return await agent.execute(tool, input, convexMutations, sessionId);\n    }\n    /**\n   * Execute agent by command (legacy support)\n   */ async executeByCommand(command, input, convexMutations) {\n        const result = this.findAgentByCommand(command);\n        if (!result) {\n            throw new Error(\"No agent found for command: \".concat(command));\n        }\n        return await result.agent.execute(result.tool, input, convexMutations);\n    }\n    constructor(){\n        this.agents = new Map();\n        // Legacy command aliases (to be removed after deprecation window)\n        this.legacyCommandAliases = {\n            'create': '/create-project',\n            'create-project': '/create-project',\n            'create-file': '/create-file'\n        };\n        console.log('🤖 Agent Registry: Initializing...');\n        this.registerAgent(_instructionsAgent__WEBPACK_IMPORTED_MODULE_3__.instructionsAgent);\n        console.log('🤖 Registered:', _instructionsAgent__WEBPACK_IMPORTED_MODULE_3__.instructionsAgent.id, _instructionsAgent__WEBPACK_IMPORTED_MODULE_3__.instructionsAgent.name);\n        this.registerAgent(_schedulingAgent__WEBPACK_IMPORTED_MODULE_5__.schedulingAgent);\n        console.log('🤖 Registered:', _schedulingAgent__WEBPACK_IMPORTED_MODULE_5__.schedulingAgent.id, _schedulingAgent__WEBPACK_IMPORTED_MODULE_5__.schedulingAgent.name);\n        this.registerAgent(_projectCreatorAgent__WEBPACK_IMPORTED_MODULE_4__.projectCreatorAgent);\n        console.log('🤖 Registered:', _projectCreatorAgent__WEBPACK_IMPORTED_MODULE_4__.projectCreatorAgent.id, _projectCreatorAgent__WEBPACK_IMPORTED_MODULE_4__.projectCreatorAgent.name);\n        this.registerAgent(_fileCreatorAgent__WEBPACK_IMPORTED_MODULE_2__.fileCreatorAgent);\n        console.log('🤖 Registered:', _fileCreatorAgent__WEBPACK_IMPORTED_MODULE_2__.fileCreatorAgent.id, _fileCreatorAgent__WEBPACK_IMPORTED_MODULE_2__.fileCreatorAgent.name);\n        this.registerAgent(_editorAgent__WEBPACK_IMPORTED_MODULE_1__.editorAgent);\n        console.log('🤖 Registered:', _editorAgent__WEBPACK_IMPORTED_MODULE_1__.editorAgent.id, _editorAgent__WEBPACK_IMPORTED_MODULE_1__.editorAgent.name);\n        this.registerAgent(_directorAgent__WEBPACK_IMPORTED_MODULE_0__.directorAgent);\n        console.log('🤖 Registered:', _directorAgent__WEBPACK_IMPORTED_MODULE_0__.directorAgent.id, _directorAgent__WEBPACK_IMPORTED_MODULE_0__.directorAgent.name);\n        console.log('🤖 Total agents registered:', this.agents.size);\n    }\n}\n/**\n * Singleton agent registry instance\n */ const agentRegistry = new AgentRegistry();\n/**\n * Legacy support functions for backward compatibility\n */ async function executeInstructionsAgent(input, convexMutations) {\n    return await agentRegistry.executeAgent('instructions', 'generate-instructions', input, convexMutations);\n}\nasync function executeTwitterPostAgent(input, convexMutations) {\n    return await agentRegistry.executeAgent('twitter-post', 'create-twitter-post', input, convexMutations);\n}\n/**\n * Get all available agents for UI display\n */ function getAvailableAgents() {\n    return agentRegistry.getAllAgents().map((agent)=>({\n            id: agent.id,\n            name: agent.name,\n            description: agent.description,\n            icon: agent.icon,\n            isActive: false,\n            tools: agent.tools.map((tool)=>({\n                    id: tool.id,\n                    name: tool.name,\n                    command: tool.command,\n                    description: tool.description,\n                    parameters: tool.parameters\n                }))\n        }));\n}\n/**\n * Get available commands for autocomplete\n */ function getAvailableCommands() {\n    const commands = [];\n    for (const agent of agentRegistry.getAllAgents()){\n        for (const tool of agent.tools){\n            commands.push(tool.command);\n        }\n    }\n    return commands;\n}\n/**\n * Legacy support function for project creator agent\n */ async function executeProjectCreatorAgent(input, convexMutations) {\n    return await agentRegistry.executeAgent('project-creator', 'create-project-with-files', input, convexMutations);\n}\n/**\n * Legacy support function for CMO agent\n */ async function executeCMOAgent(input, convexMutations, sessionId) {\n    return await agentRegistry.executeAgent('cmo', 'define-campaign', input, convexMutations, sessionId);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3N0b3JlL2FnZW50cy9yZWdpc3RyeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGlCQUFpQjtBQUNqQixnRUFBZ0U7QUFHaEI7QUFDSjtBQUNVO0FBQ0U7QUFDSTtBQUNSO0FBRXBEOztDQUVDLEdBQ00sTUFBTU07SUEyQlg7O0dBRUMsR0FDREMsY0FBY0MsS0FBZ0IsRUFBUTtRQUNwQyxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDRixNQUFNRyxFQUFFLEVBQUVIO0lBQzVCO0lBRUE7O0dBRUMsR0FDREksU0FBU0QsRUFBVSxFQUF5QjtRQUMxQyxPQUFPLElBQUksQ0FBQ0YsTUFBTSxDQUFDSSxHQUFHLENBQUNGO0lBQ3pCO0lBRUE7O0dBRUMsR0FDREcsZUFBNEI7UUFDMUIsT0FBT0MsTUFBTUMsSUFBSSxDQUFDLElBQUksQ0FBQ1AsTUFBTSxDQUFDUSxNQUFNO0lBQ3RDO0lBRUE7O0dBRUMsR0FDREMsY0FBYztRQUNaLE1BQU1DLFFBQWdELEVBQUU7UUFFeEQsS0FBSyxNQUFNWCxTQUFTLElBQUksQ0FBQ0MsTUFBTSxDQUFDUSxNQUFNLEdBQUk7WUFDeEMsS0FBSyxNQUFNRyxRQUFRWixNQUFNVyxLQUFLLENBQUU7Z0JBQzlCQSxNQUFNRSxJQUFJLENBQUM7b0JBQUViO29CQUFPWTtnQkFBSztZQUMzQjtRQUNGO1FBRUEsT0FBT0Q7SUFDVDtJQUVBOztHQUVDLEdBQ0RHLG1CQUFtQkMsT0FBZSxFQUErQztRQUMvRSxpQ0FBaUM7UUFDakMsTUFBTUMsYUFBYSxJQUFJLENBQUNDLG9CQUFvQixDQUFDRixRQUFRLElBQUlBO1FBQ3pELEtBQUssTUFBTWYsU0FBUyxJQUFJLENBQUNDLE1BQU0sQ0FBQ1EsTUFBTSxHQUFJO1lBQ3hDLE1BQU1HLE9BQU9aLE1BQU1XLEtBQUssQ0FBQ08sSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFSixPQUFPLEtBQUtDO1lBQ2pELElBQUlKLE1BQU0sT0FBTztnQkFBRVo7Z0JBQU9ZO1lBQUs7UUFDakM7UUFDQSxPQUFPUTtJQUNUO0lBRUE7O0dBRUMsR0FDRCxNQUFNQyxhQUNKQyxPQUFlLEVBQ2ZDLE1BQWMsRUFDZEMsS0FBYSxFQUNiQyxlQUFvQixFQUNwQkMsU0FBa0IsRUFDRDtRQUNqQixNQUFNMUIsUUFBUSxJQUFJLENBQUNJLFFBQVEsQ0FBQ2tCO1FBQzVCLElBQUksQ0FBQ3RCLE9BQU87WUFDVixNQUFNLElBQUkyQixNQUFNLG9CQUE0QixPQUFSTDtRQUN0QztRQUVBLE1BQU1WLE9BQU9aLE1BQU1XLEtBQUssQ0FBQ08sSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFaEIsRUFBRSxLQUFLb0I7UUFDNUMsSUFBSSxDQUFDWCxNQUFNO1lBQ1QsTUFBTSxJQUFJZSxNQUFNLG1CQUF1Q0wsT0FBcEJDLFFBQU8sZUFBcUIsT0FBUkQ7UUFDekQ7UUFFQSxPQUFPLE1BQU10QixNQUFNNEIsT0FBTyxDQUFDaEIsTUFBTVksT0FBT0MsaUJBQWlCQztJQUMzRDtJQUVBOztHQUVDLEdBQ0QsTUFBTUcsaUJBQ0pkLE9BQWUsRUFDZlMsS0FBYSxFQUNiQyxlQUFvQixFQUNIO1FBQ2pCLE1BQU1LLFNBQVMsSUFBSSxDQUFDaEIsa0JBQWtCLENBQUNDO1FBQ3ZDLElBQUksQ0FBQ2UsUUFBUTtZQUNYLE1BQU0sSUFBSUgsTUFBTSwrQkFBdUMsT0FBUlo7UUFDakQ7UUFFQSxPQUFPLE1BQU1lLE9BQU85QixLQUFLLENBQUM0QixPQUFPLENBQUNFLE9BQU9sQixJQUFJLEVBQUVZLE9BQU9DO0lBQ3hEO0lBeEdBTSxhQUFjO2FBUk45QixTQUFpQyxJQUFJK0I7UUFDN0Msa0VBQWtFO2FBQzFEZix1QkFBK0M7WUFDckQsVUFBVTtZQUNWLGtCQUFrQjtZQUNsQixlQUFlO1FBQ2pCO1FBR0VnQixRQUFRQyxHQUFHLENBQUM7UUFDWixJQUFJLENBQUNuQyxhQUFhLENBQUNKLGlFQUFpQkE7UUFDcENzQyxRQUFRQyxHQUFHLENBQUMsa0JBQWtCdkMsaUVBQWlCQSxDQUFDUSxFQUFFLEVBQUVSLGlFQUFpQkEsQ0FBQ3dDLElBQUk7UUFDMUUsSUFBSSxDQUFDcEMsYUFBYSxDQUFDRiw2REFBZUE7UUFDbENvQyxRQUFRQyxHQUFHLENBQUMsa0JBQWtCckMsNkRBQWVBLENBQUNNLEVBQUUsRUFBRU4sNkRBQWVBLENBQUNzQyxJQUFJO1FBQ3RFLElBQUksQ0FBQ3BDLGFBQWEsQ0FBQ0gscUVBQW1CQTtRQUN0Q3FDLFFBQVFDLEdBQUcsQ0FBQyxrQkFBa0J0QyxxRUFBbUJBLENBQUNPLEVBQUUsRUFBRVAscUVBQW1CQSxDQUFDdUMsSUFBSTtRQUM5RSxJQUFJLENBQUNwQyxhQUFhLENBQUNMLCtEQUFnQkE7UUFDbkN1QyxRQUFRQyxHQUFHLENBQUMsa0JBQWtCeEMsK0RBQWdCQSxDQUFDUyxFQUFFLEVBQUVULCtEQUFnQkEsQ0FBQ3lDLElBQUk7UUFDeEUsSUFBSSxDQUFDcEMsYUFBYSxDQUFDTixxREFBV0E7UUFDOUJ3QyxRQUFRQyxHQUFHLENBQUMsa0JBQWtCekMscURBQVdBLENBQUNVLEVBQUUsRUFBRVYscURBQVdBLENBQUMwQyxJQUFJO1FBQzlELElBQUksQ0FBQ3BDLGFBQWEsQ0FBQ1AseURBQWFBO1FBQ2hDeUMsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQjFDLHlEQUFhQSxDQUFDVyxFQUFFLEVBQUVYLHlEQUFhQSxDQUFDMkMsSUFBSTtRQUNsRUYsUUFBUUMsR0FBRyxDQUFDLCtCQUErQixJQUFJLENBQUNqQyxNQUFNLENBQUNtQyxJQUFJO0lBQzdEO0FBMEZGO0FBRUE7O0NBRUMsR0FDTSxNQUFNQyxnQkFBZ0IsSUFBSXZDLGdCQUFnQjtBQUVqRDs7Q0FFQyxHQUNNLGVBQWV3Qyx5QkFDcEJkLEtBQWEsRUFDYkMsZUFBb0I7SUFFcEIsT0FBTyxNQUFNWSxjQUFjaEIsWUFBWSxDQUNyQyxnQkFDQSx5QkFDQUcsT0FDQUM7QUFFSjtBQUVPLGVBQWVjLHdCQUNwQmYsS0FBYSxFQUNiQyxlQUFvQjtJQUVwQixPQUFPLE1BQU1ZLGNBQWNoQixZQUFZLENBQ3JDLGdCQUNBLHVCQUNBRyxPQUNBQztBQUVKO0FBRUE7O0NBRUMsR0FDTSxTQUFTZTtJQUNkLE9BQU9ILGNBQWMvQixZQUFZLEdBQUdtQyxHQUFHLENBQUN6QyxDQUFBQSxRQUFVO1lBQ2hERyxJQUFJSCxNQUFNRyxFQUFFO1lBQ1pnQyxNQUFNbkMsTUFBTW1DLElBQUk7WUFDaEJPLGFBQWExQyxNQUFNMEMsV0FBVztZQUM5QkMsTUFBTTNDLE1BQU0yQyxJQUFJO1lBQ2hCQyxVQUFVO1lBQ1ZqQyxPQUFPWCxNQUFNVyxLQUFLLENBQUM4QixHQUFHLENBQUM3QixDQUFBQSxPQUFTO29CQUM5QlQsSUFBSVMsS0FBS1QsRUFBRTtvQkFDWGdDLE1BQU12QixLQUFLdUIsSUFBSTtvQkFDZnBCLFNBQVNILEtBQUtHLE9BQU87b0JBQ3JCMkIsYUFBYTlCLEtBQUs4QixXQUFXO29CQUM3QkcsWUFBWWpDLEtBQUtpQyxVQUFVO2dCQUM3QjtRQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDO0lBQ2QsTUFBTUMsV0FBcUIsRUFBRTtJQUU3QixLQUFLLE1BQU0vQyxTQUFTcUMsY0FBYy9CLFlBQVksR0FBSTtRQUNoRCxLQUFLLE1BQU1NLFFBQVFaLE1BQU1XLEtBQUssQ0FBRTtZQUM5Qm9DLFNBQVNsQyxJQUFJLENBQUNELEtBQUtHLE9BQU87UUFDNUI7SUFDRjtJQUVBLE9BQU9nQztBQUNUO0FBRUE7O0NBRUMsR0FDTSxlQUFlQywyQkFDcEJ4QixLQUFhLEVBQ2JDLGVBQW9CO0lBRXBCLE9BQU8sTUFBTVksY0FBY2hCLFlBQVksQ0FDckMsbUJBQ0EsNkJBQ0FHLE9BQ0FDO0FBRUo7QUFFQTs7Q0FFQyxHQUNNLGVBQWV3QixnQkFDcEJ6QixLQUFhLEVBQ2JDLGVBQW9CLEVBQ3BCQyxTQUFrQjtJQUVsQixPQUFPLE1BQU1XLGNBQWNoQixZQUFZLENBQ3JDLE9BQ0EsbUJBQ0FHLE9BQ0FDLGlCQUNBQztBQUVKIiwic291cmNlcyI6WyIvVXNlcnMvbWF0dGhld3NpbW9uL1Byb2plY3RzL2VhYy9lYWMvc3RvcmUvYWdlbnRzL3JlZ2lzdHJ5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFnZW50IFJlZ2lzdHJ5XG4vLyAvVXNlcnMvbWF0dGhld3NpbW9uL1Byb2plY3RzL2VhYy9lYWMvc3RvcmUvYWdlbnRzL3JlZ2lzdHJ5LnRzXG5cbmltcG9ydCB7IEJhc2VBZ2VudCB9IGZyb20gJy4vYmFzZSc7XG5pbXBvcnQgeyBkaXJlY3RvckFnZW50IH0gZnJvbSAnLi9kaXJlY3RvckFnZW50JztcbmltcG9ydCB7IGVkaXRvckFnZW50IH0gZnJvbSAnLi9lZGl0b3JBZ2VudCc7XG5pbXBvcnQgeyBmaWxlQ3JlYXRvckFnZW50IH0gZnJvbSAnLi9maWxlQ3JlYXRvckFnZW50JztcbmltcG9ydCB7IGluc3RydWN0aW9uc0FnZW50IH0gZnJvbSAnLi9pbnN0cnVjdGlvbnNBZ2VudCc7XG5pbXBvcnQgeyBwcm9qZWN0Q3JlYXRvckFnZW50IH0gZnJvbSAnLi9wcm9qZWN0Q3JlYXRvckFnZW50JztcbmltcG9ydCB7IHNjaGVkdWxpbmdBZ2VudCB9IGZyb20gJy4vc2NoZWR1bGluZ0FnZW50JztcblxuLyoqXG4gKiBDZW50cmFsIHJlZ2lzdHJ5IGZvciBhbGwgYXZhaWxhYmxlIGFnZW50c1xuICovXG5leHBvcnQgY2xhc3MgQWdlbnRSZWdpc3RyeSB7XG4gIHByaXZhdGUgYWdlbnRzOiBNYXA8c3RyaW5nLCBCYXNlQWdlbnQ+ID0gbmV3IE1hcCgpO1xuICAvLyBMZWdhY3kgY29tbWFuZCBhbGlhc2VzICh0byBiZSByZW1vdmVkIGFmdGVyIGRlcHJlY2F0aW9uIHdpbmRvdylcbiAgcHJpdmF0ZSBsZWdhY3lDb21tYW5kQWxpYXNlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAnY3JlYXRlJzogJy9jcmVhdGUtcHJvamVjdCcsXG4gICAgJ2NyZWF0ZS1wcm9qZWN0JzogJy9jcmVhdGUtcHJvamVjdCcsIC8vIG5vcm1hbGl6ZSBpZiBhbHJlYWR5IHBhcnRpYWxseSBtaWdyYXRlZFxuICAgICdjcmVhdGUtZmlsZSc6ICcvY3JlYXRlLWZpbGUnXG4gIH07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc29sZS5sb2coJ/CfpJYgQWdlbnQgUmVnaXN0cnk6IEluaXRpYWxpemluZy4uLicpO1xuICAgIHRoaXMucmVnaXN0ZXJBZ2VudChpbnN0cnVjdGlvbnNBZ2VudCk7XG4gICAgY29uc29sZS5sb2coJ/CfpJYgUmVnaXN0ZXJlZDonLCBpbnN0cnVjdGlvbnNBZ2VudC5pZCwgaW5zdHJ1Y3Rpb25zQWdlbnQubmFtZSk7XG4gICAgdGhpcy5yZWdpc3RlckFnZW50KHNjaGVkdWxpbmdBZ2VudCk7XG4gICAgY29uc29sZS5sb2coJ/CfpJYgUmVnaXN0ZXJlZDonLCBzY2hlZHVsaW5nQWdlbnQuaWQsIHNjaGVkdWxpbmdBZ2VudC5uYW1lKTtcbiAgICB0aGlzLnJlZ2lzdGVyQWdlbnQocHJvamVjdENyZWF0b3JBZ2VudCk7XG4gICAgY29uc29sZS5sb2coJ/CfpJYgUmVnaXN0ZXJlZDonLCBwcm9qZWN0Q3JlYXRvckFnZW50LmlkLCBwcm9qZWN0Q3JlYXRvckFnZW50Lm5hbWUpO1xuICAgIHRoaXMucmVnaXN0ZXJBZ2VudChmaWxlQ3JlYXRvckFnZW50KTtcbiAgICBjb25zb2xlLmxvZygn8J+kliBSZWdpc3RlcmVkOicsIGZpbGVDcmVhdG9yQWdlbnQuaWQsIGZpbGVDcmVhdG9yQWdlbnQubmFtZSk7XG4gICAgdGhpcy5yZWdpc3RlckFnZW50KGVkaXRvckFnZW50KTtcbiAgICBjb25zb2xlLmxvZygn8J+kliBSZWdpc3RlcmVkOicsIGVkaXRvckFnZW50LmlkLCBlZGl0b3JBZ2VudC5uYW1lKTtcbiAgICB0aGlzLnJlZ2lzdGVyQWdlbnQoZGlyZWN0b3JBZ2VudCk7XG4gICAgY29uc29sZS5sb2coJ/CfpJYgUmVnaXN0ZXJlZDonLCBkaXJlY3RvckFnZW50LmlkLCBkaXJlY3RvckFnZW50Lm5hbWUpO1xuICAgIGNvbnNvbGUubG9nKCfwn6SWIFRvdGFsIGFnZW50cyByZWdpc3RlcmVkOicsIHRoaXMuYWdlbnRzLnNpemUpO1xuICB9XG4gIFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIG5ldyBhZ2VudFxuICAgKi9cbiAgcmVnaXN0ZXJBZ2VudChhZ2VudDogQmFzZUFnZW50KTogdm9pZCB7XG4gICAgdGhpcy5hZ2VudHMuc2V0KGFnZW50LmlkLCBhZ2VudCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGFnZW50IGJ5IElEXG4gICAqL1xuICBnZXRBZ2VudChpZDogc3RyaW5nKTogQmFzZUFnZW50IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5hZ2VudHMuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGF2YWlsYWJsZSBhZ2VudHNcbiAgICovXG4gIGdldEFsbEFnZW50cygpOiBCYXNlQWdlbnRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hZ2VudHMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgYWdlbnQgdG9vbHMgKGZsYXR0ZW5lZClcbiAgICovXG4gIGdldEFsbFRvb2xzKCkge1xuICAgIGNvbnN0IHRvb2xzOiBBcnJheTx7IGFnZW50OiBCYXNlQWdlbnQ7IHRvb2w6IGFueSB9PiA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgYWdlbnQgb2YgdGhpcy5hZ2VudHMudmFsdWVzKCkpIHtcbiAgICAgIGZvciAoY29uc3QgdG9vbCBvZiBhZ2VudC50b29scykge1xuICAgICAgICB0b29scy5wdXNoKHsgYWdlbnQsIHRvb2wgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0b29scztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGFnZW50IGJ5IHRvb2wgY29tbWFuZFxuICAgKi9cbiAgZmluZEFnZW50QnlDb21tYW5kKGNvbW1hbmQ6IHN0cmluZyk6IHsgYWdlbnQ6IEJhc2VBZ2VudDsgdG9vbDogYW55IH0gfCB1bmRlZmluZWQge1xuICAgIC8vIE5vcm1hbGl6ZSBsZWdhY3kgYWxpYXNlcyBmaXJzdFxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLmxlZ2FjeUNvbW1hbmRBbGlhc2VzW2NvbW1hbmRdIHx8IGNvbW1hbmQ7XG4gICAgZm9yIChjb25zdCBhZ2VudCBvZiB0aGlzLmFnZW50cy52YWx1ZXMoKSkge1xuICAgICAgY29uc3QgdG9vbCA9IGFnZW50LnRvb2xzLmZpbmQodCA9PiB0LmNvbW1hbmQgPT09IG5vcm1hbGl6ZWQpO1xuICAgICAgaWYgKHRvb2wpIHJldHVybiB7IGFnZW50LCB0b29sIH07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhbiBhZ2VudCB0b29sXG4gICAqL1xuICBhc3luYyBleGVjdXRlQWdlbnQoXG4gICAgYWdlbnRJZDogc3RyaW5nLFxuICAgIHRvb2xJZDogc3RyaW5nLFxuICAgIGlucHV0OiBzdHJpbmcsXG4gICAgY29udmV4TXV0YXRpb25zOiBhbnksXG4gICAgc2Vzc2lvbklkPzogc3RyaW5nXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgYWdlbnQgPSB0aGlzLmdldEFnZW50KGFnZW50SWQpO1xuICAgIGlmICghYWdlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQWdlbnQgbm90IGZvdW5kOiAke2FnZW50SWR9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbCA9IGFnZW50LnRvb2xzLmZpbmQodCA9PiB0LmlkID09PSB0b29sSWQpO1xuICAgIGlmICghdG9vbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUb29sIG5vdCBmb3VuZDogJHt0b29sSWR9IGZvciBhZ2VudCAke2FnZW50SWR9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IGFnZW50LmV4ZWN1dGUodG9vbCwgaW5wdXQsIGNvbnZleE11dGF0aW9ucywgc2Vzc2lvbklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGFnZW50IGJ5IGNvbW1hbmQgKGxlZ2FjeSBzdXBwb3J0KVxuICAgKi9cbiAgYXN5bmMgZXhlY3V0ZUJ5Q29tbWFuZChcbiAgICBjb21tYW5kOiBzdHJpbmcsXG4gICAgaW5wdXQ6IHN0cmluZyxcbiAgICBjb252ZXhNdXRhdGlvbnM6IGFueVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZmluZEFnZW50QnlDb21tYW5kKGNvbW1hbmQpO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGFnZW50IGZvdW5kIGZvciBjb21tYW5kOiAke2NvbW1hbmR9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHJlc3VsdC5hZ2VudC5leGVjdXRlKHJlc3VsdC50b29sLCBpbnB1dCwgY29udmV4TXV0YXRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIFNpbmdsZXRvbiBhZ2VudCByZWdpc3RyeSBpbnN0YW5jZVxuICovXG5leHBvcnQgY29uc3QgYWdlbnRSZWdpc3RyeSA9IG5ldyBBZ2VudFJlZ2lzdHJ5KCk7XG5cbi8qKlxuICogTGVnYWN5IHN1cHBvcnQgZnVuY3Rpb25zIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSW5zdHJ1Y3Rpb25zQWdlbnQoXG4gIGlucHV0OiBzdHJpbmcsXG4gIGNvbnZleE11dGF0aW9uczogYW55XG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICByZXR1cm4gYXdhaXQgYWdlbnRSZWdpc3RyeS5leGVjdXRlQWdlbnQoXG4gICAgJ2luc3RydWN0aW9ucycsXG4gICAgJ2dlbmVyYXRlLWluc3RydWN0aW9ucycsXG4gICAgaW5wdXQsXG4gICAgY29udmV4TXV0YXRpb25zXG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlVHdpdHRlclBvc3RBZ2VudChcbiAgaW5wdXQ6IHN0cmluZyxcbiAgY29udmV4TXV0YXRpb25zOiBhbnlcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBhd2FpdCBhZ2VudFJlZ2lzdHJ5LmV4ZWN1dGVBZ2VudChcbiAgICAndHdpdHRlci1wb3N0JyxcbiAgICAnY3JlYXRlLXR3aXR0ZXItcG9zdCcsXG4gICAgaW5wdXQsXG4gICAgY29udmV4TXV0YXRpb25zXG4gICk7XG59XG5cbi8qKlxuICogR2V0IGFsbCBhdmFpbGFibGUgYWdlbnRzIGZvciBVSSBkaXNwbGF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdmFpbGFibGVBZ2VudHMoKSB7XG4gIHJldHVybiBhZ2VudFJlZ2lzdHJ5LmdldEFsbEFnZW50cygpLm1hcChhZ2VudCA9PiAoe1xuICAgIGlkOiBhZ2VudC5pZCxcbiAgICBuYW1lOiBhZ2VudC5uYW1lLFxuICAgIGRlc2NyaXB0aW9uOiBhZ2VudC5kZXNjcmlwdGlvbixcbiAgICBpY29uOiBhZ2VudC5pY29uLFxuICAgIGlzQWN0aXZlOiBmYWxzZSwgLy8gRGVmYXVsdCB0byBpbmFjdGl2ZVxuICAgIHRvb2xzOiBhZ2VudC50b29scy5tYXAodG9vbCA9PiAoe1xuICAgICAgaWQ6IHRvb2wuaWQsXG4gICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICBjb21tYW5kOiB0b29sLmNvbW1hbmQsXG4gICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgIHBhcmFtZXRlcnM6IHRvb2wucGFyYW1ldGVycyxcbiAgICB9KSksXG4gIH0pKTtcbn1cblxuLyoqXG4gKiBHZXQgYXZhaWxhYmxlIGNvbW1hbmRzIGZvciBhdXRvY29tcGxldGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF2YWlsYWJsZUNvbW1hbmRzKCk6IHN0cmluZ1tdIHtcbiAgY29uc3QgY29tbWFuZHM6IHN0cmluZ1tdID0gW107XG4gIFxuICBmb3IgKGNvbnN0IGFnZW50IG9mIGFnZW50UmVnaXN0cnkuZ2V0QWxsQWdlbnRzKCkpIHtcbiAgICBmb3IgKGNvbnN0IHRvb2wgb2YgYWdlbnQudG9vbHMpIHtcbiAgICAgIGNvbW1hbmRzLnB1c2godG9vbC5jb21tYW5kKTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBjb21tYW5kcztcbn1cblxuLyoqXG4gKiBMZWdhY3kgc3VwcG9ydCBmdW5jdGlvbiBmb3IgcHJvamVjdCBjcmVhdG9yIGFnZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlUHJvamVjdENyZWF0b3JBZ2VudChcbiAgaW5wdXQ6IHN0cmluZyxcbiAgY29udmV4TXV0YXRpb25zOiBhbnlcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBhd2FpdCBhZ2VudFJlZ2lzdHJ5LmV4ZWN1dGVBZ2VudChcbiAgICAncHJvamVjdC1jcmVhdG9yJyxcbiAgICAnY3JlYXRlLXByb2plY3Qtd2l0aC1maWxlcycsXG4gICAgaW5wdXQsXG4gICAgY29udmV4TXV0YXRpb25zXG4gICk7XG59XG5cbi8qKlxuICogTGVnYWN5IHN1cHBvcnQgZnVuY3Rpb24gZm9yIENNTyBhZ2VudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNNT0FnZW50KFxuICBpbnB1dDogc3RyaW5nLFxuICBjb252ZXhNdXRhdGlvbnM6IGFueSxcbiAgc2Vzc2lvbklkPzogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICByZXR1cm4gYXdhaXQgYWdlbnRSZWdpc3RyeS5leGVjdXRlQWdlbnQoXG4gICAgJ2NtbycsXG4gICAgJ2RlZmluZS1jYW1wYWlnbicsXG4gICAgaW5wdXQsXG4gICAgY29udmV4TXV0YXRpb25zLFxuICAgIHNlc3Npb25JZFxuICApO1xufVxuIl0sIm5hbWVzIjpbImRpcmVjdG9yQWdlbnQiLCJlZGl0b3JBZ2VudCIsImZpbGVDcmVhdG9yQWdlbnQiLCJpbnN0cnVjdGlvbnNBZ2VudCIsInByb2plY3RDcmVhdG9yQWdlbnQiLCJzY2hlZHVsaW5nQWdlbnQiLCJBZ2VudFJlZ2lzdHJ5IiwicmVnaXN0ZXJBZ2VudCIsImFnZW50IiwiYWdlbnRzIiwic2V0IiwiaWQiLCJnZXRBZ2VudCIsImdldCIsImdldEFsbEFnZW50cyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImdldEFsbFRvb2xzIiwidG9vbHMiLCJ0b29sIiwicHVzaCIsImZpbmRBZ2VudEJ5Q29tbWFuZCIsImNvbW1hbmQiLCJub3JtYWxpemVkIiwibGVnYWN5Q29tbWFuZEFsaWFzZXMiLCJmaW5kIiwidCIsInVuZGVmaW5lZCIsImV4ZWN1dGVBZ2VudCIsImFnZW50SWQiLCJ0b29sSWQiLCJpbnB1dCIsImNvbnZleE11dGF0aW9ucyIsInNlc3Npb25JZCIsIkVycm9yIiwiZXhlY3V0ZSIsImV4ZWN1dGVCeUNvbW1hbmQiLCJyZXN1bHQiLCJjb25zdHJ1Y3RvciIsIk1hcCIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwic2l6ZSIsImFnZW50UmVnaXN0cnkiLCJleGVjdXRlSW5zdHJ1Y3Rpb25zQWdlbnQiLCJleGVjdXRlVHdpdHRlclBvc3RBZ2VudCIsImdldEF2YWlsYWJsZUFnZW50cyIsIm1hcCIsImRlc2NyaXB0aW9uIiwiaWNvbiIsImlzQWN0aXZlIiwicGFyYW1ldGVycyIsImdldEF2YWlsYWJsZUNvbW1hbmRzIiwiY29tbWFuZHMiLCJleGVjdXRlUHJvamVjdENyZWF0b3JBZ2VudCIsImV4ZWN1dGVDTU9BZ2VudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./store/agents/registry.ts\n"));

/***/ })

});