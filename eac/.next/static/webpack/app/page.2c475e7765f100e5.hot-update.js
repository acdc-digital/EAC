"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./store/agents/directorAgent.ts":
/*!***************************************!*\
  !*** ./store/agents/directorAgent.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DirectorAgent: () => (/* binding */ DirectorAgent),\n/* harmony export */   directorAgent: () => (/* binding */ directorAgent)\n/* harmony export */ });\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(app-pages-browser)/./store/agents/base.ts\");\n// Campaign Director Agent\n// Orchestrates large-scale marketing campaigns with 100+ posts across multiple platforms\n\nclass DirectorAgent extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseAgent {\n    async execute(tool, input, convexMutations, sessionId) {\n        console.log('üî• Director Agent: Execute called with input:', input);\n        console.log('üî• Director Agent: Session ID:', sessionId);\n        if (!sessionId) {\n            return 'Session ID is required for campaign orchestration';\n        }\n        // Initialize or get session\n        const existingSession = this.sessions.has(sessionId);\n        console.log('üî• Director Agent: Existing session found:', existingSession);\n        if (!this.sessions.has(sessionId)) {\n            console.log('üî• Director Agent: Creating new session');\n            this.sessions.set(sessionId, {\n                currentStep: 'campaign-name',\n                activeCampaigns: new Map()\n            });\n        }\n        const session = this.sessions.get(sessionId);\n        console.log('üî• Director Agent: Current session step:', session.currentStep);\n        console.log('üî• Director Agent: Has instructions file:', !!session.instructionsFile);\n        // If session is already complete, return success message\n        if (session.currentStep === 'complete') {\n            return 'Campaign has been successfully generated and scheduled! Use `/director` to start a new campaign.';\n        }\n        // Step 1: Request campaign name and create project\n        if (session.currentStep === 'campaign-name') {\n            // Check if this is a campaign name input\n            if (input && input.trim() && !input.includes('Selected file:') && !input.startsWith('/')) {\n                const campaignName = input.trim();\n                console.log('üî• Director Agent: Creating campaign project:', campaignName);\n                try {\n                    var _convexMutations_createProject;\n                    // Create the project using Convex mutations\n                    const project = await ((_convexMutations_createProject = convexMutations.createProject) === null || _convexMutations_createProject === void 0 ? void 0 : _convexMutations_createProject.call(convexMutations, {\n                        name: campaignName,\n                        description: \"Marketing campaign project: \".concat(campaignName),\n                        status: 'active'\n                    }));\n                    if (project) {\n                        session.campaignProjectId = project._id || project.id || campaignName;\n                        session.campaignProjectName = campaignName;\n                        session.currentStep = 'instructions';\n                        console.log('üî• Director Agent: Project created, moving to instructions step');\n                        // Continue to instructions step\n                        if (convexMutations.storeChatMessage) {\n                            await convexMutations.storeChatMessage({\n                                role: 'assistant',\n                                content: '‚úÖ Campaign project \"'.concat(campaignName, '\" created successfully!\\n\\nNow, please select an instructions file that contains your campaign guidelines, brand voice, or marketing strategy.\\n\\nWhat you can include in your instructions file:\\n- Brand voice and tone guidelines\\n- Target audience information\\n- Campaign objectives and KPIs\\n- Content themes and messaging\\n- Platform-specific requirements\\n- Hashtag strategies\\n- Visual guidelines\\n\\nSelect your instructions file:'),\n                                sessionId,\n                                interactiveComponent: {\n                                    type: 'file_selector',\n                                    status: 'pending',\n                                    data: {\n                                        fileType: 'instructions',\n                                        filterByExtension: [\n                                            '.md',\n                                            '.txt'\n                                        ],\n                                        placeholder: 'Select campaign instructions file...'\n                                    }\n                                }\n                            });\n                        }\n                        return 'Campaign project \"'.concat(campaignName, '\" created! Please select an instructions file to continue.');\n                    } else {\n                        return 'Failed to create campaign project. Please try again.';\n                    }\n                } catch (error) {\n                    console.error('üî• Director Agent: Error creating project:', error);\n                    return 'Error creating campaign project. Please try again with a different name.';\n                }\n            } else {\n                // Show campaign name input prompt\n                if (convexMutations.storeChatMessage) {\n                    await convexMutations.storeChatMessage({\n                        role: 'assistant',\n                        content: 'üé¨ **Campaign Director Agent**\\n\\nI will help you orchestrate a comprehensive marketing campaign with 100+ posts across multiple platforms.\\n\\n**Step 1: Create Campaign Project**\\n\\nFirst, let\\'s create a dedicated project folder for your campaign. This will organize all your generated content, schedules, and assets.\\n\\nWhat would you like to name your campaign project?',\n                        sessionId,\n                        interactiveComponent: {\n                            type: 'file_name_input',\n                            status: 'pending',\n                            data: {\n                                placeholder: 'Enter campaign name (e.g., \"Q4 Product Launch\", \"Holiday Marketing 2025\")',\n                                fileType: 'project'\n                            }\n                        }\n                    });\n                }\n                return 'Please enter a name for your campaign project.';\n            }\n        }\n        // Handle file selection input AFTER campaign name step\n        if (input.includes('Selected file:') && session.currentStep === 'instructions') {\n            console.log('üî• Director Agent: Processing file selection:', input);\n            console.log('üî• Director Agent: Session step:', session.currentStep);\n            const fileName = input.replace('Selected file:', '').trim();\n            console.log('üî• Director Agent: Extracted filename:', fileName);\n            session.instructionsFile = fileName;\n            // Fetch the file content\n            try {\n                var _convexMutations_getAllFiles;\n                const files = await ((_convexMutations_getAllFiles = convexMutations.getAllFiles) === null || _convexMutations_getAllFiles === void 0 ? void 0 : _convexMutations_getAllFiles.call(convexMutations)) || [];\n                console.log('üî• Director Agent: Available files count:', files.length);\n                console.log('üî• Director Agent: Available file names:', files.map((f)=>f.name));\n                // Try to find the file with or without extension\n                let instructionFile = files.find((f)=>f.name === fileName);\n                if (!instructionFile && !fileName.includes('.')) {\n                    // Try with .md extension\n                    instructionFile = files.find((f)=>f.name === fileName + '.md');\n                    console.log('üî• Director Agent: Trying with .md extension:', fileName + '.md');\n                }\n                console.log('üî• Director Agent: Found instruction file:', !!instructionFile);\n                if (instructionFile) {\n                    session.instructionsContent = instructionFile.content;\n                    session.instructionsFile = fileName; // Make sure this is set\n                    session.currentStep = 'complete'; // Set to complete after generation\n                    console.log('üî• Director Agent: Updated session step to complete');\n                    // Set default campaign settings based on instructions\n                    session.campaignName = 'EAC Marketing Campaign';\n                    session.duration = 4; // weeks\n                    session.platforms = [\n                        'twitter',\n                        'linkedin',\n                        'instagram',\n                        'facebook'\n                    ];\n                    session.postsPerDay = 3;\n                    session.campaignGoals = 'Brand awareness and lead generation based on instructions';\n                    // Immediately generate campaign\n                    const result = await this.generateCampaign(session, convexMutations, sessionId);\n                    console.log('üî• Director Agent: Campaign generation result:', result);\n                    return result;\n                } else {\n                    console.log('üî• Director Agent: File not found in files array');\n                    return 'File \"'.concat(fileName, '\" not found. Please select a valid instructions file.');\n                }\n            } catch (error) {\n                console.error('üî• Director Agent: Error loading instructions file:', error);\n                return 'Error loading instructions file. Please try again.';\n            }\n        }\n        // Step 1: Request instructions file (only if we haven't processed file selection and not complete)\n        if (session.currentStep === 'instructions' && !session.instructionsFile) {\n            if (convexMutations.storeChatMessage) {\n                await convexMutations.storeChatMessage({\n                    role: 'assistant',\n                    content: 'Campaign Director Agent\\n\\nI will help you orchestrate a comprehensive marketing campaign with 100+ posts across multiple platforms.\\n\\nStep 1: Select Instructions File\\n\\nFirst, I need to understand your campaign strategy. Please select an instructions file that contains your campaign guidelines, brand voice, or marketing strategy.\\n\\nWhat you can include in your instructions file:\\n- Brand voice and tone guidelines\\n- Target audience information\\n- Campaign objectives and KPIs\\n- Content themes and messaging\\n- Platform-specific requirements\\n- Hashtag strategies\\n- Visual guidelines\\n\\nSelect your instructions file:',\n                    sessionId,\n                    interactiveComponent: {\n                        type: 'file_selector',\n                        status: 'pending',\n                        data: {\n                            fileType: 'instructions',\n                            filterByExtension: [\n                                '.md',\n                                '.txt'\n                            ],\n                            placeholder: 'Select campaign instructions file...'\n                        }\n                    }\n                });\n            }\n            return 'Please select an instructions file to get started with your campaign.';\n        }\n        // Handle campaign configuration\n        if (session.currentStep === 'campaign-setup') {\n            if (input.toLowerCase().includes('generate default campaign') || input.toLowerCase().includes('default')) {\n                // Use default campaign settings\n                session.campaignName = 'EAC Marketing Campaign';\n                session.duration = 4; // weeks\n                session.platforms = [\n                    'twitter',\n                    'linkedin',\n                    'instagram',\n                    'facebook'\n                ];\n                session.postsPerDay = 3;\n                session.campaignGoals = 'Brand awareness and lead generation';\n                session.currentStep = 'generating';\n                return await this.generateCampaign(session, convexMutations, sessionId);\n            } else {\n                // Parse custom campaign settings from user input\n                return this.parseCampaignSettings(input, session);\n            }\n        }\n        // Handle batch generation status updates\n        if (input.includes('batch completed') || input.includes('posts generated')) {\n            return this.handleBatchCompletion(input, session);\n        }\n        return 'Campaign orchestration in progress. Use /director to start a new campaign.';\n    }\n    parseCampaignSettings(input, session) {\n        var _session_platforms;\n        // Extract campaign settings from user input\n        const lines = input.split('\\n').map((line)=>line.trim()).filter((line)=>line.length > 0);\n        for (const line of lines){\n            const lower = line.toLowerCase();\n            if (lower.includes('name:') || lower.startsWith('1.')) {\n                var _line_split_;\n                session.campaignName = ((_line_split_ = line.split(':')[1]) === null || _line_split_ === void 0 ? void 0 : _line_split_.trim()) || line.replace(/^1\\./, '').trim();\n            } else if (lower.includes('duration:') || lower.includes('weeks') || lower.startsWith('2.')) {\n                const match = line.match(/(\\d+)/);\n                if (match) session.duration = parseInt(match[1]);\n            } else if (lower.includes('platform') || lower.startsWith('3.')) {\n                const platforms = line.toLowerCase().match(/(twitter|linkedin|facebook|instagram)/g);\n                if (platforms) session.platforms = platforms;\n            } else if (lower.includes('posts per day') || lower.startsWith('4.')) {\n                const match = line.match(/(\\d+)/);\n                if (match) session.postsPerDay = parseInt(match[1]);\n            } else if (lower.includes('goals:') || lower.startsWith('5.')) {\n                var _line_split_1;\n                session.campaignGoals = ((_line_split_1 = line.split(':')[1]) === null || _line_split_1 === void 0 ? void 0 : _line_split_1.trim()) || line.replace(/^5\\./, '').trim();\n            }\n        }\n        // Validate required fields\n        if (!session.campaignName || !session.duration || !((_session_platforms = session.platforms) === null || _session_platforms === void 0 ? void 0 : _session_platforms.length)) {\n            return 'Please provide all required campaign details:\\n\\n1. Campaign Name\\n2. Duration (weeks)\\n3. Platforms\\n4. Posts per day\\n5. Goals\\n\\nOr type \"generate default campaign\" to use standard settings.';\n        }\n        session.currentStep = 'generating';\n        return \"Campaign Configuration Set:\\n\\nName: \".concat(session.campaignName, \"\\nDuration: \").concat(session.duration, \" weeks\\nPlatforms: \").concat(session.platforms.join(', '), \"\\nPosts per day: \").concat(session.postsPerDay, \"\\nGoals: \").concat(session.campaignGoals, \"\\n\\nGenerating your comprehensive campaign...\");\n    }\n    async generateCampaign(session, convexMutations, sessionId) {\n        try {\n            // Calculate total posts needed\n            const totalDays = (session.duration || 4) * 7;\n            const postsPerDay = session.postsPerDay || 3;\n            const totalPosts = totalDays * postsPerDay;\n            const platforms = session.platforms || [\n                'twitter',\n                'linkedin',\n                'instagram',\n                'facebook'\n            ];\n            // Create campaign in database\n            let campaignId;\n            try {\n                var _convexMutations_createCampaign;\n                const campaign = await ((_convexMutations_createCampaign = convexMutations.createCampaign) === null || _convexMutations_createCampaign === void 0 ? void 0 : _convexMutations_createCampaign.call(convexMutations, {\n                    name: session.campaignName || 'Generated Campaign',\n                    description: \"Auto-generated campaign: \".concat(session.campaignGoals || 'Marketing campaign'),\n                    platforms,\n                    totalPosts,\n                    startDate: new Date().toISOString().split('T')[0],\n                    endDate: new Date(Date.now() + (session.duration || 4) * 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n                    template: session.instructionsContent || ''\n                }));\n                campaignId = (campaign === null || campaign === void 0 ? void 0 : campaign._id) || \"campaign_\".concat(Date.now());\n            } catch (error) {\n                console.log('Campaign creation not available, using fallback ID');\n                campaignId = \"campaign_\".concat(Date.now());\n            }\n            // Generate posts in batches\n            const allPosts = await this.generateBatchesAsync(totalPosts, platforms, session.instructionsContent || '', campaignId, session.duration || 4);\n            // Create batches for processing\n            const batches = this.createBatches(allPosts, campaignId);\n            // Store batches in session\n            batches.forEach((batch)=>{\n                session.activeCampaigns.set(batch.campaignId, batch);\n            });\n            // Start with progress indicator\n            if (convexMutations.storeChatMessage) {\n                await convexMutations.storeChatMessage({\n                    role: 'assistant',\n                    content: \"Campaign Generation Complete!\\n\\nGenerated \".concat(totalPosts, \" posts across \").concat(platforms.length, \" platforms\\nOrganized into \").concat(batches.length, \" processing batches\\nStarting content creation and scheduling...\\n\\nCampaign ID: \").concat(campaignId, \"\\nTotal Posts: \").concat(totalPosts, \"\\nPlatforms: \").concat(platforms.join(', '), \"\\nDuration: \").concat(session.duration, \" weeks\"),\n                    sessionId,\n                    processIndicator: {\n                        type: 'continuing',\n                        processType: 'Processing Campaign Batches',\n                        color: 'blue'\n                    }\n                });\n            }\n            // Process all batches with progress updates\n            for(let i = 0; i < batches.length; i++){\n                const batch = batches[i];\n                console.log(\"\\uD83D\\uDD25 Director Agent: Processing batch \".concat(i + 1, \"/\").concat(batches.length));\n                // Update progress\n                if (convexMutations.storeChatMessage) {\n                    await convexMutations.storeChatMessage({\n                        role: 'assistant',\n                        content: \"Processing batch \".concat(i + 1, \" of \").concat(batches.length, \"... (\").concat(batch.posts.length, \" posts)\"),\n                        sessionId,\n                        processIndicator: {\n                            type: 'continuing',\n                            processType: \"Batch \".concat(i + 1, \"/\").concat(batches.length),\n                            color: 'blue'\n                        }\n                    });\n                }\n                await this.processBatch(batch, convexMutations, sessionId);\n                // Small delay between batches to prevent overwhelming the database\n                if (i < batches.length - 1) {\n                    await new Promise((resolve)=>setTimeout(resolve, 1000));\n                }\n            }\n            // Final success message\n            if (convexMutations.storeChatMessage) {\n                await convexMutations.storeChatMessage({\n                    role: 'assistant',\n                    content: \"‚úÖ Campaign Successfully Created!\\n\\n\\uD83D\\uDCCA **Campaign Summary:**\\n- **Campaign ID:** \".concat(campaignId, \"\\n- **Total Posts:** \").concat(totalPosts, \"\\n- **Platforms:** \").concat(platforms.join(', '), \"\\n- **Duration:** \").concat(session.duration, \" weeks\\n- **Batches Processed:** \").concat(batches.length, \"\\n\\n\\uD83D\\uDDD3Ô∏è All posts have been scheduled and saved to the database. Use the social media dashboard to review and manage your campaign.\"),\n                    sessionId\n                });\n            }\n            session.currentStep = 'complete';\n            return 'Campaign processing completed successfully!';\n        } catch (error) {\n            console.error('Campaign generation error:', error);\n            return \"Error generating campaign: \".concat(error instanceof Error ? error.message : 'Unknown error');\n        }\n    }\n    async generateBatchesAsync(totalPosts, platforms, instructions, campaignId, duration) {\n        const posts = [];\n        const days = [\n            'Monday',\n            'Tuesday',\n            'Wednesday',\n            'Thursday',\n            'Friday',\n            'Saturday',\n            'Sunday'\n        ];\n        for(let i = 0; i < totalPosts; i++){\n            const platform = platforms[i % platforms.length];\n            const week = Math.floor(i / (totalPosts / duration)) + 1;\n            const dayIndex = i % 7;\n            const day = days[dayIndex];\n            // Determine optimal posting time based on platform\n            const time = this.getOptimalPostTime(platform, dayIndex);\n            // Calculate post date\n            const startDate = new Date();\n            const postDate = new Date(startDate);\n            postDate.setDate(startDate.getDate() + Math.floor(i / platforms.length));\n            // Determine campaign phase based on week\n            const phases = [\n                'awareness',\n                'consideration',\n                'conversion',\n                'retention'\n            ];\n            const phaseIndex = Math.floor((week - 1) / (duration / phases.length));\n            const phase = phases[Math.min(phaseIndex, phases.length - 1)];\n            // Determine content type cyclically\n            const contentTypes = [\n                'educational',\n                'promotional',\n                'engagement',\n                'announcement'\n            ];\n            const contentType = contentTypes[i % contentTypes.length];\n            // Generate content\n            const content = this.generatePlatformContent(platform, phase, contentType, instructions, week, day);\n            posts.push({\n                platform,\n                content,\n                scheduledDate: postDate.toISOString().split('T')[0],\n                scheduledTime: time,\n                metadata: {\n                    week,\n                    dayOfWeek: day,\n                    campaignPhase: phase,\n                    contentType,\n                    hashtags: this.generateHashtags(platform, phase, contentType),\n                    campaignId,\n                    batchId: \"batch_\".concat(Math.floor(i / this.BATCH_SIZE))\n                }\n            });\n        }\n        return posts;\n    }\n    getOptimalPostTime(platform, dayIndex) {\n        const times = {\n            twitter: [\n                '09:00',\n                '12:00',\n                '15:00',\n                '18:00'\n            ],\n            linkedin: [\n                '08:00',\n                '12:00',\n                '17:00'\n            ],\n            instagram: [\n                '11:00',\n                '14:00',\n                '17:00',\n                '19:00'\n            ],\n            facebook: [\n                '09:00',\n                '13:00',\n                '15:00'\n            ]\n        };\n        const platformTimes = times[platform] || times.twitter;\n        return platformTimes[dayIndex % platformTimes.length];\n    }\n    generatePlatformContent(platform, phase, contentType, instructions, week, day) {\n        const brandVoice = this.extractBrandVoice(instructions);\n        const audience = this.extractAudience(instructions);\n        const content = \"\".concat(brandVoice, \" content for \").concat(audience, \" - Week \").concat(week, \", \").concat(day, \". Phase: \").concat(phase, \", Type: \").concat(contentType, \". Platform: \").concat(platform);\n        // Platform-specific formatting\n        switch(platform){\n            case 'twitter':\n                return content.length > 250 ? content.substring(0, 247) + '...' : content;\n            case 'linkedin':\n                return \"\".concat(content, \"\\n\\n#LinkedInEngagement #ProfessionalGrowth\");\n            case 'instagram':\n                return \"\".concat(content, \" ‚ú®\\n\\n#InstagramBusiness #VisualContent\");\n            case 'facebook':\n                return \"\".concat(content, \"\\n\\nWhat do you think? Share your thoughts below! \\uD83D\\uDC47\");\n            default:\n                return content;\n        }\n    }\n    extractBrandVoice(instructions) {\n        const voiceKeywords = [\n            'professional',\n            'friendly',\n            'innovative',\n            'trusted',\n            'expert',\n            'reliable'\n        ];\n        const lowerInstructions = instructions.toLowerCase();\n        for (const keyword of voiceKeywords){\n            if (lowerInstructions.includes(keyword)) {\n                return keyword.charAt(0).toUpperCase() + keyword.slice(1);\n            }\n        }\n        return 'Professional';\n    }\n    extractAudience(instructions) {\n        const audienceKeywords = [\n            'businesses',\n            'professionals',\n            'teams',\n            'companies',\n            'organizations',\n            'users'\n        ];\n        const lowerInstructions = instructions.toLowerCase();\n        for (const keyword of audienceKeywords){\n            if (lowerInstructions.includes(keyword)) {\n                return keyword;\n            }\n        }\n        return 'professionals';\n    }\n    generateHashtags(platform, phase, contentType) {\n        const baseHashtags = [\n            'marketing',\n            'business',\n            'growth'\n        ];\n        const phaseHashtags = {\n            awareness: [\n                'brandawareness',\n                'introduction'\n            ],\n            consideration: [\n                'solutions',\n                'evaluation'\n            ],\n            conversion: [\n                'getstarted',\n                'action'\n            ],\n            retention: [\n                'community',\n                'success'\n            ]\n        };\n        const contentHashtags = {\n            educational: [\n                'tips',\n                'learning'\n            ],\n            promotional: [\n                'offer',\n                'featured'\n            ],\n            engagement: [\n                'discussion',\n                'question'\n            ],\n            announcement: [\n                'news',\n                'update'\n            ]\n        };\n        return [\n            ...baseHashtags,\n            ...phaseHashtags[phase],\n            ...contentHashtags[contentType]\n        ].slice(0, 5);\n    }\n    createBatches(posts, campaignId) {\n        const batches = [];\n        for(let i = 0; i < posts.length; i += this.BATCH_SIZE){\n            const batchPosts = posts.slice(i, i + this.BATCH_SIZE);\n            batches.push({\n                campaignId: \"\".concat(campaignId, \"_batch_\").concat(batches.length),\n                posts: batchPosts,\n                processingStatus: 'pending',\n                processedCount: 0,\n                totalCount: batchPosts.length\n            });\n        }\n        return batches;\n    }\n    async processBatch(batch, convexMutations, sessionId) {\n        batch.processingStatus = 'processing';\n        try {\n            const postPromises = batch.posts.map(async (post)=>{\n                try {\n                    await convexMutations.upsertPost({\n                        fileName: \"\".concat(post.platform, \"_\").concat(post.metadata.week, \"_\").concat(post.metadata.dayOfWeek, \"_\").concat(Date.now()),\n                        fileType: post.platform,\n                        content: post.content,\n                        title: \"Week \".concat(post.metadata.week, \" - \").concat(post.metadata.campaignPhase),\n                        platformData: JSON.stringify({\n                            scheduledDate: post.scheduledDate,\n                            scheduledTime: post.scheduledTime,\n                            hashtags: post.metadata.hashtags,\n                            campaignId: post.metadata.campaignId,\n                            batchId: post.metadata.batchId,\n                            week: post.metadata.week,\n                            dayOfWeek: post.metadata.dayOfWeek,\n                            campaignPhase: post.metadata.campaignPhase,\n                            contentType: post.metadata.contentType\n                        }),\n                        status: 'scheduled',\n                        scheduledFor: new Date(\"\".concat(post.scheduledDate, \"T\").concat(post.scheduledTime)).getTime()\n                    });\n                    batch.processedCount++;\n                } catch (error) {\n                    console.error('Error processing post:', error);\n                }\n            });\n            await Promise.all(postPromises);\n            batch.processingStatus = 'completed';\n        } catch (error) {\n            console.error('Batch processing error:', error);\n            batch.processingStatus = 'failed';\n        }\n    }\n    handleBatchCompletion(input, session) {\n        const completedBatches = Array.from(session.activeCampaigns.values()).filter((batch)=>batch.processingStatus === 'completed');\n        const totalBatches = session.activeCampaigns.size;\n        const totalProcessed = completedBatches.reduce((sum, batch)=>sum + batch.processedCount, 0);\n        if (completedBatches.length === totalBatches) {\n            session.currentStep = 'complete';\n            return \"Campaign Complete!\\n\\nAll \".concat(totalBatches, \" batches processed successfully.\\nTotal posts created: \").concat(totalProcessed, \"\\nCampaign: \").concat(session.campaignName, \"\\n\\nYour comprehensive marketing campaign is now scheduled and ready!\");\n        }\n        return \"Progress Update:\\nCompleted: \".concat(completedBatches.length, \"/\").concat(totalBatches, \" batches\\nPosts processed: \").concat(totalProcessed, \"\\nContinuing campaign generation...\");\n    }\n    constructor(...args){\n        super(...args), this.id = 'director', this.name = 'Campaign Director', this.description = 'Orchestrates large-scale marketing campaigns with 100+ posts across multiple platforms. Integrates instruction files for brand guidelines and generates comprehensive content strategies.', this.icon = 'üé¨', this.sessions = new Map(), this.BATCH_SIZE = 10, this.MAX_CONCURRENT_BATCHES = 3, this.tools = [\n            {\n                id: 'orchestrate-campaign',\n                name: 'Orchestrate Campaign',\n                command: '/director',\n                description: 'Create and schedule a complete marketing campaign with 100+ posts across multiple platforms',\n                parameters: []\n            }\n        ];\n    }\n}\nconst directorAgent = new DirectorAgent();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3N0b3JlL2FnZW50cy9kaXJlY3RvckFnZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDBCQUEwQjtBQUMxQix5RkFBeUY7QUFFM0M7QUEwQ3ZDLE1BQU1DLHNCQUFzQkQsNENBQVNBO0lBb0IxQyxNQUFNRSxRQUFRQyxJQUFlLEVBQUVDLEtBQWEsRUFBRUMsZUFBZ0MsRUFBRUMsU0FBa0IsRUFBbUI7UUFDbkhDLFFBQVFDLEdBQUcsQ0FBQyxpREFBaURKO1FBQzdERyxRQUFRQyxHQUFHLENBQUMsa0NBQWtDRjtRQUU5QyxJQUFJLENBQUNBLFdBQVc7WUFDZCxPQUFPO1FBQ1Q7UUFFQSw0QkFBNEI7UUFDNUIsTUFBTUcsa0JBQWtCLElBQUksQ0FBQ0MsUUFBUSxDQUFDQyxHQUFHLENBQUNMO1FBQzFDQyxRQUFRQyxHQUFHLENBQUMsOENBQThDQztRQUUxRCxJQUFJLENBQUMsSUFBSSxDQUFDQyxRQUFRLENBQUNDLEdBQUcsQ0FBQ0wsWUFBWTtZQUNqQ0MsUUFBUUMsR0FBRyxDQUFDO1lBQ1osSUFBSSxDQUFDRSxRQUFRLENBQUNFLEdBQUcsQ0FBQ04sV0FBVztnQkFDM0JPLGFBQWE7Z0JBQ2JDLGlCQUFpQixJQUFJQztZQUN2QjtRQUNGO1FBRUEsTUFBTUMsVUFBVSxJQUFJLENBQUNOLFFBQVEsQ0FBQ08sR0FBRyxDQUFDWDtRQUNsQ0MsUUFBUUMsR0FBRyxDQUFDLDRDQUE0Q1EsUUFBUUgsV0FBVztRQUMzRU4sUUFBUUMsR0FBRyxDQUFDLDZDQUE2QyxDQUFDLENBQUNRLFFBQVFFLGdCQUFnQjtRQUVuRix5REFBeUQ7UUFDekQsSUFBSUYsUUFBUUgsV0FBVyxLQUFLLFlBQVk7WUFDdEMsT0FBTztRQUNUO1FBRUEsbURBQW1EO1FBQ25ELElBQUlHLFFBQVFILFdBQVcsS0FBSyxpQkFBaUI7WUFDM0MseUNBQXlDO1lBQ3pDLElBQUlULFNBQVNBLE1BQU1lLElBQUksTUFBTSxDQUFDZixNQUFNZ0IsUUFBUSxDQUFDLHFC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QUFDLENBQUNDLEtBQUs3RixRQUFVNkYsTUFBTTdGLE1BQU15RSxjQUFjLEVBQUU7UUFFM0YsSUFBSVksaUJBQWlCNUgsTUFBTSxLQUFLZ0ksY0FBYztZQUM1QzlKLFFBQVFILFdBQVcsR0FBRztZQUN0QixPQUFPLDZCQUFtR21LLE9BQXRFRixjQUFhLDJEQUFzRjlKLE9BQTdCZ0ssZ0JBQWUsZ0JBQW1DLE9BQXJCaEssUUFBUU0sWUFBWSxFQUFDO1FBQzlKO1FBRUEsT0FBTyxnQ0FBMkR3SixPQUEzQkosaUJBQWlCNUgsTUFBTSxFQUFDLEtBQTZDa0ksT0FBMUNGLGNBQWEsK0JBQTRDLE9BQWZFLGdCQUFlO0lBQzdIOztRQTNpQksscUJBQ0xsSixLQUFLLGlCQUNMTCxPQUFPLDBCQUNQQyxjQUFjLGtNQUNkeUosT0FBTyxXQUVDekssV0FBeUMsSUFBSUssWUFDcEMrRyxhQUFhLFNBQ2JzRCx5QkFBeUIsUUFFMUNDLFFBQXFCO1lBQ25CO2dCQUNFdkosSUFBSTtnQkFDSkwsTUFBTTtnQkFDTjZKLFNBQVM7Z0JBQ1Q1SixhQUFhO2dCQUNiNkosWUFBWSxFQUFFO1lBQ2hCO1NBQ0Q7O0FBMGhCSDtBQUVPLE1BQU1DLGdCQUFnQixJQUFJdkwsZ0JBQWdCIiwic291cmNlcyI6WyIvVXNlcnMvbWF0dGhld3NpbW9uL1Byb2plY3RzL2VhYy9lYWMvc3RvcmUvYWdlbnRzL2RpcmVjdG9yQWdlbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ2FtcGFpZ24gRGlyZWN0b3IgQWdlbnRcbi8vIE9yY2hlc3RyYXRlcyBsYXJnZS1zY2FsZSBtYXJrZXRpbmcgY2FtcGFpZ25zIHdpdGggMTAwKyBwb3N0cyBhY3Jvc3MgbXVsdGlwbGUgcGxhdGZvcm1zXG5cbmltcG9ydCB7IEFnZW50VG9vbCwgQmFzZUFnZW50IH0gZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7IENvbnZleE11dGF0aW9ucyB9IGZyb20gJy4vdHlwZXMnO1xuXG5pbnRlcmZhY2UgQ2FtcGFpZ25Qb3N0IHtcbiAgcGxhdGZvcm06ICd0d2l0dGVyJyB8ICdsaW5rZWRpbicgfCAnZmFjZWJvb2snIHwgJ2luc3RhZ3JhbSc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgc2NoZWR1bGVkRGF0ZTogc3RyaW5nO1xuICBzY2hlZHVsZWRUaW1lOiBzdHJpbmc7XG4gIG1ldGFkYXRhOiB7XG4gICAgd2VlazogbnVtYmVyO1xuICAgIGRheU9mV2Vlazogc3RyaW5nO1xuICAgIGNhbXBhaWduUGhhc2U6ICdhd2FyZW5lc3MnIHwgJ2NvbnNpZGVyYXRpb24nIHwgJ2NvbnZlcnNpb24nIHwgJ3JldGVudGlvbic7XG4gICAgY29udGVudFR5cGU6ICdlZHVjYXRpb25hbCcgfCAncHJvbW90aW9uYWwnIHwgJ2VuZ2FnZW1lbnQnIHwgJ2Fubm91bmNlbWVudCc7XG4gICAgaGFzaHRhZ3M6IHN0cmluZ1tdO1xuICAgIGNhbXBhaWduSWQ/OiBzdHJpbmc7XG4gICAgYmF0Y2hJZD86IHN0cmluZztcbiAgfTtcbn1cblxuaW50ZXJmYWNlIENhbXBhaWduQmF0Y2gge1xuICBjYW1wYWlnbklkOiBzdHJpbmc7XG4gIHBvc3RzOiBDYW1wYWlnblBvc3RbXTtcbiAgcHJvY2Vzc2luZ1N0YXR1czogJ3BlbmRpbmcnIHwgJ3Byb2Nlc3NpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZmFpbGVkJztcbiAgcHJvY2Vzc2VkQ291bnQ6IG51bWJlcjtcbiAgdG90YWxDb3VudDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgRGlyZWN0b3JTZXNzaW9uIHtcbiAgY2FtcGFpZ25Qcm9qZWN0SWQ/OiBzdHJpbmc7IC8vIFByb2plY3QgSUQgZm9yIHRoZSBjYW1wYWlnblxuICBjYW1wYWlnblByb2plY3ROYW1lPzogc3RyaW5nOyAvLyBVc2VyLXByb3ZpZGVkIGNhbXBhaWduIG5hbWVcbiAgaW5zdHJ1Y3Rpb25zRmlsZT86IHN0cmluZztcbiAgaW5zdHJ1Y3Rpb25zQ29udGVudD86IHN0cmluZztcbiAgY2FtcGFpZ25OYW1lPzogc3RyaW5nO1xuICBjYW1wYWlnbkdvYWxzPzogc3RyaW5nO1xuICBwbGF0Zm9ybXM/OiBzdHJpbmdbXTtcbiAgZHVyYXRpb24/OiBudW1iZXI7IC8vIHdlZWtzXG4gIHBvc3RzUGVyRGF5PzogbnVtYmVyO1xuICBjb250ZW50U3RyYXRlZ3k/OiBzdHJpbmc7XG4gIGN1cnJlbnRTdGVwOiAnY2FtcGFpZ24tbmFtZScgfCAnaW5zdHJ1Y3Rpb25zJyB8ICdjYW1wYWlnbi1zZXR1cCcgfCAnZ2VuZXJhdGluZycgfCAnc2NoZWR1bGluZycgfCAnY29tcGxldGUnO1xuICBhY3RpdmVDYW1wYWlnbnM6IE1hcDxzdHJpbmcsIENhbXBhaWduQmF0Y2g+O1xufVxuXG5leHBvcnQgY2xhc3MgRGlyZWN0b3JBZ2VudCBleHRlbmRzIEJhc2VBZ2VudCB7XG4gIGlkID0gJ2RpcmVjdG9yJztcbiAgbmFtZSA9ICdDYW1wYWlnbiBEaXJlY3Rvcic7XG4gIGRlc2NyaXB0aW9uID0gJ09yY2hlc3RyYXRlcyBsYXJnZS1zY2FsZSBtYXJrZXRpbmcgY2FtcGFpZ25zIHdpdGggMTAwKyBwb3N0cyBhY3Jvc3MgbXVsdGlwbGUgcGxhdGZvcm1zLiBJbnRlZ3JhdGVzIGluc3RydWN0aW9uIGZpbGVzIGZvciBicmFuZCBndWlkZWxpbmVzIGFuZCBnZW5lcmF0ZXMgY29tcHJlaGVuc2l2ZSBjb250ZW50IHN0cmF0ZWdpZXMuJztcbiAgaWNvbiA9ICfwn46sJztcbiAgXG4gIHByaXZhdGUgc2Vzc2lvbnM6IE1hcDxzdHJpbmcsIERpcmVjdG9yU2Vzc2lvbj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgQkFUQ0hfU0laRSA9IDEwO1xuICBwcml2YXRlIHJlYWRvbmx5IE1BWF9DT05DVVJSRU5UX0JBVENIRVMgPSAzO1xuICBcbiAgdG9vbHM6IEFnZW50VG9vbFtdID0gW1xuICAgIHtcbiAgICAgIGlkOiAnb3JjaGVzdHJhdGUtY2FtcGFpZ24nLFxuICAgICAgbmFtZTogJ09yY2hlc3RyYXRlIENhbXBhaWduJyxcbiAgICAgIGNvbW1hbmQ6ICcvZGlyZWN0b3InLFxuICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGUgYW5kIHNjaGVkdWxlIGEgY29tcGxldGUgbWFya2V0aW5nIGNhbXBhaWduIHdpdGggMTAwKyBwb3N0cyBhY3Jvc3MgbXVsdGlwbGUgcGxhdGZvcm1zJyxcbiAgICAgIHBhcmFtZXRlcnM6IFtdXG4gICAgfVxuICBdO1xuXG4gIGFzeW5jIGV4ZWN1dGUodG9vbDogQWdlbnRUb29sLCBpbnB1dDogc3RyaW5nLCBjb252ZXhNdXRhdGlvbnM6IENvbnZleE11dGF0aW9ucywgc2Vzc2lvbklkPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zb2xlLmxvZygn8J+UpSBEaXJlY3RvciBBZ2VudDogRXhlY3V0ZSBjYWxsZWQgd2l0aCBpbnB1dDonLCBpbnB1dCk7XG4gICAgY29uc29sZS5sb2coJ/CflKUgRGlyZWN0b3IgQWdlbnQ6IFNlc3Npb24gSUQ6Jywgc2Vzc2lvbklkKTtcbiAgICBcbiAgICBpZiAoIXNlc3Npb25JZCkge1xuICAgICAgcmV0dXJuICdTZXNzaW9uIElEIGlzIHJlcXVpcmVkIGZvciBjYW1wYWlnbiBvcmNoZXN0cmF0aW9uJztcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIG9yIGdldCBzZXNzaW9uXG4gICAgY29uc3QgZXhpc3RpbmdTZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5oYXMoc2Vzc2lvbklkKTtcbiAgICBjb25zb2xlLmxvZygn8J+UpSBEaXJlY3RvciBBZ2VudDogRXhpc3Rpbmcgc2Vzc2lvbiBmb3VuZDonLCBleGlzdGluZ1Nlc3Npb24pO1xuICAgIFxuICAgIGlmICghdGhpcy5zZXNzaW9ucy5oYXMoc2Vzc2lvbklkKSkge1xuICAgICAgY29uc29sZS5sb2coJ/CflKUgRGlyZWN0b3IgQWdlbnQ6IENyZWF0aW5nIG5ldyBzZXNzaW9uJyk7XG4gICAgICB0aGlzLnNlc3Npb25zLnNldChzZXNzaW9uSWQsIHtcbiAgICAgICAgY3VycmVudFN0ZXA6ICdjYW1wYWlnbi1uYW1lJyxcbiAgICAgICAgYWN0aXZlQ2FtcGFpZ25zOiBuZXcgTWFwKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKSE7XG4gICAgY29uc29sZS5sb2coJ/CflKUgRGlyZWN0b3IgQWdlbnQ6IEN1cnJlbnQgc2Vzc2lvbiBzdGVwOicsIHNlc3Npb24uY3VycmVudFN0ZXApO1xuICAgIGNvbnNvbGUubG9nKCfwn5SlIERpcmVjdG9yIEFnZW50OiBIYXMgaW5zdHJ1Y3Rpb25zIGZpbGU6JywgISFzZXNzaW9uLmluc3RydWN0aW9uc0ZpbGUpO1xuICAgIFxuICAgIC8vIElmIHNlc3Npb24gaXMgYWxyZWFkeSBjb21wbGV0ZSwgcmV0dXJuIHN1Y2Nlc3MgbWVzc2FnZVxuICAgIGlmIChzZXNzaW9uLmN1cnJlbnRTdGVwID09PSAnY29tcGxldGUnKSB7XG4gICAgICByZXR1cm4gJ0NhbXBhaWduIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBnZW5lcmF0ZWQgYW5kIHNjaGVkdWxlZCEgVXNlIGAvZGlyZWN0b3JgIHRvIHN0YXJ0IGEgbmV3IGNhbXBhaWduLic7XG4gICAgfVxuXG4gICAgLy8gU3RlcCAxOiBSZXF1ZXN0IGNhbXBhaWduIG5hbWUgYW5kIGNyZWF0ZSBwcm9qZWN0XG4gICAgaWYgKHNlc3Npb24uY3VycmVudFN0ZXAgPT09ICdjYW1wYWlnbi1uYW1lJykge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIGNhbXBhaWduIG5hbWUgaW5wdXRcbiAgICAgIGlmIChpbnB1dCAmJiBpbnB1dC50cmltKCkgJiYgIWlucHV0LmluY2x1ZGVzKCdTZWxlY3RlZCBmaWxlOicpICYmICFpbnB1dC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgY29uc3QgY2FtcGFpZ25OYW1lID0gaW5wdXQudHJpbSgpO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UpSBEaXJlY3RvciBBZ2VudDogQ3JlYXRpbmcgY2FtcGFpZ24gcHJvamVjdDonLCBjYW1wYWlnbk5hbWUpO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDcmVhdGUgdGhlIHByb2plY3QgdXNpbmcgQ29udmV4IG11dGF0aW9uc1xuICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjb252ZXhNdXRhdGlvbnMuY3JlYXRlUHJvamVjdD8uKHtcbiAgICAgICAgICAgIG5hbWU6IGNhbXBhaWduTmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgTWFya2V0aW5nIGNhbXBhaWduIHByb2plY3Q6ICR7Y2FtcGFpZ25OYW1lfWAsXG4gICAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgICAgIHNlc3Npb24uY2FtcGFpZ25Qcm9qZWN0SWQgPSAocHJvamVjdCBhcyBhbnkpLl9pZCB8fCBwcm9qZWN0LmlkIHx8IGNhbXBhaWduTmFtZTtcbiAgICAgICAgICAgIHNlc3Npb24uY2FtcGFpZ25Qcm9qZWN0TmFtZSA9IGNhbXBhaWduTmFtZTtcbiAgICAgICAgICAgIHNlc3Npb24uY3VycmVudFN0ZXAgPSAnaW5zdHJ1Y3Rpb25zJztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SlIERpcmVjdG9yIEFnZW50OiBQcm9qZWN0IGNyZWF0ZWQsIG1vdmluZyB0byBpbnN0cnVjdGlvbnMgc3RlcCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDb250aW51ZSB0byBpbnN0cnVjdGlvbnMgc3RlcFxuICAgICAgICAgICAgaWYgKGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBg4pyFIENhbXBhaWduIHByb2plY3QgXCIke2NhbXBhaWduTmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSFcXG5cXG5Ob3csIHBsZWFzZSBzZWxlY3QgYW4gaW5zdHJ1Y3Rpb25zIGZpbGUgdGhhdCBjb250YWlucyB5b3VyIGNhbXBhaWduIGd1aWRlbGluZXMsIGJyYW5kIHZvaWNlLCBvciBtYXJrZXRpbmcgc3RyYXRlZ3kuXFxuXFxuV2hhdCB5b3UgY2FuIGluY2x1ZGUgaW4geW91ciBpbnN0cnVjdGlvbnMgZmlsZTpcXG4tIEJyYW5kIHZvaWNlIGFuZCB0b25lIGd1aWRlbGluZXNcXG4tIFRhcmdldCBhdWRpZW5jZSBpbmZvcm1hdGlvblxcbi0gQ2FtcGFpZ24gb2JqZWN0aXZlcyBhbmQgS1BJc1xcbi0gQ29udGVudCB0aGVtZXMgYW5kIG1lc3NhZ2luZ1xcbi0gUGxhdGZvcm0tc3BlY2lmaWMgcmVxdWlyZW1lbnRzXFxuLSBIYXNodGFnIHN0cmF0ZWdpZXNcXG4tIFZpc3VhbCBndWlkZWxpbmVzXFxuXFxuU2VsZWN0IHlvdXIgaW5zdHJ1Y3Rpb25zIGZpbGU6YCxcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVDb21wb25lbnQ6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaWxlX3NlbGVjdG9yJyxcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBmaWxlVHlwZTogJ2luc3RydWN0aW9ucycsXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckJ5RXh0ZW5zaW9uOiBbJy5tZCcsICcudHh0J10sXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2VsZWN0IGNhbXBhaWduIGluc3RydWN0aW9ucyBmaWxlLi4uJ1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYENhbXBhaWduIHByb2plY3QgXCIke2NhbXBhaWduTmFtZX1cIiBjcmVhdGVkISBQbGVhc2Ugc2VsZWN0IGFuIGluc3RydWN0aW9ucyBmaWxlIHRvIGNvbnRpbnVlLmA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnRmFpbGVkIHRvIGNyZWF0ZSBjYW1wYWlnbiBwcm9qZWN0LiBQbGVhc2UgdHJ5IGFnYWluLic7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CflKUgRGlyZWN0b3IgQWdlbnQ6IEVycm9yIGNyZWF0aW5nIHByb2plY3Q6JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiAnRXJyb3IgY3JlYXRpbmcgY2FtcGFpZ24gcHJvamVjdC4gUGxlYXNlIHRyeSBhZ2FpbiB3aXRoIGEgZGlmZmVyZW50IG5hbWUuJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2hvdyBjYW1wYWlnbiBuYW1lIGlucHV0IHByb21wdFxuICAgICAgICBpZiAoY29udmV4TXV0YXRpb25zLnN0b3JlQ2hhdE1lc3NhZ2UpIHtcbiAgICAgICAgICBhd2FpdCBjb252ZXhNdXRhdGlvbnMuc3RvcmVDaGF0TWVzc2FnZSh7XG4gICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICfwn46sICoqQ2FtcGFpZ24gRGlyZWN0b3IgQWdlbnQqKlxcblxcbkkgd2lsbCBoZWxwIHlvdSBvcmNoZXN0cmF0ZSBhIGNvbXByZWhlbnNpdmUgbWFya2V0aW5nIGNhbXBhaWduIHdpdGggMTAwKyBwb3N0cyBhY3Jvc3MgbXVsdGlwbGUgcGxhdGZvcm1zLlxcblxcbioqU3RlcCAxOiBDcmVhdGUgQ2FtcGFpZ24gUHJvamVjdCoqXFxuXFxuRmlyc3QsIGxldFxcJ3MgY3JlYXRlIGEgZGVkaWNhdGVkIHByb2plY3QgZm9sZGVyIGZvciB5b3VyIGNhbXBhaWduLiBUaGlzIHdpbGwgb3JnYW5pemUgYWxsIHlvdXIgZ2VuZXJhdGVkIGNvbnRlbnQsIHNjaGVkdWxlcywgYW5kIGFzc2V0cy5cXG5cXG5XaGF0IHdvdWxkIHlvdSBsaWtlIHRvIG5hbWUgeW91ciBjYW1wYWlnbiBwcm9qZWN0PycsXG4gICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICBpbnRlcmFjdGl2ZUNvbXBvbmVudDoge1xuICAgICAgICAgICAgICB0eXBlOiAnZmlsZV9uYW1lX2lucHV0JyxcbiAgICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0VudGVyIGNhbXBhaWduIG5hbWUgKGUuZy4sIFwiUTQgUHJvZHVjdCBMYXVuY2hcIiwgXCJIb2xpZGF5IE1hcmtldGluZyAyMDI1XCIpJyxcbiAgICAgICAgICAgICAgICBmaWxlVHlwZTogJ3Byb2plY3QnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ1BsZWFzZSBlbnRlciBhIG5hbWUgZm9yIHlvdXIgY2FtcGFpZ24gcHJvamVjdC4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBmaWxlIHNlbGVjdGlvbiBpbnB1dCBBRlRFUiBjYW1wYWlnbiBuYW1lIHN0ZXBcbiAgICBpZiAoaW5wdXQuaW5jbHVkZXMoJ1NlbGVjdGVkIGZpbGU6JykgJiYgc2Vzc2lvbi5jdXJyZW50U3RlcCA9PT0gJ2luc3RydWN0aW9ucycpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SlIERpcmVjdG9yIEFnZW50OiBQcm9jZXNzaW5nIGZpbGUgc2VsZWN0aW9uOicsIGlucHV0KTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SlIERpcmVjdG9yIEFnZW50OiBTZXNzaW9uIHN0ZXA6Jywgc2Vzc2lvbi5jdXJyZW50U3RlcCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gaW5wdXQucmVwbGFjZSgnU2VsZWN0ZWQgZmlsZTonLCAnJykudHJpbSgpO1xuICAgICAgY29uc29sZS5sb2coJ/CflKUgRGlyZWN0b3IgQWdlbnQ6IEV4dHJhY3RlZCBmaWxlbmFtZTonLCBmaWxlTmFtZSk7XG4gICAgICBcbiAgICAgIHNlc3Npb24uaW5zdHJ1Y3Rpb25zRmlsZSA9IGZpbGVOYW1lO1xuICAgICAgXG4gICAgICAvLyBGZXRjaCB0aGUgZmlsZSBjb250ZW50XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGNvbnZleE11dGF0aW9ucy5nZXRBbGxGaWxlcz8uKCkgfHwgW107XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SlIERpcmVjdG9yIEFnZW50OiBBdmFpbGFibGUgZmlsZXMgY291bnQ6JywgZmlsZXMubGVuZ3RoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflKUgRGlyZWN0b3IgQWdlbnQ6IEF2YWlsYWJsZSBmaWxlIG5hbWVzOicsIGZpbGVzLm1hcCgoZjogYW55KSA9PiBmLm5hbWUpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIHRoZSBmaWxlIHdpdGggb3Igd2l0aG91dCBleHRlbnNpb25cbiAgICAgICAgbGV0IGluc3RydWN0aW9uRmlsZSA9IGZpbGVzLmZpbmQoKGY6IGFueSkgPT4gZi5uYW1lID09PSBmaWxlTmFtZSk7XG4gICAgICAgIGlmICghaW5zdHJ1Y3Rpb25GaWxlICYmICFmaWxlTmFtZS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAgICAgLy8gVHJ5IHdpdGggLm1kIGV4dGVuc2lvblxuICAgICAgICAgIGluc3RydWN0aW9uRmlsZSA9IGZpbGVzLmZpbmQoKGY6IGFueSkgPT4gZi5uYW1lID09PSBmaWxlTmFtZSArICcubWQnKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpSBEaXJlY3RvciBBZ2VudDogVHJ5aW5nIHdpdGggLm1kIGV4dGVuc2lvbjonLCBmaWxlTmFtZSArICcubWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygn8J+UpSBEaXJlY3RvciBBZ2VudDogRm91bmQgaW5zdHJ1Y3Rpb24gZmlsZTonLCAhIWluc3RydWN0aW9uRmlsZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb25GaWxlKSB7XG4gICAgICAgICAgc2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50ID0gaW5zdHJ1Y3Rpb25GaWxlLmNvbnRlbnQ7XG4gICAgICAgICAgc2Vzc2lvbi5pbnN0cnVjdGlvbnNGaWxlID0gZmlsZU5hbWU7IC8vIE1ha2Ugc3VyZSB0aGlzIGlzIHNldFxuICAgICAgICAgIHNlc3Npb24uY3VycmVudFN0ZXAgPSAnY29tcGxldGUnOyAvLyBTZXQgdG8gY29tcGxldGUgYWZ0ZXIgZ2VuZXJhdGlvblxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SlIERpcmVjdG9yIEFnZW50OiBVcGRhdGVkIHNlc3Npb24gc3RlcCB0byBjb21wbGV0ZScpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCBkZWZhdWx0IGNhbXBhaWduIHNldHRpbmdzIGJhc2VkIG9uIGluc3RydWN0aW9uc1xuICAgICAgICAgIHNlc3Npb24uY2FtcGFpZ25OYW1lID0gJ0VBQyBNYXJrZXRpbmcgQ2FtcGFpZ24nO1xuICAgICAgICAgIHNlc3Npb24uZHVyYXRpb24gPSA0OyAvLyB3ZWVrc1xuICAgICAgICAgIHNlc3Npb24ucGxhdGZvcm1zID0gWyd0d2l0dGVyJywgJ2xpbmtlZGluJywgJ2luc3RhZ3JhbScsICdmYWNlYm9vayddO1xuICAgICAgICAgIHNlc3Npb24ucG9zdHNQZXJEYXkgPSAzO1xuICAgICAgICAgIHNlc3Npb24uY2FtcGFpZ25Hb2FscyA9ICdCcmFuZCBhd2FyZW5lc3MgYW5kIGxlYWQgZ2VuZXJhdGlvbiBiYXNlZCBvbiBpbnN0cnVjdGlvbnMnO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEltbWVkaWF0ZWx5IGdlbmVyYXRlIGNhbXBhaWduXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUNhbXBhaWduKHNlc3Npb24sIGNvbnZleE11dGF0aW9ucywgc2Vzc2lvbklkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpSBEaXJlY3RvciBBZ2VudDogQ2FtcGFpZ24gZ2VuZXJhdGlvbiByZXN1bHQ6JywgcmVzdWx0KTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SlIERpcmVjdG9yIEFnZW50OiBGaWxlIG5vdCBmb3VuZCBpbiBmaWxlcyBhcnJheScpO1xuICAgICAgICAgIHJldHVybiBgRmlsZSBcIiR7ZmlsZU5hbWV9XCIgbm90IGZvdW5kLiBQbGVhc2Ugc2VsZWN0IGEgdmFsaWQgaW5zdHJ1Y3Rpb25zIGZpbGUuYDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+UpSBEaXJlY3RvciBBZ2VudDogRXJyb3IgbG9hZGluZyBpbnN0cnVjdGlvbnMgZmlsZTonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiAnRXJyb3IgbG9hZGluZyBpbnN0cnVjdGlvbnMgZmlsZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTdGVwIDE6IFJlcXVlc3QgaW5zdHJ1Y3Rpb25zIGZpbGUgKG9ubHkgaWYgd2UgaGF2ZW4ndCBwcm9jZXNzZWQgZmlsZSBzZWxlY3Rpb24gYW5kIG5vdCBjb21wbGV0ZSlcbiAgICBpZiAoc2Vzc2lvbi5jdXJyZW50U3RlcCA9PT0gJ2luc3RydWN0aW9ucycgJiYgIXNlc3Npb24uaW5zdHJ1Y3Rpb25zRmlsZSkge1xuICAgICAgaWYgKGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKSB7XG4gICAgICAgIGF3YWl0IGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKHtcbiAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICBjb250ZW50OiAnQ2FtcGFpZ24gRGlyZWN0b3IgQWdlbnRcXG5cXG5JIHdpbGwgaGVscCB5b3Ugb3JjaGVzdHJhdGUgYSBjb21wcmVoZW5zaXZlIG1hcmtldGluZyBjYW1wYWlnbiB3aXRoIDEwMCsgcG9zdHMgYWNyb3NzIG11bHRpcGxlIHBsYXRmb3Jtcy5cXG5cXG5TdGVwIDE6IFNlbGVjdCBJbnN0cnVjdGlvbnMgRmlsZVxcblxcbkZpcnN0LCBJIG5lZWQgdG8gdW5kZXJzdGFuZCB5b3VyIGNhbXBhaWduIHN0cmF0ZWd5LiBQbGVhc2Ugc2VsZWN0IGFuIGluc3RydWN0aW9ucyBmaWxlIHRoYXQgY29udGFpbnMgeW91ciBjYW1wYWlnbiBndWlkZWxpbmVzLCBicmFuZCB2b2ljZSwgb3IgbWFya2V0aW5nIHN0cmF0ZWd5LlxcblxcbldoYXQgeW91IGNhbiBpbmNsdWRlIGluIHlvdXIgaW5zdHJ1Y3Rpb25zIGZpbGU6XFxuLSBCcmFuZCB2b2ljZSBhbmQgdG9uZSBndWlkZWxpbmVzXFxuLSBUYXJnZXQgYXVkaWVuY2UgaW5mb3JtYXRpb25cXG4tIENhbXBhaWduIG9iamVjdGl2ZXMgYW5kIEtQSXNcXG4tIENvbnRlbnQgdGhlbWVzIGFuZCBtZXNzYWdpbmdcXG4tIFBsYXRmb3JtLXNwZWNpZmljIHJlcXVpcmVtZW50c1xcbi0gSGFzaHRhZyBzdHJhdGVnaWVzXFxuLSBWaXN1YWwgZ3VpZGVsaW5lc1xcblxcblNlbGVjdCB5b3VyIGluc3RydWN0aW9ucyBmaWxlOicsXG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgIGludGVyYWN0aXZlQ29tcG9uZW50OiB7XG4gICAgICAgICAgICB0eXBlOiAnZmlsZV9zZWxlY3RvcicsXG4gICAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgZmlsZVR5cGU6ICdpbnN0cnVjdGlvbnMnLFxuICAgICAgICAgICAgICBmaWx0ZXJCeUV4dGVuc2lvbjogWycubWQnLCAnLnR4dCddLFxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1NlbGVjdCBjYW1wYWlnbiBpbnN0cnVjdGlvbnMgZmlsZS4uLidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuICdQbGVhc2Ugc2VsZWN0IGFuIGluc3RydWN0aW9ucyBmaWxlIHRvIGdldCBzdGFydGVkIHdpdGggeW91ciBjYW1wYWlnbi4nO1xuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgY2FtcGFpZ24gY29uZmlndXJhdGlvblxuICAgIGlmIChzZXNzaW9uLmN1cnJlbnRTdGVwID09PSAnY2FtcGFpZ24tc2V0dXAnKSB7XG4gICAgICBpZiAoaW5wdXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ2VuZXJhdGUgZGVmYXVsdCBjYW1wYWlnbicpIHx8IGlucHV0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RlZmF1bHQnKSkge1xuICAgICAgICAvLyBVc2UgZGVmYXVsdCBjYW1wYWlnbiBzZXR0aW5nc1xuICAgICAgICBzZXNzaW9uLmNhbXBhaWduTmFtZSA9ICdFQUMgTWFya2V0aW5nIENhbXBhaWduJztcbiAgICAgICAgc2Vzc2lvbi5kdXJhdGlvbiA9IDQ7IC8vIHdlZWtzXG4gICAgICAgIHNlc3Npb24ucGxhdGZvcm1zID0gWyd0d2l0dGVyJywgJ2xpbmtlZGluJywgJ2luc3RhZ3JhbScsICdmYWNlYm9vayddO1xuICAgICAgICBzZXNzaW9uLnBvc3RzUGVyRGF5ID0gMztcbiAgICAgICAgc2Vzc2lvbi5jYW1wYWlnbkdvYWxzID0gJ0JyYW5kIGF3YXJlbmVzcyBhbmQgbGVhZCBnZW5lcmF0aW9uJztcbiAgICAgICAgc2Vzc2lvbi5jdXJyZW50U3RlcCA9ICdnZW5lcmF0aW5nJztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdlbmVyYXRlQ2FtcGFpZ24oc2Vzc2lvbiwgY29udmV4TXV0YXRpb25zLCBzZXNzaW9uSWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUGFyc2UgY3VzdG9tIGNhbXBhaWduIHNldHRpbmdzIGZyb20gdXNlciBpbnB1dFxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUNhbXBhaWduU2V0dGluZ3MoaW5wdXQsIHNlc3Npb24pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgYmF0Y2ggZ2VuZXJhdGlvbiBzdGF0dXMgdXBkYXRlc1xuICAgIGlmIChpbnB1dC5pbmNsdWRlcygnYmF0Y2ggY29tcGxldGVkJykgfHwgaW5wdXQuaW5jbHVkZXMoJ3Bvc3RzIGdlbmVyYXRlZCcpKSB7XG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVCYXRjaENvbXBsZXRpb24oaW5wdXQsIHNlc3Npb24pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gJ0NhbXBhaWduIG9yY2hlc3RyYXRpb24gaW4gcHJvZ3Jlc3MuIFVzZSAvZGlyZWN0b3IgdG8gc3RhcnQgYSBuZXcgY2FtcGFpZ24uJztcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VDYW1wYWlnblNldHRpbmdzKGlucHV0OiBzdHJpbmcsIHNlc3Npb246IERpcmVjdG9yU2Vzc2lvbik6IHN0cmluZyB7XG4gICAgLy8gRXh0cmFjdCBjYW1wYWlnbiBzZXR0aW5ncyBmcm9tIHVzZXIgaW5wdXRcbiAgICBjb25zdCBsaW5lcyA9IGlucHV0LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSkuZmlsdGVyKGxpbmUgPT4gbGluZS5sZW5ndGggPiAwKTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IGxvd2VyID0gbGluZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxvd2VyLmluY2x1ZGVzKCduYW1lOicpIHx8IGxvd2VyLnN0YXJ0c1dpdGgoJzEuJykpIHtcbiAgICAgICAgc2Vzc2lvbi5jYW1wYWlnbk5hbWUgPSBsaW5lLnNwbGl0KCc6JylbMV0/LnRyaW0oKSB8fCBsaW5lLnJlcGxhY2UoL14xXFwuLywgJycpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ2R1cmF0aW9uOicpIHx8IGxvd2VyLmluY2x1ZGVzKCd3ZWVrcycpIHx8IGxvd2VyLnN0YXJ0c1dpdGgoJzIuJykpIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC8oXFxkKykvKTtcbiAgICAgICAgaWYgKG1hdGNoKSBzZXNzaW9uLmR1cmF0aW9uID0gcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgfSBlbHNlIGlmIChsb3dlci5pbmNsdWRlcygncGxhdGZvcm0nKSB8fCBsb3dlci5zdGFydHNXaXRoKCczLicpKSB7XG4gICAgICAgIGNvbnN0IHBsYXRmb3JtcyA9IGxpbmUudG9Mb3dlckNhc2UoKS5tYXRjaCgvKHR3aXR0ZXJ8bGlua2VkaW58ZmFjZWJvb2t8aW5zdGFncmFtKS9nKTtcbiAgICAgICAgaWYgKHBsYXRmb3Jtcykgc2Vzc2lvbi5wbGF0Zm9ybXMgPSBwbGF0Zm9ybXM7XG4gICAgICB9IGVsc2UgaWYgKGxvd2VyLmluY2x1ZGVzKCdwb3N0cyBwZXIgZGF5JykgfHwgbG93ZXIuc3RhcnRzV2l0aCgnNC4nKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goLyhcXGQrKS8pO1xuICAgICAgICBpZiAobWF0Y2gpIHNlc3Npb24ucG9zdHNQZXJEYXkgPSBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICB9IGVsc2UgaWYgKGxvd2VyLmluY2x1ZGVzKCdnb2FsczonKSB8fCBsb3dlci5zdGFydHNXaXRoKCc1LicpKSB7XG4gICAgICAgIHNlc3Npb24uY2FtcGFpZ25Hb2FscyA9IGxpbmUuc3BsaXQoJzonKVsxXT8udHJpbSgpIHx8IGxpbmUucmVwbGFjZSgvXjVcXC4vLCAnJykudHJpbSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAoIXNlc3Npb24uY2FtcGFpZ25OYW1lIHx8ICFzZXNzaW9uLmR1cmF0aW9uIHx8ICFzZXNzaW9uLnBsYXRmb3Jtcz8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gJ1BsZWFzZSBwcm92aWRlIGFsbCByZXF1aXJlZCBjYW1wYWlnbiBkZXRhaWxzOlxcblxcbjEuIENhbXBhaWduIE5hbWVcXG4yLiBEdXJhdGlvbiAod2Vla3MpXFxuMy4gUGxhdGZvcm1zXFxuNC4gUG9zdHMgcGVyIGRheVxcbjUuIEdvYWxzXFxuXFxuT3IgdHlwZSBcImdlbmVyYXRlIGRlZmF1bHQgY2FtcGFpZ25cIiB0byB1c2Ugc3RhbmRhcmQgc2V0dGluZ3MuJztcbiAgICB9XG4gICAgXG4gICAgc2Vzc2lvbi5jdXJyZW50U3RlcCA9ICdnZW5lcmF0aW5nJztcbiAgICByZXR1cm4gYENhbXBhaWduIENvbmZpZ3VyYXRpb24gU2V0Olxcblxcbk5hbWU6ICR7c2Vzc2lvbi5jYW1wYWlnbk5hbWV9XFxuRHVyYXRpb246ICR7c2Vzc2lvbi5kdXJhdGlvbn0gd2Vla3NcXG5QbGF0Zm9ybXM6ICR7c2Vzc2lvbi5wbGF0Zm9ybXMuam9pbignLCAnKX1cXG5Qb3N0cyBwZXIgZGF5OiAke3Nlc3Npb24ucG9zdHNQZXJEYXl9XFxuR29hbHM6ICR7c2Vzc2lvbi5jYW1wYWlnbkdvYWxzfVxcblxcbkdlbmVyYXRpbmcgeW91ciBjb21wcmVoZW5zaXZlIGNhbXBhaWduLi4uYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVDYW1wYWlnbihzZXNzaW9uOiBEaXJlY3RvclNlc3Npb24sIGNvbnZleE11dGF0aW9uczogQ29udmV4TXV0YXRpb25zLCBzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBwb3N0cyBuZWVkZWRcbiAgICAgIGNvbnN0IHRvdGFsRGF5cyA9IChzZXNzaW9uLmR1cmF0aW9uIHx8IDQpICogNztcbiAgICAgIGNvbnN0IHBvc3RzUGVyRGF5ID0gc2Vzc2lvbi5wb3N0c1BlckRheSB8fCAzO1xuICAgICAgY29uc3QgdG90YWxQb3N0cyA9IHRvdGFsRGF5cyAqIHBvc3RzUGVyRGF5O1xuICAgICAgY29uc3QgcGxhdGZvcm1zID0gc2Vzc2lvbi5wbGF0Zm9ybXMgfHwgWyd0d2l0dGVyJywgJ2xpbmtlZGluJywgJ2luc3RhZ3JhbScsICdmYWNlYm9vayddO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgY2FtcGFpZ24gaW4gZGF0YWJhc2VcbiAgICAgIGxldCBjYW1wYWlnbklkOiBzdHJpbmc7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjYW1wYWlnbiA9IGF3YWl0IGNvbnZleE11dGF0aW9ucy5jcmVhdGVDYW1wYWlnbj8uKHtcbiAgICAgICAgICBuYW1lOiBzZXNzaW9uLmNhbXBhaWduTmFtZSB8fCAnR2VuZXJhdGVkIENhbXBhaWduJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEF1dG8tZ2VuZXJhdGVkIGNhbXBhaWduOiAke3Nlc3Npb24uY2FtcGFpZ25Hb2FscyB8fCAnTWFya2V0aW5nIGNhbXBhaWduJ31gLFxuICAgICAgICAgIHBsYXRmb3JtcyxcbiAgICAgICAgICB0b3RhbFBvc3RzLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICAgICAgZW5kRGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIChzZXNzaW9uLmR1cmF0aW9uIHx8IDQpICogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgICB0ZW1wbGF0ZTogc2Vzc2lvbi5pbnN0cnVjdGlvbnNDb250ZW50IHx8ICcnXG4gICAgICAgIH0pO1xuICAgICAgICBjYW1wYWlnbklkID0gY2FtcGFpZ24/Ll9pZCB8fCBgY2FtcGFpZ25fJHtEYXRlLm5vdygpfWA7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnQ2FtcGFpZ24gY3JlYXRpb24gbm90IGF2YWlsYWJsZSwgdXNpbmcgZmFsbGJhY2sgSUQnKTtcbiAgICAgICAgY2FtcGFpZ25JZCA9IGBjYW1wYWlnbl8ke0RhdGUubm93KCl9YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgcG9zdHMgaW4gYmF0Y2hlc1xuICAgICAgY29uc3QgYWxsUG9zdHMgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQmF0Y2hlc0FzeW5jKFxuICAgICAgICB0b3RhbFBvc3RzLFxuICAgICAgICBwbGF0Zm9ybXMsXG4gICAgICAgIHNlc3Npb24uaW5zdHJ1Y3Rpb25zQ29udGVudCB8fCAnJyxcbiAgICAgICAgY2FtcGFpZ25JZCxcbiAgICAgICAgc2Vzc2lvbi5kdXJhdGlvbiB8fCA0XG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYmF0Y2hlcyBmb3IgcHJvY2Vzc2luZ1xuICAgICAgY29uc3QgYmF0Y2hlcyA9IHRoaXMuY3JlYXRlQmF0Y2hlcyhhbGxQb3N0cywgY2FtcGFpZ25JZCk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGJhdGNoZXMgaW4gc2Vzc2lvblxuICAgICAgYmF0Y2hlcy5mb3JFYWNoKGJhdGNoID0+IHtcbiAgICAgICAgc2Vzc2lvbi5hY3RpdmVDYW1wYWlnbnMuc2V0KGJhdGNoLmNhbXBhaWduSWQsIGJhdGNoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdGFydCB3aXRoIHByb2dyZXNzIGluZGljYXRvclxuICAgICAgaWYgKGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKSB7XG4gICAgICAgIGF3YWl0IGNvbnZleE11dGF0aW9ucy5zdG9yZUNoYXRNZXNzYWdlKHtcbiAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICBjb250ZW50OiBgQ2FtcGFpZ24gR2VuZXJhdGlvbiBDb21wbGV0ZSFcXG5cXG5HZW5lcmF0ZWQgJHt0b3RhbFBvc3RzfSBwb3N0cyBhY3Jvc3MgJHtwbGF0Zm9ybXMubGVuZ3RofSBwbGF0Zm9ybXNcXG5Pcmdhbml6ZWQgaW50byAke2JhdGNoZXMubGVuZ3RofSBwcm9jZXNzaW5nIGJhdGNoZXNcXG5TdGFydGluZyBjb250ZW50IGNyZWF0aW9uIGFuZCBzY2hlZHVsaW5nLi4uXFxuXFxuQ2FtcGFpZ24gSUQ6ICR7Y2FtcGFpZ25JZH1cXG5Ub3RhbCBQb3N0czogJHt0b3RhbFBvc3RzfVxcblBsYXRmb3JtczogJHtwbGF0Zm9ybXMuam9pbignLCAnKX1cXG5EdXJhdGlvbjogJHtzZXNzaW9uLmR1cmF0aW9ufSB3ZWVrc2AsXG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgIHByb2Nlc3NJbmRpY2F0b3I6IHtcbiAgICAgICAgICAgIHR5cGU6ICdjb250aW51aW5nJyxcbiAgICAgICAgICAgIHByb2Nlc3NUeXBlOiAnUHJvY2Vzc2luZyBDYW1wYWlnbiBCYXRjaGVzJyxcbiAgICAgICAgICAgIGNvbG9yOiAnYmx1ZSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBQcm9jZXNzIGFsbCBiYXRjaGVzIHdpdGggcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gYmF0Y2hlc1tpXTtcbiAgICAgICAgY29uc29sZS5sb2coYPCflKUgRGlyZWN0b3IgQWdlbnQ6IFByb2Nlc3NpbmcgYmF0Y2ggJHtpICsgMX0vJHtiYXRjaGVzLmxlbmd0aH1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBwcm9ncmVzc1xuICAgICAgICBpZiAoY29udmV4TXV0YXRpb25zLnN0b3JlQ2hhdE1lc3NhZ2UpIHtcbiAgICAgICAgICBhd2FpdCBjb252ZXhNdXRhdGlvbnMuc3RvcmVDaGF0TWVzc2FnZSh7XG4gICAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGBQcm9jZXNzaW5nIGJhdGNoICR7aSArIDF9IG9mICR7YmF0Y2hlcy5sZW5ndGh9Li4uICgke2JhdGNoLnBvc3RzLmxlbmd0aH0gcG9zdHMpYCxcbiAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgIHByb2Nlc3NJbmRpY2F0b3I6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ2NvbnRpbnVpbmcnLFxuICAgICAgICAgICAgICBwcm9jZXNzVHlwZTogYEJhdGNoICR7aSArIDF9LyR7YmF0Y2hlcy5sZW5ndGh9YCxcbiAgICAgICAgICAgICAgY29sb3I6ICdibHVlJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NCYXRjaChiYXRjaCwgY29udmV4TXV0YXRpb25zLCBzZXNzaW9uSWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gU21hbGwgZGVsYXkgYmV0d2VlbiBiYXRjaGVzIHRvIHByZXZlbnQgb3ZlcndoZWxtaW5nIHRoZSBkYXRhYmFzZVxuICAgICAgICBpZiAoaSA8IGJhdGNoZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmluYWwgc3VjY2VzcyBtZXNzYWdlXG4gICAgICBpZiAoY29udmV4TXV0YXRpb25zLnN0b3JlQ2hhdE1lc3NhZ2UpIHtcbiAgICAgICAgYXdhaXQgY29udmV4TXV0YXRpb25zLnN0b3JlQ2hhdE1lc3NhZ2Uoe1xuICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgIGNvbnRlbnQ6IGDinIUgQ2FtcGFpZ24gU3VjY2Vzc2Z1bGx5IENyZWF0ZWQhXFxuXFxu8J+TiiAqKkNhbXBhaWduIFN1bW1hcnk6KipcXG4tICoqQ2FtcGFpZ24gSUQ6KiogJHtjYW1wYWlnbklkfVxcbi0gKipUb3RhbCBQb3N0czoqKiAke3RvdGFsUG9zdHN9XFxuLSAqKlBsYXRmb3JtczoqKiAke3BsYXRmb3Jtcy5qb2luKCcsICcpfVxcbi0gKipEdXJhdGlvbjoqKiAke3Nlc3Npb24uZHVyYXRpb259IHdlZWtzXFxuLSAqKkJhdGNoZXMgUHJvY2Vzc2VkOioqICR7YmF0Y2hlcy5sZW5ndGh9XFxuXFxu8J+Xk++4jyBBbGwgcG9zdHMgaGF2ZSBiZWVuIHNjaGVkdWxlZCBhbmQgc2F2ZWQgdG8gdGhlIGRhdGFiYXNlLiBVc2UgdGhlIHNvY2lhbCBtZWRpYSBkYXNoYm9hcmQgdG8gcmV2aWV3IGFuZCBtYW5hZ2UgeW91ciBjYW1wYWlnbi5gLFxuICAgICAgICAgIHNlc3Npb25JZFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgc2Vzc2lvbi5jdXJyZW50U3RlcCA9ICdjb21wbGV0ZSc7XG4gICAgICBcbiAgICAgIHJldHVybiAnQ2FtcGFpZ24gcHJvY2Vzc2luZyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5ISc7ICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDYW1wYWlnbiBnZW5lcmF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBgRXJyb3IgZ2VuZXJhdGluZyBjYW1wYWlnbjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVCYXRjaGVzQXN5bmMoXG4gICAgdG90YWxQb3N0czogbnVtYmVyLFxuICAgIHBsYXRmb3Jtczogc3RyaW5nW10sXG4gICAgaW5zdHJ1Y3Rpb25zOiBzdHJpbmcsXG4gICAgY2FtcGFpZ25JZDogc3RyaW5nLFxuICAgIGR1cmF0aW9uOiBudW1iZXJcbiAgKTogUHJvbWlzZTxDYW1wYWlnblBvc3RbXT4ge1xuICAgIGNvbnN0IHBvc3RzOiBDYW1wYWlnblBvc3RbXSA9IFtdO1xuICAgIFxuICAgIGNvbnN0IGRheXMgPSBbJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknLCAnU3VuZGF5J107XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFBvc3RzOyBpKyspIHtcbiAgICAgIGNvbnN0IHBsYXRmb3JtID0gcGxhdGZvcm1zW2kgJSBwbGF0Zm9ybXMubGVuZ3RoXSBhcyBhbnk7XG4gICAgICBjb25zdCB3ZWVrID0gTWF0aC5mbG9vcihpIC8gKHRvdGFsUG9zdHMgLyBkdXJhdGlvbikpICsgMTtcbiAgICAgIGNvbnN0IGRheUluZGV4ID0gaSAlIDc7XG4gICAgICBjb25zdCBkYXkgPSBkYXlzW2RheUluZGV4XTtcbiAgICAgIFxuICAgICAgLy8gRGV0ZXJtaW5lIG9wdGltYWwgcG9zdGluZyB0aW1lIGJhc2VkIG9uIHBsYXRmb3JtXG4gICAgICBjb25zdCB0aW1lID0gdGhpcy5nZXRPcHRpbWFsUG9zdFRpbWUocGxhdGZvcm0sIGRheUluZGV4KTtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHBvc3QgZGF0ZVxuICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IHBvc3REYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgICAgIHBvc3REYXRlLnNldERhdGUoc3RhcnREYXRlLmdldERhdGUoKSArIE1hdGguZmxvb3IoaSAvIHBsYXRmb3Jtcy5sZW5ndGgpKTtcbiAgICAgIFxuICAgICAgLy8gRGV0ZXJtaW5lIGNhbXBhaWduIHBoYXNlIGJhc2VkIG9uIHdlZWtcbiAgICAgIGNvbnN0IHBoYXNlcyA9IFsnYXdhcmVuZXNzJywgJ2NvbnNpZGVyYXRpb24nLCAnY29udmVyc2lvbicsICdyZXRlbnRpb24nXSBhcyBjb25zdDtcbiAgICAgIGNvbnN0IHBoYXNlSW5kZXggPSBNYXRoLmZsb29yKCh3ZWVrIC0gMSkgLyAoZHVyYXRpb24gLyBwaGFzZXMubGVuZ3RoKSk7XG4gICAgICBjb25zdCBwaGFzZSA9IHBoYXNlc1tNYXRoLm1pbihwaGFzZUluZGV4LCBwaGFzZXMubGVuZ3RoIC0gMSldO1xuICAgICAgXG4gICAgICAvLyBEZXRlcm1pbmUgY29udGVudCB0eXBlIGN5Y2xpY2FsbHlcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlcyA9IFsnZWR1Y2F0aW9uYWwnLCAncHJvbW90aW9uYWwnLCAnZW5nYWdlbWVudCcsICdhbm5vdW5jZW1lbnQnXSBhcyBjb25zdDtcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gY29udGVudFR5cGVzW2kgJSBjb250ZW50VHlwZXMubGVuZ3RoXTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgY29udGVudFxuICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuZ2VuZXJhdGVQbGF0Zm9ybUNvbnRlbnQocGxhdGZvcm0sIHBoYXNlLCBjb250ZW50VHlwZSwgaW5zdHJ1Y3Rpb25zLCB3ZWVrLCBkYXkpO1xuICAgICAgXG4gICAgICBwb3N0cy5wdXNoKHtcbiAgICAgICAgcGxhdGZvcm0sXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHNjaGVkdWxlZERhdGU6IHBvc3REYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgc2NoZWR1bGVkVGltZTogdGltZSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICB3ZWVrLFxuICAgICAgICAgIGRheU9mV2VlazogZGF5LFxuICAgICAgICAgIGNhbXBhaWduUGhhc2U6IHBoYXNlLFxuICAgICAgICAgIGNvbnRlbnRUeXBlLFxuICAgICAgICAgIGhhc2h0YWdzOiB0aGlzLmdlbmVyYXRlSGFzaHRhZ3MocGxhdGZvcm0sIHBoYXNlLCBjb250ZW50VHlwZSksXG4gICAgICAgICAgY2FtcGFpZ25JZCxcbiAgICAgICAgICBiYXRjaElkOiBgYmF0Y2hfJHtNYXRoLmZsb29yKGkgLyB0aGlzLkJBVENIX1NJWkUpfWBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBwb3N0cztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0T3B0aW1hbFBvc3RUaW1lKHBsYXRmb3JtOiBzdHJpbmcsIGRheUluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRpbWVzID0ge1xuICAgICAgdHdpdHRlcjogWycwOTowMCcsICcxMjowMCcsICcxNTowMCcsICcxODowMCddLFxuICAgICAgbGlua2VkaW46IFsnMDg6MDAnLCAnMTI6MDAnLCAnMTc6MDAnXSxcbiAgICAgIGluc3RhZ3JhbTogWycxMTowMCcsICcxNDowMCcsICcxNzowMCcsICcxOTowMCddLFxuICAgICAgZmFjZWJvb2s6IFsnMDk6MDAnLCAnMTM6MDAnLCAnMTU6MDAnXVxuICAgIH07XG4gICAgXG4gICAgY29uc3QgcGxhdGZvcm1UaW1lcyA9IHRpbWVzW3BsYXRmb3JtIGFzIGtleW9mIHR5cGVvZiB0aW1lc10gfHwgdGltZXMudHdpdHRlcjtcbiAgICByZXR1cm4gcGxhdGZvcm1UaW1lc1tkYXlJbmRleCAlIHBsYXRmb3JtVGltZXMubGVuZ3RoXTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVQbGF0Zm9ybUNvbnRlbnQocGxhdGZvcm06IHN0cmluZywgcGhhc2U6IHN0cmluZywgY29udGVudFR5cGU6IHN0cmluZywgaW5zdHJ1Y3Rpb25zOiBzdHJpbmcsIHdlZWs6IG51bWJlciwgZGF5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJyYW5kVm9pY2UgPSB0aGlzLmV4dHJhY3RCcmFuZFZvaWNlKGluc3RydWN0aW9ucyk7XG4gICAgY29uc3QgYXVkaWVuY2UgPSB0aGlzLmV4dHJhY3RBdWRpZW5jZShpbnN0cnVjdGlvbnMpO1xuICAgIFxuICAgIGNvbnN0IGNvbnRlbnQgPSBgJHticmFuZFZvaWNlfSBjb250ZW50IGZvciAke2F1ZGllbmNlfSAtIFdlZWsgJHt3ZWVrfSwgJHtkYXl9LiBQaGFzZTogJHtwaGFzZX0sIFR5cGU6ICR7Y29udGVudFR5cGV9LiBQbGF0Zm9ybTogJHtwbGF0Zm9ybX1gO1xuICAgIFxuICAgIC8vIFBsYXRmb3JtLXNwZWNpZmljIGZvcm1hdHRpbmdcbiAgICBzd2l0Y2ggKHBsYXRmb3JtKSB7XG4gICAgICBjYXNlICd0d2l0dGVyJzpcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID4gMjUwID8gY29udGVudC5zdWJzdHJpbmcoMCwgMjQ3KSArICcuLi4nIDogY29udGVudDtcbiAgICAgIGNhc2UgJ2xpbmtlZGluJzpcbiAgICAgICAgcmV0dXJuIGAke2NvbnRlbnR9XFxuXFxuI0xpbmtlZEluRW5nYWdlbWVudCAjUHJvZmVzc2lvbmFsR3Jvd3RoYDtcbiAgICAgIGNhc2UgJ2luc3RhZ3JhbSc6XG4gICAgICAgIHJldHVybiBgJHtjb250ZW50fSDinKhcXG5cXG4jSW5zdGFncmFtQnVzaW5lc3MgI1Zpc3VhbENvbnRlbnRgO1xuICAgICAgY2FzZSAnZmFjZWJvb2snOlxuICAgICAgICByZXR1cm4gYCR7Y29udGVudH1cXG5cXG5XaGF0IGRvIHlvdSB0aGluaz8gU2hhcmUgeW91ciB0aG91Z2h0cyBiZWxvdyEg8J+Rh2A7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RCcmFuZFZvaWNlKGluc3RydWN0aW9uczogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB2b2ljZUtleXdvcmRzID0gWydwcm9mZXNzaW9uYWwnLCAnZnJpZW5kbHknLCAnaW5ub3ZhdGl2ZScsICd0cnVzdGVkJywgJ2V4cGVydCcsICdyZWxpYWJsZSddO1xuICAgIGNvbnN0IGxvd2VySW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBrZXl3b3JkIG9mIHZvaWNlS2V5d29yZHMpIHtcbiAgICAgIGlmIChsb3dlckluc3RydWN0aW9ucy5pbmNsdWRlcyhrZXl3b3JkKSkge1xuICAgICAgICByZXR1cm4ga2V5d29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGtleXdvcmQuc2xpY2UoMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnUHJvZmVzc2lvbmFsJztcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdEF1ZGllbmNlKGluc3RydWN0aW9uczogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBhdWRpZW5jZUtleXdvcmRzID0gWydidXNpbmVzc2VzJywgJ3Byb2Zlc3Npb25hbHMnLCAndGVhbXMnLCAnY29tcGFuaWVzJywgJ29yZ2FuaXphdGlvbnMnLCAndXNlcnMnXTtcbiAgICBjb25zdCBsb3dlckluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy50b0xvd2VyQ2FzZSgpO1xuICAgIFxuICAgIGZvciAoY29uc3Qga2V5d29yZCBvZiBhdWRpZW5jZUtleXdvcmRzKSB7XG4gICAgICBpZiAobG93ZXJJbnN0cnVjdGlvbnMuaW5jbHVkZXMoa2V5d29yZCkpIHtcbiAgICAgICAgcmV0dXJuIGtleXdvcmQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAncHJvZmVzc2lvbmFscyc7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlSGFzaHRhZ3MocGxhdGZvcm06IHN0cmluZywgcGhhc2U6IHN0cmluZywgY29udGVudFR5cGU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBiYXNlSGFzaHRhZ3MgPSBbJ21hcmtldGluZycsICdidXNpbmVzcycsICdncm93dGgnXTtcbiAgICBjb25zdCBwaGFzZUhhc2h0YWdzID0ge1xuICAgICAgYXdhcmVuZXNzOiBbJ2JyYW5kYXdhcmVuZXNzJywgJ2ludHJvZHVjdGlvbiddLFxuICAgICAgY29uc2lkZXJhdGlvbjogWydzb2x1dGlvbnMnLCAnZXZhbHVhdGlvbiddLFxuICAgICAgY29udmVyc2lvbjogWydnZXRzdGFydGVkJywgJ2FjdGlvbiddLFxuICAgICAgcmV0ZW50aW9uOiBbJ2NvbW11bml0eScsICdzdWNjZXNzJ11cbiAgICB9O1xuICAgIGNvbnN0IGNvbnRlbnRIYXNodGFncyA9IHtcbiAgICAgIGVkdWNhdGlvbmFsOiBbJ3RpcHMnLCAnbGVhcm5pbmcnXSxcbiAgICAgIHByb21vdGlvbmFsOiBbJ29mZmVyJywgJ2ZlYXR1cmVkJ10sXG4gICAgICBlbmdhZ2VtZW50OiBbJ2Rpc2N1c3Npb24nLCAncXVlc3Rpb24nXSxcbiAgICAgIGFubm91bmNlbWVudDogWyduZXdzJywgJ3VwZGF0ZSddXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gW1xuICAgICAgLi4uYmFzZUhhc2h0YWdzLFxuICAgICAgLi4ucGhhc2VIYXNodGFnc1twaGFzZSBhcyBrZXlvZiB0eXBlb2YgcGhhc2VIYXNodGFnc10sXG4gICAgICAuLi5jb250ZW50SGFzaHRhZ3NbY29udGVudFR5cGUgYXMga2V5b2YgdHlwZW9mIGNvbnRlbnRIYXNodGFnc11cbiAgICBdLnNsaWNlKDAsIDUpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVCYXRjaGVzKHBvc3RzOiBDYW1wYWlnblBvc3RbXSwgY2FtcGFpZ25JZDogc3RyaW5nKTogQ2FtcGFpZ25CYXRjaFtdIHtcbiAgICBjb25zdCBiYXRjaGVzOiBDYW1wYWlnbkJhdGNoW10gPSBbXTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3RzLmxlbmd0aDsgaSArPSB0aGlzLkJBVENIX1NJWkUpIHtcbiAgICAgIGNvbnN0IGJhdGNoUG9zdHMgPSBwb3N0cy5zbGljZShpLCBpICsgdGhpcy5CQVRDSF9TSVpFKTtcbiAgICAgIGJhdGNoZXMucHVzaCh7XG4gICAgICAgIGNhbXBhaWduSWQ6IGAke2NhbXBhaWduSWR9X2JhdGNoXyR7YmF0Y2hlcy5sZW5ndGh9YCxcbiAgICAgICAgcG9zdHM6IGJhdGNoUG9zdHMsXG4gICAgICAgIHByb2Nlc3NpbmdTdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgcHJvY2Vzc2VkQ291bnQ6IDAsXG4gICAgICAgIHRvdGFsQ291bnQ6IGJhdGNoUG9zdHMubGVuZ3RoXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGJhdGNoZXM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NCYXRjaChiYXRjaDogQ2FtcGFpZ25CYXRjaCwgY29udmV4TXV0YXRpb25zOiBDb252ZXhNdXRhdGlvbnMsIHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYmF0Y2gucHJvY2Vzc2luZ1N0YXR1cyA9ICdwcm9jZXNzaW5nJztcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcG9zdFByb21pc2VzID0gYmF0Y2gucG9zdHMubWFwKGFzeW5jIChwb3N0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgY29udmV4TXV0YXRpb25zLnVwc2VydFBvc3Qoe1xuICAgICAgICAgICAgZmlsZU5hbWU6IGAke3Bvc3QucGxhdGZvcm19XyR7cG9zdC5tZXRhZGF0YS53ZWVrfV8ke3Bvc3QubWV0YWRhdGEuZGF5T2ZXZWVrfV8ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgIGZpbGVUeXBlOiBwb3N0LnBsYXRmb3JtIGFzIGFueSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHBvc3QuY29udGVudCxcbiAgICAgICAgICAgIHRpdGxlOiBgV2VlayAke3Bvc3QubWV0YWRhdGEud2Vla30gLSAke3Bvc3QubWV0YWRhdGEuY2FtcGFpZ25QaGFzZX1gLFxuICAgICAgICAgICAgcGxhdGZvcm1EYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIHNjaGVkdWxlZERhdGU6IHBvc3Quc2NoZWR1bGVkRGF0ZSxcbiAgICAgICAgICAgICAgc2NoZWR1bGVkVGltZTogcG9zdC5zY2hlZHVsZWRUaW1lLFxuICAgICAgICAgICAgICBoYXNodGFnczogcG9zdC5tZXRhZGF0YS5oYXNodGFncyxcbiAgICAgICAgICAgICAgY2FtcGFpZ25JZDogcG9zdC5tZXRhZGF0YS5jYW1wYWlnbklkLFxuICAgICAgICAgICAgICBiYXRjaElkOiBwb3N0Lm1ldGFkYXRhLmJhdGNoSWQsXG4gICAgICAgICAgICAgIHdlZWs6IHBvc3QubWV0YWRhdGEud2VlayxcbiAgICAgICAgICAgICAgZGF5T2ZXZWVrOiBwb3N0Lm1ldGFkYXRhLmRheU9mV2VlayxcbiAgICAgICAgICAgICAgY2FtcGFpZ25QaGFzZTogcG9zdC5tZXRhZGF0YS5jYW1wYWlnblBoYXNlLFxuICAgICAgICAgICAgICBjb250ZW50VHlwZTogcG9zdC5tZXRhZGF0YS5jb250ZW50VHlwZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzdGF0dXM6ICdzY2hlZHVsZWQnLFxuICAgICAgICAgICAgc2NoZWR1bGVkRm9yOiBuZXcgRGF0ZShgJHtwb3N0LnNjaGVkdWxlZERhdGV9VCR7cG9zdC5zY2hlZHVsZWRUaW1lfWApLmdldFRpbWUoKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGJhdGNoLnByb2Nlc3NlZENvdW50Kys7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBwb3N0OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHBvc3RQcm9taXNlcyk7XG4gICAgICBiYXRjaC5wcm9jZXNzaW5nU3RhdHVzID0gJ2NvbXBsZXRlZCc7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQmF0Y2ggcHJvY2Vzc2luZyBlcnJvcjonLCBlcnJvcik7XG4gICAgICBiYXRjaC5wcm9jZXNzaW5nU3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCYXRjaENvbXBsZXRpb24oaW5wdXQ6IHN0cmluZywgc2Vzc2lvbjogRGlyZWN0b3JTZXNzaW9uKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb21wbGV0ZWRCYXRjaGVzID0gQXJyYXkuZnJvbShzZXNzaW9uLmFjdGl2ZUNhbXBhaWducy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoYmF0Y2ggPT4gYmF0Y2gucHJvY2Vzc2luZ1N0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpO1xuICAgIFxuICAgIGNvbnN0IHRvdGFsQmF0Y2hlcyA9IHNlc3Npb24uYWN0aXZlQ2FtcGFpZ25zLnNpemU7XG4gICAgY29uc3QgdG90YWxQcm9jZXNzZWQgPSBjb21wbGV0ZWRCYXRjaGVzLnJlZHVjZSgoc3VtLCBiYXRjaCkgPT4gc3VtICsgYmF0Y2gucHJvY2Vzc2VkQ291bnQsIDApO1xuICAgIFxuICAgIGlmIChjb21wbGV0ZWRCYXRjaGVzLmxlbmd0aCA9PT0gdG90YWxCYXRjaGVzKSB7XG4gICAgICBzZXNzaW9uLmN1cnJlbnRTdGVwID0gJ2NvbXBsZXRlJztcbiAgICAgIHJldHVybiBgQ2FtcGFpZ24gQ29tcGxldGUhXFxuXFxuQWxsICR7dG90YWxCYXRjaGVzfSBiYXRjaGVzIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHkuXFxuVG90YWwgcG9zdHMgY3JlYXRlZDogJHt0b3RhbFByb2Nlc3NlZH1cXG5DYW1wYWlnbjogJHtzZXNzaW9uLmNhbXBhaWduTmFtZX1cXG5cXG5Zb3VyIGNvbXByZWhlbnNpdmUgbWFya2V0aW5nIGNhbXBhaWduIGlzIG5vdyBzY2hlZHVsZWQgYW5kIHJlYWR5IWA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBgUHJvZ3Jlc3MgVXBkYXRlOlxcbkNvbXBsZXRlZDogJHtjb21wbGV0ZWRCYXRjaGVzLmxlbmd0aH0vJHt0b3RhbEJhdGNoZXN9IGJhdGNoZXNcXG5Qb3N0cyBwcm9jZXNzZWQ6ICR7dG90YWxQcm9jZXNzZWR9XFxuQ29udGludWluZyBjYW1wYWlnbiBnZW5lcmF0aW9uLi4uYDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZGlyZWN0b3JBZ2VudCA9IG5ldyBEaXJlY3RvckFnZW50KCk7XG4iXSwibmFtZXMiOlsiQmFzZUFnZW50IiwiRGlyZWN0b3JBZ2VudCIsImV4ZWN1dGUiLCJ0b29sIiwiaW5wdXQiLCJjb252ZXhNdXRhdGlvbnMiLCJzZXNzaW9uSWQiLCJjb25zb2xlIiwibG9nIiwiZXhpc3RpbmdTZXNzaW9uIiwic2Vzc2lvbnMiLCJoYXMiLCJzZXQiLCJjdXJyZW50U3RlcCIsImFjdGl2ZUNhbXBhaWducyIsIk1hcCIsInNlc3Npb24iLCJnZXQiLCJpbnN0cnVjdGlvbnNGaWxlIiwidHJpbSIsImluY2x1ZGVzIiwic3RhcnRzV2l0aCIsImNhbXBhaWduTmFtZSIsInByb2plY3QiLCJjcmVhdGVQcm9qZWN0IiwibmFtZSIsImRlc2NyaXB0aW9uIiwic3RhdHVzIiwiY2FtcGFpZ25Qcm9qZWN0SWQiLCJfaWQiLCJpZCIsImNhbXBhaWduUHJvamVjdE5hbWUiLCJzdG9yZUNoYXRNZXNzYWdlIiwicm9sZSIsImNvbnRlbnQiLCJpbnRlcmFjdGl2ZUNvbXBvbmVudCIsInR5cGUiLCJkYXRhIiwiZmlsZVR5cGUiLCJmaWx0ZXJCeUV4dGVuc2lvbiIsInBsYWNlaG9sZGVyIiwiZXJyb3IiLCJmaWxlTmFtZSIsInJlcGxhY2UiLCJmaWxlcyIsImdldEFsbEZpbGVzIiwibGVuZ3RoIiwibWFwIiwiZiIsImluc3RydWN0aW9uRmlsZSIsImZpbmQiLCJpbnN0cnVjdGlvbnNDb250ZW50IiwiZHVyYXRpb24iLCJwbGF0Zm9ybXMiLCJwb3N0c1BlckRheSIsImNhbXBhaWduR29hbHMiLCJyZXN1bHQiLCJnZW5lcmF0ZUNhbXBhaWduIiwidG9Mb3dlckNhc2UiLCJwYXJzZUNhbXBhaWduU2V0dGluZ3MiLCJoYW5kbGVCYXRjaENvbXBsZXRpb24iLCJsaW5lcyIsInNwbGl0IiwibGluZSIsImZpbHRlciIsImxvd2VyIiwibWF0Y2giLCJwYXJzZUludCIsImpvaW4iLCJ0b3RhbERheXMiLCJ0b3RhbFBvc3RzIiwiY2FtcGFpZ25JZCIsImNhbXBhaWduIiwiY3JlYXRlQ2FtcGFpZ24iLCJzdGFydERhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlbmREYXRlIiwibm93IiwidGVtcGxhdGUiLCJhbGxQb3N0cyIsImdlbmVyYXRlQmF0Y2hlc0FzeW5jIiwiYmF0Y2hlcyIsImNyZWF0ZUJhdGNoZXMiLCJmb3JFYWNoIiwiYmF0Y2giLCJwcm9jZXNzSW5kaWNhdG9yIiwicHJvY2Vzc1R5cGUiLCJjb2xvciIsImkiLCJwb3N0cyIsInByb2Nlc3NCYXRjaCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIkVycm9yIiwibWVzc2FnZSIsImluc3RydWN0aW9ucyIsImRheXMiLCJwbGF0Zm9ybSIsIndlZWsiLCJNYXRoIiwiZmxvb3IiLCJkYXlJbmRleCIsImRheSIsInRpbWUiLCJnZXRPcHRpbWFsUG9zdFRpbWUiLCJwb3N0RGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwicGhhc2VzIiwicGhhc2VJbmRleCIsInBoYXNlIiwibWluIiwiY29udGVudFR5cGVzIiwiY29udGVudFR5cGUiLCJnZW5lcmF0ZVBsYXRmb3JtQ29udGVudCIsInB1c2giLCJzY2hlZHVsZWREYXRlIiwic2NoZWR1bGVkVGltZSIsIm1ldGFkYXRhIiwiZGF5T2ZXZWVrIiwiY2FtcGFpZ25QaGFzZSIsImhhc2h0YWdzIiwiZ2VuZXJhdGVIYXNodGFncyIsImJhdGNoSWQiLCJCQVRDSF9TSVpFIiwidGltZXMiLCJ0d2l0dGVyIiwibGlua2VkaW4iLCJpbnN0YWdyYW0iLCJmYWNlYm9vayIsInBsYXRmb3JtVGltZXMiLCJicmFuZFZvaWNlIiwiZXh0cmFjdEJyYW5kVm9pY2UiLCJhdWRpZW5jZSIsImV4dHJhY3RBdWRpZW5jZSIsInN1YnN0cmluZyIsInZvaWNlS2V5d29yZHMiLCJsb3dlckluc3RydWN0aW9ucyIsImtleXdvcmQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiYXVkaWVuY2VLZXl3b3JkcyIsImJhc2VIYXNodGFncyIsInBoYXNlSGFzaHRhZ3MiLCJhd2FyZW5lc3MiLCJjb25zaWRlcmF0aW9uIiwiY29udmVyc2lvbiIsInJldGVudGlvbiIsImNvbnRlbnRIYXNodGFncyIsImVkdWNhdGlvbmFsIiwicHJvbW90aW9uYWwiLCJlbmdhZ2VtZW50IiwiYW5ub3VuY2VtZW50IiwiYmF0Y2hQb3N0cyIsInByb2Nlc3NpbmdTdGF0dXMiLCJwcm9jZXNzZWRDb3VudCIsInRvdGFsQ291bnQiLCJwb3N0UHJvbWlzZXMiLCJwb3N0IiwidXBzZXJ0UG9zdCIsInRpdGxlIiwicGxhdGZvcm1EYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInNjaGVkdWxlZEZvciIsImdldFRpbWUiLCJhbGwiLCJjb21wbGV0ZWRCYXRjaGVzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwidG90YWxCYXRjaGVzIiwic2l6ZSIsInRvdGFsUHJvY2Vzc2VkIiwicmVkdWNlIiwic3VtIiwiaWNvbiIsIk1BWF9DT05DVVJSRU5UX0JBVENIRVMiLCJ0b29scyIsImNvbW1hbmQiLCJwYXJhbWV0ZXJzIiwiZGlyZWN0b3JBZ2VudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./store/agents/directorAgent.ts\n"));

/***/ })

});