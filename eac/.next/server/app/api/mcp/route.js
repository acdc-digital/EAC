/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/mcp/route";
exports.ids = ["app/api/mcp/route"];
exports.modules = {

/***/ "(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmcp%2Froute&page=%2Fapi%2Fmcp%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmcp%2Froute.ts&appDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmcp%2Froute&page=%2Fapi%2Fmcp%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmcp%2Froute.ts&appDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_matthewsimon_Projects_eac_eac_app_api_mcp_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/mcp/route.ts */ \"(rsc)/./app/api/mcp/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/mcp/route\",\n        pathname: \"/api/mcp\",\n        filename: \"route\",\n        bundlePath: \"app/api/mcp/route\"\n    },\n    resolvedPagePath: \"/Users/matthewsimon/Projects/eac/eac/app/api/mcp/route.ts\",\n    nextConfigOutput,\n    userland: _Users_matthewsimon_Projects_eac_eac_app_api_mcp_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTUuMy41X3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX19yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGbWNwJTJGcm91dGUmcGFnZT0lMkZhcGklMkZtY3AlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZtY3AlMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZtYXR0aGV3c2ltb24lMkZQcm9qZWN0cyUyRmVhYyUyRmVhYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtYXR0aGV3c2ltb24lMkZQcm9qZWN0cyUyRmVhYyUyRmVhYyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDUztBQUN0RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21hdHRoZXdzaW1vbi9Qcm9qZWN0cy9lYWMvZWFjL2FwcC9hcGkvbWNwL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tY3Avcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tY3BcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL21jcC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9tYXR0aGV3c2ltb24vUHJvamVjdHMvZWFjL2VhYy9hcHAvYXBpL21jcC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmcp%2Froute&page=%2Fapi%2Fmcp%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmcp%2Froute.ts&appDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************************************************************************************!*\
  !*** ../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/mcp/route.ts":
/*!******************************!*\
  !*** ./app/api/mcp/route.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \"events\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/server */ \"(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n// MCP Server API Route\n// /Users/matthewsimon/Projects/eac/eac/app/api/mcp/route.ts\n\n\n\n\nclass MCPServerConnection extends events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter {\n    async connect() {\n        return new Promise((resolve, reject)=>{\n            try {\n                // Path to the built MCP server\n                const serverPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), '..', 'mcp-server', 'dist', 'index.js');\n                this.process = (0,child_process__WEBPACK_IMPORTED_MODULE_0__.spawn)('node', [\n                    serverPath\n                ], {\n                    stdio: [\n                        'pipe',\n                        'pipe',\n                        'pipe'\n                    ],\n                    cwd: path__WEBPACK_IMPORTED_MODULE_3___default().dirname(serverPath)\n                });\n                this.process.stdout?.on('data', (data)=>{\n                    try {\n                        const lines = data.toString().split('\\n').filter((line)=>line.trim());\n                        for (const line of lines){\n                            const message = JSON.parse(line);\n                            this.handleMessage(message);\n                        }\n                    } catch (error) {\n                        console.error('Failed to parse MCP message:', error);\n                    }\n                });\n                this.process.stderr?.on('data', (data)=>{\n                    console.error('MCP Server Error:', data.toString());\n                });\n                this.process.on('close', (code)=>{\n                    console.log('MCP Server closed with code:', code);\n                    this.isConnected = false;\n                    this.emit('disconnect');\n                });\n                this.process.on('error', (error)=>{\n                    console.error('MCP Server spawn error:', error);\n                    reject(error);\n                });\n                // Send initialization message\n                this.sendMessage({\n                    jsonrpc: '2.0',\n                    id: this.getNextId(),\n                    method: 'initialize',\n                    params: {\n                        protocolVersion: '2024-11-05',\n                        capabilities: {\n                            tools: {}\n                        },\n                        clientInfo: {\n                            name: 'EAC Terminal Chat',\n                            version: '1.0.0'\n                        }\n                    }\n                });\n                this.isConnected = true;\n                resolve();\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n    sendMessage(message) {\n        if (this.process?.stdin) {\n            this.process.stdin.write(JSON.stringify(message) + '\\n');\n        }\n    }\n    handleMessage(message) {\n        if (message.id && this.pendingRequests.has(message.id)) {\n            const request = this.pendingRequests.get(message.id);\n            this.pendingRequests.delete(message.id);\n            if (message.error) {\n                request?.reject(new Error(message.error.message || 'Unknown error'));\n            } else {\n                request?.resolve(message.result);\n            }\n        }\n    }\n    getNextId() {\n        return ++this.messageId;\n    }\n    async callTool(name, arguments_) {\n        return new Promise((resolve, reject)=>{\n            const id = this.getNextId();\n            this.pendingRequests.set(id, {\n                resolve,\n                reject\n            });\n            this.sendMessage({\n                jsonrpc: '2.0',\n                id,\n                method: 'tools/call',\n                params: {\n                    name,\n                    arguments: arguments_\n                }\n            });\n        });\n    }\n    async listTools() {\n        return new Promise((resolve, reject)=>{\n            const id = this.getNextId();\n            this.pendingRequests.set(id, {\n                resolve,\n                reject\n            });\n            this.sendMessage({\n                jsonrpc: '2.0',\n                id,\n                method: 'tools/list',\n                params: {}\n            });\n        });\n    }\n    disconnect() {\n        if (this.process) {\n            this.process.kill();\n            this.process = null;\n        }\n        this.isConnected = false;\n    }\n    getStatus() {\n        return {\n            connected: this.isConnected,\n            tools: 8 // We know we have 8 tools available\n        };\n    }\n    constructor(...args){\n        super(...args), this.process = null, this.isConnected = false, this.messageId = 0, this.pendingRequests = new Map();\n    }\n}\n// Global MCP connection instance\nlet mcpConnection = null;\nasync function POST(request) {\n    try {\n        const { action, data } = await request.json();\n        // Initialize connection if needed\n        if (!mcpConnection) {\n            mcpConnection = new MCPServerConnection();\n            await mcpConnection.connect();\n        }\n        switch(action){\n            case 'status':\n                return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                    success: true,\n                    status: mcpConnection.getStatus()\n                });\n            case 'list-tools':\n                try {\n                    const tools = await mcpConnection.listTools();\n                    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                        success: true,\n                        tools\n                    });\n                } catch (error) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                        success: false,\n                        error: error instanceof Error ? error.message : 'Failed to list tools'\n                    });\n                }\n            case 'call-tool':\n                try {\n                    const { name, arguments: args } = data;\n                    const result = await mcpConnection.callTool(name, args);\n                    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                        success: true,\n                        result\n                    });\n                } catch (error) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                        success: false,\n                        error: error instanceof Error ? error.message : 'Tool call failed'\n                    });\n                }\n            case 'process-natural-language':\n                try {\n                    const { query } = data;\n                    // Enhanced NLP to tool mapping using actual tool names\n                    let toolName = '';\n                    let toolArgs = {};\n                    if (query.toLowerCase().includes('reddit') && query.toLowerCase().includes('analyz')) {\n                        toolName = 'eac_reddit_analyzer';\n                        toolArgs = {\n                            analysisType: 'all',\n                            includeMetrics: true\n                        };\n                    } else if (query.toLowerCase().includes('reddit') && query.toLowerCase().includes('generat')) {\n                        toolName = 'eac_reddit_post_generator';\n                        toolArgs = {\n                            type: 'post',\n                            topic: query\n                        };\n                    } else if (query.toLowerCase().includes('workflow') && query.toLowerCase().includes('optim')) {\n                        toolName = 'eac_social_workflow_optimizer';\n                        toolArgs = {\n                            platform: 'reddit',\n                            focus: 'automation'\n                        };\n                    } else if (query.toLowerCase().includes('project') && query.toLowerCase().includes('analyz')) {\n                        toolName = 'eac_project_analyze';\n                        toolArgs = {\n                            includePatterns: true,\n                            includeRecommendations: true\n                        };\n                    } else if (query.toLowerCase().includes('component')) {\n                        toolName = 'eac_component_finder';\n                        toolArgs = {\n                            includeProps: true,\n                            includeHooks: true\n                        };\n                    } else if (query.toLowerCase().includes('store') || query.toLowerCase().includes('zustand')) {\n                        toolName = 'eac_store_inspector';\n                        toolArgs = {\n                            includeUsage: true,\n                            includePatterns: true\n                        };\n                    } else if (query.toLowerCase().includes('convex') || query.toLowerCase().includes('database')) {\n                        toolName = 'eac_convex_analyzer';\n                        toolArgs = {\n                            includeSchema: true,\n                            includeFunctions: true,\n                            includePatterns: true\n                        };\n                    } else {\n                        // Default to project analysis for general queries\n                        toolName = 'eac_project_analyze';\n                        toolArgs = {\n                            includePatterns: true,\n                            includeRecommendations: true\n                        };\n                    }\n                    const result = await mcpConnection.callTool(toolName, toolArgs);\n                    // Extract the actual text content from MCP tool result\n                    let textContent = '';\n                    if (result && result.content && Array.isArray(result.content)) {\n                        // If the result has a content array, extract the text\n                        textContent = result.content.filter((item)=>item.type === 'text').map((item)=>item.text || '').join('\\n');\n                    } else if (typeof result === 'string') {\n                        // If it's already a string, use it directly\n                        textContent = result;\n                    } else {\n                        // Fallback: stringify the object but try to make it readable\n                        textContent = JSON.stringify(result, null, 2);\n                    }\n                    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                        success: true,\n                        content: [\n                            {\n                                type: 'text',\n                                text: textContent\n                            }\n                        ],\n                        toolCalls: [\n                            {\n                                name: toolName,\n                                arguments: toolArgs\n                            }\n                        ]\n                    });\n                } catch (error) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                        success: false,\n                        error: error instanceof Error ? error.message : 'Natural language processing failed',\n                        content: []\n                    });\n                }\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                    success: false,\n                    error: 'Unknown action'\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error('MCP API Error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    try {\n        // Initialize connection if needed\n        if (!mcpConnection) {\n            mcpConnection = new MCPServerConnection();\n            try {\n                await mcpConnection.connect();\n            } catch (error) {\n                console.error('Failed to connect to MCP server:', error);\n                return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                    success: true,\n                    status: {\n                        connected: false,\n                        tools: 0\n                    }\n                });\n            }\n        }\n        // Return MCP server status\n        const status = mcpConnection.getStatus();\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            success: true,\n            status\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : 'Failed to get status'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU87UUFDZCxPQUFPMUIscURBQVlBLENBQUNxRSxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVDVDLE9BQU9BLGlCQUFpQjJCLFFBQVEzQixNQUFNSixPQUFPLEdBQUc7UUFDbEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWF0dGhld3NpbW9uL1Byb2plY3RzL2VhYy9lYWMvYXBwL2FwaS9tY3Avcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTUNQIFNlcnZlciBBUEkgUm91dGVcbi8vIC9Vc2Vycy9tYXR0aGV3c2ltb24vUHJvamVjdHMvZWFjL2VhYy9hcHAvYXBpL21jcC9yb3V0ZS50c1xuXG5pbXBvcnQgeyBDaGlsZFByb2Nlc3MsIHNwYXduIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbnRlcmZhY2UgTUNQVG9vbENhbGwge1xuICBuYW1lOiBzdHJpbmc7XG4gIGFyZ3VtZW50czogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuaW50ZXJmYWNlIE1DUFJlc3BvbnNlIHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgY29udGVudDogQXJyYXk8eyB0eXBlOiBzdHJpbmc7IHRleHQ6IHN0cmluZyB9PjtcbiAgdG9vbENhbGxzPzogTUNQVG9vbENhbGxbXTtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmNsYXNzIE1DUFNlcnZlckNvbm5lY3Rpb24gZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIHByb2Nlc3M6IENoaWxkUHJvY2VzcyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzQ29ubmVjdGVkID0gZmFsc2U7XG4gIHByaXZhdGUgbWVzc2FnZUlkID0gMDtcbiAgcHJpdmF0ZSBwZW5kaW5nUmVxdWVzdHMgPSBuZXcgTWFwPG51bWJlciwgeyByZXNvbHZlOiBGdW5jdGlvbjsgcmVqZWN0OiBGdW5jdGlvbiB9PigpO1xuXG4gIGFzeW5jIGNvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFBhdGggdG8gdGhlIGJ1aWx0IE1DUCBzZXJ2ZXJcbiAgICAgICAgY29uc3Qgc2VydmVyUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnLi4nLCAnbWNwLXNlcnZlcicsICdkaXN0JywgJ2luZGV4LmpzJyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnByb2Nlc3MgPSBzcGF3bignbm9kZScsIFtzZXJ2ZXJQYXRoXSwge1xuICAgICAgICAgIHN0ZGlvOiBbJ3BpcGUnLCAncGlwZScsICdwaXBlJ10sXG4gICAgICAgICAgY3dkOiBwYXRoLmRpcm5hbWUoc2VydmVyUGF0aClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5wcm9jZXNzLnN0ZG91dD8ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IGRhdGEudG9TdHJpbmcoKS5zcGxpdCgnXFxuJykuZmlsdGVyKChsaW5lOiBzdHJpbmcpID0+IGxpbmUudHJpbSgpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShsaW5lKTtcbiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgTUNQIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5wcm9jZXNzLnN0ZGVycj8ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01DUCBTZXJ2ZXIgRXJyb3I6JywgZGF0YS50b1N0cmluZygpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5wcm9jZXNzLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ01DUCBTZXJ2ZXIgY2xvc2VkIHdpdGggY29kZTonLCBjb2RlKTtcbiAgICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5lbWl0KCdkaXNjb25uZWN0Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucHJvY2Vzcy5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdNQ1AgU2VydmVyIHNwYXduIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTZW5kIGluaXRpYWxpemF0aW9uIG1lc3NhZ2VcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAganNvbnJwYzogJzIuMCcsXG4gICAgICAgICAgaWQ6IHRoaXMuZ2V0TmV4dElkKCksXG4gICAgICAgICAgbWV0aG9kOiAnaW5pdGlhbGl6ZScsXG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBwcm90b2NvbFZlcnNpb246ICcyMDI0LTExLTA1JyxcbiAgICAgICAgICAgIGNhcGFiaWxpdGllczoge1xuICAgICAgICAgICAgICB0b29sczoge31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGllbnRJbmZvOiB7XG4gICAgICAgICAgICAgIG5hbWU6ICdFQUMgVGVybWluYWwgQ2hhdCcsXG4gICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZW5kTWVzc2FnZShtZXNzYWdlOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wcm9jZXNzPy5zdGRpbikge1xuICAgICAgdGhpcy5wcm9jZXNzLnN0ZGluLndyaXRlKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpICsgJ1xcbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTWVzc2FnZShtZXNzYWdlOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAobWVzc2FnZS5pZCAmJiB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5oYXMobWVzc2FnZS5pZCkpIHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5nZXQobWVzc2FnZS5pZCk7XG4gICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZS5pZCk7XG4gICAgICBcbiAgICAgIGlmIChtZXNzYWdlLmVycm9yKSB7XG4gICAgICAgIHJlcXVlc3Q/LnJlamVjdChuZXcgRXJyb3IobWVzc2FnZS5lcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdD8ucmVzb2x2ZShtZXNzYWdlLnJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXROZXh0SWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKyt0aGlzLm1lc3NhZ2VJZDtcbiAgfVxuXG4gIGFzeW5jIGNhbGxUb29sKG5hbWU6IHN0cmluZywgYXJndW1lbnRzXzogUmVjb3JkPHN0cmluZywgYW55Pik6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXROZXh0SWQoKTtcbiAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLnNldChpZCwgeyByZXNvbHZlLCByZWplY3QgfSk7XG4gICAgICBcbiAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICBqc29ucnBjOiAnMi4wJyxcbiAgICAgICAgaWQsXG4gICAgICAgIG1ldGhvZDogJ3Rvb2xzL2NhbGwnLFxuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGFyZ3VtZW50czogYXJndW1lbnRzX1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGxpc3RUb29scygpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0TmV4dElkKCk7XG4gICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zZXQoaWQsIHsgcmVzb2x2ZSwgcmVqZWN0IH0pO1xuICAgICAgXG4gICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAganNvbnJwYzogJzIuMCcsXG4gICAgICAgIGlkLFxuICAgICAgICBtZXRob2Q6ICd0b29scy9saXN0JyxcbiAgICAgICAgcGFyYW1zOiB7fVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnByb2Nlc3MpIHtcbiAgICAgIHRoaXMucHJvY2Vzcy5raWxsKCk7XG4gICAgICB0aGlzLnByb2Nlc3MgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBnZXRTdGF0dXMoKTogeyBjb25uZWN0ZWQ6IGJvb2xlYW47IHRvb2xzOiBudW1iZXIgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbm5lY3RlZDogdGhpcy5pc0Nvbm5lY3RlZCxcbiAgICAgIHRvb2xzOiA4IC8vIFdlIGtub3cgd2UgaGF2ZSA4IHRvb2xzIGF2YWlsYWJsZVxuICAgIH07XG4gIH1cbn1cblxuLy8gR2xvYmFsIE1DUCBjb25uZWN0aW9uIGluc3RhbmNlXG5sZXQgbWNwQ29ubmVjdGlvbjogTUNQU2VydmVyQ29ubmVjdGlvbiB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgYWN0aW9uLCBkYXRhIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIC8vIEluaXRpYWxpemUgY29ubmVjdGlvbiBpZiBuZWVkZWRcbiAgICBpZiAoIW1jcENvbm5lY3Rpb24pIHtcbiAgICAgIG1jcENvbm5lY3Rpb24gPSBuZXcgTUNQU2VydmVyQ29ubmVjdGlvbigpO1xuICAgICAgYXdhaXQgbWNwQ29ubmVjdGlvbi5jb25uZWN0KCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3N0YXR1cyc6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBzdGF0dXM6IG1jcENvbm5lY3Rpb24uZ2V0U3RhdHVzKClcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgJ2xpc3QtdG9vbHMnOlxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgbWNwQ29ubmVjdGlvbi5saXN0VG9vbHMoKTtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHRvb2xzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBsaXN0IHRvb2xzJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ2NhbGwtdG9vbCc6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MgfSA9IGRhdGE7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWNwQ29ubmVjdGlvbi5jYWxsVG9vbChuYW1lLCBhcmdzKTtcbiAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHJlc3VsdFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdUb29sIGNhbGwgZmFpbGVkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ3Byb2Nlc3MtbmF0dXJhbC1sYW5ndWFnZSc6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyBxdWVyeSB9ID0gZGF0YTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFbmhhbmNlZCBOTFAgdG8gdG9vbCBtYXBwaW5nIHVzaW5nIGFjdHVhbCB0b29sIG5hbWVzXG4gICAgICAgICAgbGV0IHRvb2xOYW1lID0gJyc7XG4gICAgICAgICAgbGV0IHRvb2xBcmdzID0ge307XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHF1ZXJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JlZGRpdCcpICYmIHF1ZXJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2FuYWx5eicpKSB7XG4gICAgICAgICAgICB0b29sTmFtZSA9ICdlYWNfcmVkZGl0X2FuYWx5emVyJztcbiAgICAgICAgICAgIHRvb2xBcmdzID0geyBhbmFseXNpc1R5cGU6ICdhbGwnLCBpbmNsdWRlTWV0cmljczogdHJ1ZSB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAocXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncmVkZGl0JykgJiYgcXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ2VuZXJhdCcpKSB7XG4gICAgICAgICAgICB0b29sTmFtZSA9ICdlYWNfcmVkZGl0X3Bvc3RfZ2VuZXJhdG9yJztcbiAgICAgICAgICAgIHRvb2xBcmdzID0geyB0eXBlOiAncG9zdCcsIHRvcGljOiBxdWVyeSB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAocXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnd29ya2Zsb3cnKSAmJiBxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdvcHRpbScpKSB7XG4gICAgICAgICAgICB0b29sTmFtZSA9ICdlYWNfc29jaWFsX3dvcmtmbG93X29wdGltaXplcic7XG4gICAgICAgICAgICB0b29sQXJncyA9IHsgcGxhdGZvcm06ICdyZWRkaXQnLCBmb2N1czogJ2F1dG9tYXRpb24nIH07XG4gICAgICAgICAgfSBlbHNlIGlmIChxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwcm9qZWN0JykgJiYgcXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYW5hbHl6JykpIHtcbiAgICAgICAgICAgIHRvb2xOYW1lID0gJ2VhY19wcm9qZWN0X2FuYWx5emUnO1xuICAgICAgICAgICAgdG9vbEFyZ3MgPSB7IGluY2x1ZGVQYXR0ZXJuczogdHJ1ZSwgaW5jbHVkZVJlY29tbWVuZGF0aW9uczogdHJ1ZSB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAocXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY29tcG9uZW50JykpIHtcbiAgICAgICAgICAgIHRvb2xOYW1lID0gJ2VhY19jb21wb25lbnRfZmluZGVyJztcbiAgICAgICAgICAgIHRvb2xBcmdzID0geyBpbmNsdWRlUHJvcHM6IHRydWUsIGluY2x1ZGVIb29rczogdHJ1ZSB9O1xuICAgICAgICAgIH0gZWxzZSBpZiAocXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3RvcmUnKSB8fCBxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd6dXN0YW5kJykpIHtcbiAgICAgICAgICAgIHRvb2xOYW1lID0gJ2VhY19zdG9yZV9pbnNwZWN0b3InO1xuICAgICAgICAgICAgdG9vbEFyZ3MgPSB7IGluY2x1ZGVVc2FnZTogdHJ1ZSwgaW5jbHVkZVBhdHRlcm5zOiB0cnVlIH07XG4gICAgICAgICAgfSBlbHNlIGlmIChxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjb252ZXgnKSB8fCBxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkYXRhYmFzZScpKSB7XG4gICAgICAgICAgICB0b29sTmFtZSA9ICdlYWNfY29udmV4X2FuYWx5emVyJztcbiAgICAgICAgICAgIHRvb2xBcmdzID0geyBpbmNsdWRlU2NoZW1hOiB0cnVlLCBpbmNsdWRlRnVuY3Rpb25zOiB0cnVlLCBpbmNsdWRlUGF0dGVybnM6IHRydWUgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byBwcm9qZWN0IGFuYWx5c2lzIGZvciBnZW5lcmFsIHF1ZXJpZXNcbiAgICAgICAgICAgIHRvb2xOYW1lID0gJ2VhY19wcm9qZWN0X2FuYWx5emUnO1xuICAgICAgICAgICAgdG9vbEFyZ3MgPSB7IGluY2x1ZGVQYXR0ZXJuczogdHJ1ZSwgaW5jbHVkZVJlY29tbWVuZGF0aW9uczogdHJ1ZSB9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1jcENvbm5lY3Rpb24uY2FsbFRvb2wodG9vbE5hbWUsIHRvb2xBcmdzKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBhY3R1YWwgdGV4dCBjb250ZW50IGZyb20gTUNQIHRvb2wgcmVzdWx0XG4gICAgICAgICAgbGV0IHRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuY29udGVudCAmJiBBcnJheS5pc0FycmF5KHJlc3VsdC5jb250ZW50KSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHJlc3VsdCBoYXMgYSBjb250ZW50IGFycmF5LCBleHRyYWN0IHRoZSB0ZXh0XG4gICAgICAgICAgICB0ZXh0Q29udGVudCA9IHJlc3VsdC5jb250ZW50XG4gICAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW06IHsgdHlwZTogc3RyaW5nOyB0ZXh0Pzogc3RyaW5nIH0pID0+IGl0ZW0udHlwZSA9PT0gJ3RleHQnKVxuICAgICAgICAgICAgICAubWFwKChpdGVtOiB7IHR5cGU6IHN0cmluZzsgdGV4dD86IHN0cmluZyB9KSA9PiBpdGVtLnRleHQgfHwgJycpXG4gICAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyBJZiBpdCdzIGFscmVhZHkgYSBzdHJpbmcsIHVzZSBpdCBkaXJlY3RseVxuICAgICAgICAgICAgdGV4dENvbnRlbnQgPSByZXN1bHQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBzdHJpbmdpZnkgdGhlIG9iamVjdCBidXQgdHJ5IHRvIG1ha2UgaXQgcmVhZGFibGVcbiAgICAgICAgICAgIHRleHRDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBjb250ZW50OiBbeyB0eXBlOiAndGV4dCcsIHRleHQ6IHRleHRDb250ZW50IH1dLFxuICAgICAgICAgICAgdG9vbENhbGxzOiBbeyBuYW1lOiB0b29sTmFtZSwgYXJndW1lbnRzOiB0b29sQXJncyB9XVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdOYXR1cmFsIGxhbmd1YWdlIHByb2Nlc3NpbmcgZmFpbGVkJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtdXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1Vua25vd24gYWN0aW9uJ1xuICAgICAgICB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdNQ1AgQVBJIEVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJ1xuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgdHJ5IHtcbiAgICAvLyBJbml0aWFsaXplIGNvbm5lY3Rpb24gaWYgbmVlZGVkXG4gICAgaWYgKCFtY3BDb25uZWN0aW9uKSB7XG4gICAgICBtY3BDb25uZWN0aW9uID0gbmV3IE1DUFNlcnZlckNvbm5lY3Rpb24oKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG1jcENvbm5lY3Rpb24uY29ubmVjdCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdG8gTUNQIHNlcnZlcjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBzdGF0dXM6IHsgY29ubmVjdGVkOiBmYWxzZSwgdG9vbHM6IDAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gUmV0dXJuIE1DUCBzZXJ2ZXIgc3RhdHVzXG4gICAgY29uc3Qgc3RhdHVzID0gbWNwQ29ubmVjdGlvbi5nZXRTdGF0dXMoKTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHN0YXR1c1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZ2V0IHN0YXR1cydcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInNwYXduIiwiRXZlbnRFbWl0dGVyIiwiTmV4dFJlc3BvbnNlIiwicGF0aCIsIk1DUFNlcnZlckNvbm5lY3Rpb24iLCJjb25uZWN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXJ2ZXJQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJzdGRpbyIsImRpcm5hbWUiLCJzdGRvdXQiLCJvbiIsImRhdGEiLCJsaW5lcyIsInRvU3RyaW5nIiwic3BsaXQiLCJmaWx0ZXIiLCJsaW5lIiwidHJpbSIsIm1lc3NhZ2UiLCJKU09OIiwicGFyc2UiLCJoYW5kbGVNZXNzYWdlIiwiZXJyb3IiLCJjb25zb2xlIiwic3RkZXJyIiwiY29kZSIsImxvZyIsImlzQ29ubmVjdGVkIiwiZW1pdCIsInNlbmRNZXNzYWdlIiwianNvbnJwYyIsImlkIiwiZ2V0TmV4dElkIiwibWV0aG9kIiwicGFyYW1zIiwicHJvdG9jb2xWZXJzaW9uIiwiY2FwYWJpbGl0aWVzIiwidG9vbHMiLCJjbGllbnRJbmZvIiwibmFtZSIsInZlcnNpb24iLCJzdGRpbiIsIndyaXRlIiwic3RyaW5naWZ5IiwicGVuZGluZ1JlcXVlc3RzIiwiaGFzIiwicmVxdWVzdCIsImdldCIsImRlbGV0ZSIsIkVycm9yIiwicmVzdWx0IiwibWVzc2FnZUlkIiwiY2FsbFRvb2wiLCJhcmd1bWVudHNfIiwic2V0IiwiYXJndW1lbnRzIiwibGlzdFRvb2xzIiwiZGlzY29ubmVjdCIsImtpbGwiLCJnZXRTdGF0dXMiLCJjb25uZWN0ZWQiLCJNYXAiLCJtY3BDb25uZWN0aW9uIiwiUE9TVCIsImFjdGlvbiIsImpzb24iLCJzdWNjZXNzIiwic3RhdHVzIiwiYXJncyIsInF1ZXJ5IiwidG9vbE5hbWUiLCJ0b29sQXJncyIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJhbmFseXNpc1R5cGUiLCJpbmNsdWRlTWV0cmljcyIsInR5cGUiLCJ0b3BpYyIsInBsYXRmb3JtIiwiZm9jdXMiLCJpbmNsdWRlUGF0dGVybnMiLCJpbmNsdWRlUmVjb21tZW5kYXRpb25zIiwiaW5jbHVkZVByb3BzIiwiaW5jbHVkZUhvb2tzIiwiaW5jbHVkZVVzYWdlIiwiaW5jbHVkZVNjaGVtYSIsImluY2x1ZGVGdW5jdGlvbnMiLCJ0ZXh0Q29udGVudCIsImNvbnRlbnQiLCJBcnJheSIsImlzQXJyYXkiLCJpdGVtIiwibWFwIiwidGV4dCIsInRvb2xDYWxscyIsIkdFVCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/mcp/route.ts\n");

/***/ }),

/***/ "(ssr)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**********************************************************************************************************************************************************************************!*\
  !*** ../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1"], () => (__webpack_exec__("(rsc)/../node_modules/.pnpm/next@15.3.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmcp%2Froute&page=%2Fapi%2Fmcp%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmcp%2Froute.ts&appDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatthewsimon%2FProjects%2Feac%2Feac&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();